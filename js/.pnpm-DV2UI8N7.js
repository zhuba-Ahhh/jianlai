var e={exports:{}},t={};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var i=React,r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,i){var n,l={},u=null,h=null;for(n in void 0!==i&&(u=""+i),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(h=t.ref),t)a.call(t,n)&&!o.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:r,type:e,key:u,ref:h,props:l,_owner:s.current}}t.Fragment=n,t.jsx=l,t.jsxs=l,e.exports=t;var u,h,c=e.exports;
/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},d.apply(this,arguments)}(h=u||(u={})).Pop="POP",h.Push="PUSH",h.Replace="REPLACE";const p="popstate";function f(e){return void 0===e&&(e={}),function(e,t,i,r){void 0===r&&(r={});let{window:n=document.defaultView,v5Compat:a=!1}=r,s=n.history,o=u.Pop,l=null,h=c();null==h&&(h=0,s.replaceState(d({},s.state,{idx:h}),""));function c(){return(s.state||{idx:null}).idx}function f(){o=u.Pop;let e=c(),t=null==e?null:e-h;h=e,l&&l({action:o,location:R.location,delta:t})}function m(e,t){o=u.Push;let i=v(R.location,e,t);h=c()+1;let r=_(i,h),d=R.createHref(i);try{s.pushState(r,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;n.location.assign(d)}a&&l&&l({action:o,location:R.location,delta:1})}function w(e,t){o=u.Replace;let i=v(R.location,e,t);h=c();let r=_(i,h),n=R.createHref(i);s.replaceState(r,"",n),a&&l&&l({action:o,location:R.location,delta:0})}function b(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,i="string"==typeof e?e:y(e);return i=i.replace(/ $/,"%20"),g(t,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,t)}let R={get action(){return o},get location(){return e(n,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(p,f),l=e,()=>{n.removeEventListener(p,f),l=null}},createHref:e=>t(n,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:m,replace:w,go:e=>s.go(e)};return R}((function(e,t){let{pathname:i,search:r,hash:n}=e.location;return v("",{pathname:i,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:y(t)}),0,e)}function g(e,t){if(!1===e||null==e)throw new Error(t)}function m(e,t){if(!e)try{throw new Error(t)}catch(i){}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function v(e,t,i,r){return void 0===i&&(i=null),d({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?w(t):t,{state:i,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function y(e){let{pathname:t="/",search:i="",hash:r=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function w(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var b,R;(R=b||(b={})).data="data",R.deferred="deferred",R.redirect="redirect",R.error="error";const E=new Set(["lazy","caseSensitive","path","id","index","children"]);function P(e,t,i,r){return void 0===i&&(i=[]),void 0===r&&(r={}),e.map(((e,n)=>{let a=[...i,String(n)],s="string"==typeof e.id?e.id:a.join("-");if(g(!0!==e.index||!e.children,"Cannot specify children on an index route"),g(!r[s],'Found a route id collision on id "'+s+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let i=d({},e,t(e),{id:s});return r[s]=i,i}{let i=d({},e,t(e),{id:s,children:void 0});return r[s]=i,e.children&&(i.children=P(e.children,t,a,r)),i}}))}function x(e,t,i){return void 0===i&&(i="/"),V(e,t,i,!1)}function V(e,t,i,r){let n=U(("string"==typeof t?w(t):t).pathname||"/",i);if(null==n)return null;let a=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=O(n);s=F(a[o],e,r)}return s}function S(e,t,i,r){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===r&&(r="");let n=(e,n,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};s.relativePath.startsWith("/")&&(g(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=W([r,s.relativePath]),l=i.concat(s);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),S(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var i;if(""!==e.path&&null!=(i=e.path)&&i.includes("?"))for(let r of D(e.path))n(e,t,r);else n(e,t)})),t}function D(e){let t=e.split("/");if(0===t.length)return[];let[i,...r]=t,n=i.endsWith("?"),a=i.replace(/\?$/,"");if(0===r.length)return n?[a,""]:[a];let s=D(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),n&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const T=/^:[\w-]+$/,A=3,L=2,M=1,C=10,k=-2,I=e=>"*"===e;function N(e,t){let i=e.split("/"),r=i.length;return i.some(I)&&(r+=k),t&&(r+=L),i.filter((e=>!I(e))).reduce(((e,t)=>e+(T.test(t)?A:""===t?M:C)),r)}function F(e,t,i){void 0===i&&(i=!1);let{routesMeta:r}=e,n={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===a?t:t.slice(a.length)||"/",h=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),c=e.route;if(!h&&l&&i&&!r[r.length-1].route.index&&(h=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),s.push({params:n,pathname:W([a,h.pathname]),pathnameBase:q(W([a,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(a=W([a,h.pathnameBase]))}return s}function B(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(r.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let a=n[0],s=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce(((e,t,i)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=o[i]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[i];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:s,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=e.charAt(i);return r&&"/"!==r?null:e.slice(i)||"/"}function $(e,t,i,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let i=z(e);return t?i.map(((e,t)=>t===i.length-1?e.pathname:e.pathnameBase)):i.map((e=>e.pathnameBase))}function Y(e,t,i,r){let n;void 0===r&&(r=!1),"string"==typeof e?n=w(e):(n=d({},e),g(!n.pathname||!n.pathname.includes("?"),$("?","pathname","search",n)),g(!n.pathname||!n.pathname.includes("#"),$("#","pathname","hash",n)),g(!n.search||!n.search.includes("#"),$("#","search","hash",n)));let a,s=""===e||""===n.pathname,o=s?"/":n.pathname;if(null==o)a=i;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:i,search:r="",hash:n=""}="string"==typeof e?w(e):e,a=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:a,search:H(r),hash:X(n)}}(n,a),u=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&i.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const W=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class K{constructor(e,t,i,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function J(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const Z=["post","put","patch","delete"],G=new Set(Z),Q=["get",...Z],ee=new Set(Q),te=new Set([301,302,303,307,308]),ie=new Set([307,308]),re={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ne={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ae={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),le="remix-router-transitions";function ue(e){const t=e.window?e.window:"undefined"!=typeof window?window:void 0,i=void 0!==t&&void 0!==t.document&&void 0!==t.document.createElement,r=!i;let n;if(g(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)n=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;n=e=>({hasErrorBoundary:t(e)})}else n=oe;let a,s,o,l={},h=P(e.routes,n,void 0,l),c=e.basename||"/",p=e.dataStrategy||ye,f=e.patchRoutesOnNavigation,_=d({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),y=null,w=new Set,R=null,S=null,D=null,T=null!=e.hydrationData,A=x(h,e.history.location,c),L=null;if(null==A&&!f){let t=Le(404,{pathname:e.history.location.pathname}),{matches:i,route:r}=Ae(h);A=i,L={[r.id]:t}}if(A&&!e.hydrationData){lt(A,h,e.history.location.pathname).active&&(A=null)}if(A)if(A.some((e=>e.route.lazy)))s=!1;else if(A.some((e=>e.route.loader)))if(_.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,i=e.hydrationData?e.hydrationData.errors:null;if(i){let e=A.findIndex((e=>void 0!==i[e.route.id]));s=A.slice(0,e+1).every((e=>!fe(e.route,t,i)))}else s=A.every((e=>!fe(e.route,t,i)))}else s=null!=e.hydrationData;else s=!0;else if(s=!1,A=[],_.v7_partialHydration){let t=lt(null,h,e.history.location.pathname);t.active&&t.matches&&(A=t.matches)}let M,C,k={historyAction:e.history.action,location:e.history.location,matches:A,initialized:s,navigation:re,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||L,fetchers:new Map,blockers:new Map},I=u.Pop,N=!1,F=!1,B=new Map,O=null,$=!1,z=!1,j=[],Y=new Set,W=new Map,q=0,H=-1,X=new Map,K=new Set,Z=new Map,G=new Map,Q=new Set,ee=new Map,te=new Map;function ue(e,t){void 0===t&&(t={}),k=d({},k,e);let i=[],r=[];_.v7_fetcherPersist&&k.fetchers.forEach(((e,t)=>{"idle"===e.state&&(Q.has(t)?r.push(t):i.push(t))})),[...w].forEach((e=>e(k,{deletedFetchers:r,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync}))),_.v7_fetcherPersist&&(i.forEach((e=>k.fetchers.delete(e))),r.forEach((e=>Je(e))))}function de(t,i,r){var n,s;let o,{flushSync:l}=void 0===r?{}:r,c=null!=k.actionData&&null!=k.navigation.formMethod&&Ue(k.navigation.formMethod)&&"loading"===k.navigation.state&&!0!==(null==(n=t.state)?void 0:n._isRedirect);o=i.actionData?Object.keys(i.actionData).length>0?i.actionData:null:c?k.actionData:null;let p=i.loaderData?Se(k.loaderData,i.loaderData,i.matches||[],i.errors):k.loaderData,f=k.blockers;f.size>0&&(f=new Map(f),f.forEach(((e,t)=>f.set(t,ae))));let g,m=!0===N||null!=k.navigation.formMethod&&Ue(k.navigation.formMethod)&&!0!==(null==(s=t.state)?void 0:s._isRedirect);if(a&&(h=a,a=void 0),$||I===u.Pop||(I===u.Push?e.history.push(t,t.state):I===u.Replace&&e.history.replace(t,t.state)),I===u.Pop){let e=B.get(k.location.pathname);e&&e.has(t.pathname)?g={currentLocation:k.location,nextLocation:t}:B.has(t.pathname)&&(g={currentLocation:t,nextLocation:k.location})}else if(F){let e=B.get(k.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),B.set(k.location.pathname,e)),g={currentLocation:k.location,nextLocation:t}}ue(d({},i,{actionData:o,loaderData:p,historyAction:I,location:t,initialized:!0,navigation:re,revalidation:"idle",restoreScrollPosition:ot(t,i.matches||k.matches),preventScrollReset:m,blockers:f}),{viewTransitionOpts:g,flushSync:!0===l}),I=u.Pop,N=!1,F=!1,$=!1,z=!1,j=[]}async function ge(t,i,r){M&&M.abort(),M=null,I=t,$=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(R&&D){let i=st(e,t);R[i]=D()}}(k.location,k.matches),N=!0===(r&&r.preventScrollReset),F=!0===(r&&r.enableViewTransition);let n=a||h,s=r&&r.overrideNavigation,o=x(n,i,c),l=!0===(r&&r.flushSync),p=lt(o,n,i.pathname);if(p.active&&p.matches&&(o=p.matches),!o){let{error:e,notFoundMatches:t,route:r}=nt(i.pathname);return void de(i,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:l})}if(k.initialized&&!z&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(k.location,i)&&!(r&&r.submission&&Ue(r.submission.formMethod)))return void de(i,{matches:o},{flushSync:l});M=new AbortController;let f,g=Ee(e.history,i,M.signal,r&&r.submission);if(r&&r.pendingError)f=[Te(o).route.id,{type:b.error,error:r.pendingError}];else if(r&&r.submission&&Ue(r.submission.formMethod)){let t=await async function(e,t,i,r,n,a){void 0===a&&(a={});Ce();let s,o=function(e,t){let i={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return i}(t,i);if(ue({navigation:o},{flushSync:!0===a.flushSync}),n){let i=await ut(r,t.pathname,e.signal);if("aborted"===i.type)return{shortCircuited:!0};if("error"===i.type){let e=Te(i.partialMatches).route.id;return{matches:i.partialMatches,pendingActionResult:[e,{type:b.error,error:i.error}]}}if(!i.matches){let{notFoundMatches:e,error:i,route:r}=nt(t.pathname);return{matches:e,pendingActionResult:[r.id,{type:b.error,error:i}]}}r=i.matches}let l=We(r,t);if(l.route.action||l.route.lazy){if(s=(await Pe("action",k,e,[l],r,null))[l.route.id],e.signal.aborted)return{shortCircuited:!0}}else s={type:b.error,error:Le(405,{method:e.method,pathname:t.pathname,routeId:l.route.id})};if(Fe(s)){let t;if(a&&null!=a.replace)t=a.replace;else{t=Re(s.response.headers.get("Location"),new URL(e.url),c)===k.location.pathname+k.location.search}return await ve(e,s,!0,{submission:i,replace:t}),{shortCircuited:!0}}if(Ie(s))throw Le(400,{type:"defer-action"});if(Ne(s)){let e=Te(r,l.route.id);return!0!==(a&&a.replace)&&(I=u.Push),{matches:r,pendingActionResult:[e.route.id,s]}}return{matches:r,pendingActionResult:[l.route.id,s]}}(g,i,r.submission,o,p.active,{replace:r.replace,flushSync:l});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,r]=t.pendingActionResult;if(Ne(r)&&J(r.error)&&404===r.error.status)return M=null,void de(i,{matches:t.matches,loaderData:{},errors:{[e]:r.error}})}o=t.matches||o,f=t.pendingActionResult,s=He(i,r.submission),l=!1,p.active=!1,g=Ee(e.history,g.url,g.signal)}let{shortCircuited:m,matches:v,loaderData:y,errors:w}=await async function(t,i,r,n,s,o,l,u,p,f,g){let m=s||He(i,o),v=o||l||qe(m),y=!($||_.v7_partialHydration&&p);if(n){if(y){let e=me(g);ue(d({navigation:m},void 0!==e?{actionData:e}:{}),{flushSync:f})}let e=await ut(r,i.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=Te(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:r}=nt(i.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}r=e.matches}let w=a||h,[b,R]=pe(e.history,k,r,v,i,_.v7_partialHydration&&!0===p,_.v7_skipActionErrorRevalidation,z,j,Y,Q,Z,K,w,c,g);if(at((e=>!(r&&r.some((t=>t.route.id===e)))||b&&b.some((t=>t.route.id===e)))),H=++q,0===b.length&&0===R.length){let e=Qe();return de(i,d({matches:r,loaderData:{},errors:g&&Ne(g[1])?{[g[0]]:g[1].error}:null},De(g),e?{fetchers:new Map(k.fetchers)}:{}),{flushSync:f}),{shortCircuited:!0}}if(y){let e={};if(!n){e.navigation=m;let t=me(g);void 0!==t&&(e.actionData=t)}R.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=k.fetchers.get(e.key),i=Xe(void 0,t?t.data:void 0);k.fetchers.set(e.key,i)})),new Map(k.fetchers)}(R)),ue(e,{flushSync:f})}R.forEach((e=>{Ze(e.key),e.controller&&W.set(e.key,e.controller)}));let E=()=>R.forEach((e=>Ze(e.key)));M&&M.signal.addEventListener("abort",E);let{loaderResults:P,fetcherResults:x}=await xe(k,r,b,R,t);if(t.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",E);R.forEach((e=>W.delete(e.key)));let V=Me(P);if(V)return await ve(t,V.result,!0,{replace:u}),{shortCircuited:!0};if(V=Me(x),V)return K.add(V.key),await ve(t,V.result,!0,{replace:u}),{shortCircuited:!0};let{loaderData:S,errors:D}=Ve(k,r,P,g,R,x,ee);ee.forEach(((e,t)=>{e.subscribe((i=>{(i||e.done)&&ee.delete(t)}))})),_.v7_partialHydration&&p&&k.errors&&(D=d({},k.errors,D));let T=Qe(),A=et(H),L=T||A||R.length>0;return d({matches:r,loaderData:S,errors:D},L?{fetchers:new Map(k.fetchers)}:{})}(g,i,o,p.active,s,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,l,f);m||(M=null,de(i,d({matches:v||o},De(f),{loaderData:y,errors:w})))}function me(e){return e&&!Ne(e[1])?{[e[0]]:e[1].data}:k.actionData?0===Object.keys(k.actionData).length?null:k.actionData:void 0}async function ve(r,n,a,s){let{submission:o,fetcherSubmission:l,preventScrollReset:h,replace:p}=void 0===s?{}:s;n.response.headers.has("X-Remix-Revalidate")&&(z=!0);let f=n.response.headers.get("Location");g(f,"Expected a Location header on the redirect Response"),f=Re(f,new URL(r.url),c);let m=v(k.location,f,{_isRedirect:!0});if(i){let i=!1;if(n.response.headers.has("X-Remix-Reload-Document"))i=!0;else if(se.test(f)){const r=e.history.createURL(f);i=r.origin!==t.location.origin||null==U(r.pathname,c)}if(i)return void(p?t.location.replace(f):t.location.assign(f))}M=null;let _=!0===p||n.response.headers.has("X-Remix-Replace")?u.Replace:u.Push,{formMethod:y,formAction:w,formEncType:b}=k.navigation;!o&&!l&&y&&w&&b&&(o=qe(k.navigation));let R=o||l;if(ie.has(n.response.status)&&R&&Ue(R.formMethod))await ge(_,m,{submission:d({},R,{formAction:f}),preventScrollReset:h||N,enableViewTransition:a?F:void 0});else{let e=He(m,o);await ge(_,m,{overrideNavigation:e,fetcherSubmission:l,preventScrollReset:h||N,enableViewTransition:a?F:void 0})}}async function Pe(e,t,i,r,a,s){let o,u={};try{o=await async function(e,t,i,r,n,a,s,o,l,u){let h=a.map((e=>e.route.lazy?async function(e,t,i){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let n=i[e.id];g(n,"No route found in manifest");let a={};for(let s in r){let e=void 0!==n[s]&&"hasErrorBoundary"!==s;m(!e,'Route "'+n.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),e||E.has(s)||(a[s]=r[s])}Object.assign(n,a),Object.assign(n,d({},t(n),{lazy:void 0}))}(e.route,l,o):void 0)),c=a.map(((e,i)=>{let a=h[i],s=n.some((t=>t.route.id===e.route.id)),o=async i=>(i&&"GET"===r.method&&(e.route.lazy||e.route.loader)&&(s=!0),s?async function(e,t,i,r,n,a){let s,o,l=r=>{let s,l=new Promise(((e,t)=>s=t));o=()=>s(),t.signal.addEventListener("abort",o);let u=n=>"function"!=typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+i.route.id+"]")):r({request:t,params:i.params,context:a},...void 0!==n?[n]:[]),h=(async()=>{try{return{type:"data",result:await(n?n((e=>u(e))):u())}}catch(e){return{type:"error",result:e}}})();return Promise.race([h,l])};try{let n=i.route[e];if(r)if(n){let e,[t]=await Promise.all([l(n).catch((t=>{e=t})),r]);if(void 0!==e)throw e;s=t}else{if(await r,n=i.route[e],!n){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw Le(405,{method:t.method,pathname:r,routeId:i.route.id})}return{type:b.data,result:void 0}}s=await l(n)}else{if(!n){let e=new URL(t.url);throw Le(404,{pathname:e.pathname+e.search})}s=await l(n)}g(void 0!==s.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+i.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(u){return{type:b.error,result:u}}finally{o&&t.signal.removeEventListener("abort",o)}return s}(t,r,e,a,i,u):Promise.resolve({type:b.data,result:void 0}));return d({},e,{shouldLoad:s,resolve:o})})),p=await e({matches:c,request:r,params:a[0].params,fetcherKey:s,context:u});try{await Promise.all(h)}catch(f){}return p}(p,e,0,i,r,a,s,l,n)}catch(h){return r.forEach((e=>{u[e.route.id]={type:b.error,error:h}})),u}for(let[n,l]of Object.entries(o))if(ke(l)){let e=l.result;u[n]={type:b.redirect,response:be(e,i,n,a,c,_.v7_relativeSplatPath)}}else u[n]=await we(l);return u}async function xe(t,i,r,n,a){let s=t.matches,o=Pe("loader",0,a,r,i,null),l=Promise.all(n.map((async t=>{if(t.matches&&t.match&&t.controller){let i=(await Pe("loader",0,Ee(e.history,t.path,t.controller.signal),[t.match],t.matches,t.key))[t.match.route.id];return{[t.key]:i}}return Promise.resolve({[t.key]:{type:b.error,error:Le(404,{pathname:t.path})}})}))),u=await o,h=(await l).reduce(((e,t)=>Object.assign(e,t)),{});return await Promise.all([$e(i,u,a.signal,s,t.loaderData),ze(i,h,n)]),{loaderResults:u,fetcherResults:h}}function Ce(){z=!0,j.push(...at()),Z.forEach(((e,t)=>{W.has(t)&&Y.add(t),Ze(t)}))}function Be(e,t,i){void 0===i&&(i={}),k.fetchers.set(e,t),ue({fetchers:new Map(k.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function Oe(e,t,i,r){void 0===r&&(r={});let n=Te(k.matches,t);Je(e),ue({errors:{[n.route.id]:i},fetchers:new Map(k.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Ye(e){return _.v7_fetcherPersist&&(G.set(e,(G.get(e)||0)+1),Q.has(e)&&Q.delete(e)),k.fetchers.get(e)||ne}function Je(e){let t=k.fetchers.get(e);!W.has(e)||t&&"loading"===t.state&&X.has(e)||Ze(e),Z.delete(e),X.delete(e),K.delete(e),Q.delete(e),Y.delete(e),k.fetchers.delete(e)}function Ze(e){let t=W.get(e);t&&(t.abort(),W.delete(e))}function Ge(e){for(let t of e){let e=Ke(Ye(t).data);k.fetchers.set(t,e)}}function Qe(){let e=[],t=!1;for(let i of K){let r=k.fetchers.get(i);g(r,"Expected fetcher: "+i),"loading"===r.state&&(K.delete(i),e.push(i),t=!0)}return Ge(e),t}function et(e){let t=[];for(let[i,r]of X)if(r<e){let e=k.fetchers.get(i);g(e,"Expected fetcher: "+i),"loading"===e.state&&(Ze(i),X.delete(i),t.push(i))}return Ge(t),t.length>0}function tt(e){k.blockers.delete(e),te.delete(e)}function it(e,t){let i=k.blockers.get(e)||ae;g("unblocked"===i.state&&"blocked"===t.state||"blocked"===i.state&&"blocked"===t.state||"blocked"===i.state&&"proceeding"===t.state||"blocked"===i.state&&"unblocked"===t.state||"proceeding"===i.state&&"unblocked"===t.state,"Invalid blocker state transition: "+i.state+" -> "+t.state);let r=new Map(k.blockers);r.set(e,t),ue({blockers:r})}function rt(e){let{currentLocation:t,nextLocation:i,historyAction:r}=e;if(0===te.size)return;te.size>1&&m(!1,"A router only supports one blocker at a time");let n=Array.from(te.entries()),[a,s]=n[n.length-1],o=k.blockers.get(a);return o&&"proceeding"===o.state?void 0:s({currentLocation:t,nextLocation:i,historyAction:r})?a:void 0}function nt(e){let t=Le(404,{pathname:e}),i=a||h,{matches:r,route:n}=Ae(i);return at(),{notFoundMatches:r,route:n,error:t}}function at(e){let t=[];return ee.forEach(((i,r)=>{e&&!e(r)||(i.cancel(),t.push(r),ee.delete(r))})),t}function st(e,t){if(S){return S(e,t.map((e=>function(e,t){let{route:i,pathname:r,params:n}=e;return{id:i.id,pathname:r,params:n,data:t[i.id],handle:i.handle}}(e,k.loaderData))))||e.key}return e.key}function ot(e,t){if(R){let i=st(e,t),r=R[i];if("number"==typeof r)return r}return null}function lt(e,t,i){if(f){if(!e){return{active:!0,matches:V(t,i,c,!0)||[]}}if(Object.keys(e[0].params).length>0){return{active:!0,matches:V(t,i,c,!0)}}}return{active:!1,matches:null}}async function ut(e,t,i){if(!f)return{type:"success",matches:e};let r=e;for(;;){let e=null==a,o=a||h,u=l;try{await f({path:t,matches:r,patch:(e,t)=>{i.aborted||_e(e,t,o,u,n)}})}catch(s){return{type:"error",error:s,partialMatches:r}}finally{e&&!i.aborted&&(h=[...h])}if(i.aborted)return{type:"aborted"};let d=x(o,t,c);if(d)return{type:"success",matches:d};let p=V(o,t,c,!0);if(!p||r.length===p.length&&r.every(((e,t)=>e.route.id===p[t].route.id)))return{type:"success",matches:null};r=p}}return o={get basename(){return c},get future(){return _},get state(){return k},get routes(){return h},get window(){return t},initialize:function(){if(y=e.history.listen((t=>{let{action:i,location:r,delta:n}=t;if(C)return C(),void(C=void 0);m(0===te.size||null!=n,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a=rt({currentLocation:k.location,nextLocation:r,historyAction:i});if(a&&null!=n){let t=new Promise((e=>{C=e}));return e.history.go(-1*n),void it(a,{state:"blocked",location:r,proceed(){it(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.then((()=>e.history.go(n)))},reset(){let e=new Map(k.blockers);e.set(a,ae),ue({blockers:e})}})}return ge(i,r)})),i){!function(e,t){try{let i=e.sessionStorage.getItem(le);if(i){let e=JSON.parse(i);for(let[i,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(i,new Set(r||[]))}}catch(i){}}(t,B);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,i]of t)r[e]=[...i];try{e.sessionStorage.setItem(le,JSON.stringify(r))}catch(i){m(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}
/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */(t,B);t.addEventListener("pagehide",e),O=()=>t.removeEventListener("pagehide",e)}return k.initialized||ge(u.Pop,k.location,{initialHydration:!0}),o},subscribe:function(e){return w.add(e),()=>w.delete(e)},enableScrollRestoration:function(e,t,i){if(R=e,D=t,S=i||null,!T&&k.navigation===re){T=!0;let e=ot(k.location,k.matches);null!=e&&ue({restoreScrollPosition:e})}return()=>{R=null,D=null,S=null}},navigate:async function t(i,r){if("number"==typeof i)return void e.history.go(i);let n=he(k.location,k.matches,c,_.v7_prependBasename,i,_.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:a,submission:s,error:o}=ce(_.v7_normalizeFormMethod,!1,n,r),l=k.location,h=v(k.location,a,r&&r.state);h=d({},h,e.history.encodeLocation(h));let p=r&&null!=r.replace?r.replace:void 0,f=u.Push;!0===p?f=u.Replace:!1===p||null!=s&&Ue(s.formMethod)&&s.formAction===k.location.pathname+k.location.search&&(f=u.Replace);let g=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,m=!0===(r&&r.flushSync),y=rt({currentLocation:l,nextLocation:h,historyAction:f});if(!y)return await ge(f,h,{submission:s,pendingError:o,preventScrollReset:g,replace:r&&r.replace,enableViewTransition:r&&r.viewTransition,flushSync:m});it(y,{state:"blocked",location:h,proceed(){it(y,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),t(i,r)},reset(){let e=new Map(k.blockers);e.set(y,ae),ue({blockers:e})}})},fetch:function(t,i,n,s){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ze(t);let o=!0===(s&&s.flushSync),l=a||h,u=he(k.location,k.matches,c,_.v7_prependBasename,n,_.v7_relativeSplatPath,i,null==s?void 0:s.relative),d=x(l,u,c),p=lt(d,l,u);if(p.active&&p.matches&&(d=p.matches),!d)return void Oe(t,i,Le(404,{pathname:u}),{flushSync:o});let{path:f,submission:m,error:v}=ce(_.v7_normalizeFormMethod,!0,u,s);if(v)return void Oe(t,i,v,{flushSync:o});let y=We(d,f),w=!0===(s&&s.preventScrollReset);m&&Ue(m.formMethod)?async function(t,i,r,n,s,o,l,u,d){function p(e){if(!e.route.action&&!e.route.lazy){let e=Le(405,{method:d.formMethod,pathname:r,routeId:i});return Oe(t,i,e,{flushSync:l}),!0}return!1}if(Ce(),Z.delete(t),!o&&p(n))return;let f=k.fetchers.get(t);Be(t,function(e,t){let i={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return i}(d,f),{flushSync:l});let m=new AbortController,v=Ee(e.history,r,m.signal,d);if(o){let e=await ut(s,r,v.signal);if("aborted"===e.type)return;if("error"===e.type)return void Oe(t,i,e.error,{flushSync:l});if(!e.matches)return void Oe(t,i,Le(404,{pathname:r}),{flushSync:l});if(p(n=We(s=e.matches,r)))return}W.set(t,m);let y=q,w=await Pe("action",k,v,[n],s,t),b=w[n.route.id];if(v.signal.aborted)return void(W.get(t)===m&&W.delete(t));if(_.v7_fetcherPersist&&Q.has(t)){if(Fe(b)||Ne(b))return void Be(t,Ke(void 0))}else{if(Fe(b))return W.delete(t),H>y?void Be(t,Ke(void 0)):(K.add(t),Be(t,Xe(d)),ve(v,b,!1,{fetcherSubmission:d,preventScrollReset:u}));if(Ne(b))return void Oe(t,i,b.error)}if(Ie(b))throw Le(400,{type:"defer-action"});let R=k.navigation.location||k.location,E=Ee(e.history,R,m.signal),P=a||h,V="idle"!==k.navigation.state?x(P,k.navigation.location,c):k.matches;g(V,"Didn't find any matches after fetcher action");let S=++q;X.set(t,S);let D=Xe(d,b.data);k.fetchers.set(t,D);let[T,A]=pe(e.history,k,V,d,R,!1,_.v7_skipActionErrorRevalidation,z,j,Y,Q,Z,K,P,c,[n.route.id,b]);A.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,i=k.fetchers.get(t),r=Xe(void 0,i?i.data:void 0);k.fetchers.set(t,r),Ze(t),e.controller&&W.set(t,e.controller)})),ue({fetchers:new Map(k.fetchers)});let L=()=>A.forEach((e=>Ze(e.key)));m.signal.addEventListener("abort",L);let{loaderResults:C,fetcherResults:N}=await xe(k,V,T,A,E);if(m.signal.aborted)return;m.signal.removeEventListener("abort",L),X.delete(t),W.delete(t),A.forEach((e=>W.delete(e.key)));let F=Me(C);if(F)return ve(E,F.result,!1,{preventScrollReset:u});if(F=Me(N),F)return K.add(F.key),ve(E,F.result,!1,{preventScrollReset:u});let{loaderData:B,errors:O}=Ve(k,V,C,void 0,A,N,ee);if(k.fetchers.has(t)){let e=Ke(b.data);k.fetchers.set(t,e)}et(S),"loading"===k.navigation.state&&S>H?(g(I,"Expected pending action"),M&&M.abort(),de(k.navigation.location,{matches:V,loaderData:B,errors:O,fetchers:new Map(k.fetchers)})):(ue({errors:O,loaderData:Se(k.loaderData,B,V,O),fetchers:new Map(k.fetchers)}),z=!1)}(t,i,f,y,d,p.active,o,w,m):(Z.set(t,{routeId:i,path:f}),async function(t,i,r,n,a,s,o,l,u){let h=k.fetchers.get(t);Be(t,Xe(u,h?h.data:void 0),{flushSync:o});let c=new AbortController,d=Ee(e.history,r,c.signal);if(s){let e=await ut(a,r,d.signal);if("aborted"===e.type)return;if("error"===e.type)return void Oe(t,i,e.error,{flushSync:o});if(!e.matches)return void Oe(t,i,Le(404,{pathname:r}),{flushSync:o});n=We(a=e.matches,r)}W.set(t,c);let p=q,f=await Pe("loader",k,d,[n],a,t),m=f[n.route.id];Ie(m)&&(m=await je(m,d.signal,!0)||m);W.get(t)===c&&W.delete(t);if(d.signal.aborted)return;if(Q.has(t))return void Be(t,Ke(void 0));if(Fe(m))return H>p?void Be(t,Ke(void 0)):(K.add(t),void(await ve(d,m,!1,{preventScrollReset:l})));if(Ne(m))return void Oe(t,i,m.error);g(!Ie(m),"Unhandled fetcher deferred data"),Be(t,Ke(m.data))}(t,i,f,y,d,p.active,o,w,m))},revalidate:function(){Ce(),ue({revalidation:"loading"}),"submitting"!==k.navigation.state&&("idle"!==k.navigation.state?ge(I||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:!0===F}):ge(k.historyAction,k.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Ye,deleteFetcher:function(e){if(_.v7_fetcherPersist){let t=(G.get(e)||0)-1;t<=0?(G.delete(e),Q.add(e)):G.set(e,t)}else Je(e);ue({fetchers:new Map(k.fetchers)})},dispose:function(){y&&y(),O&&O(),w.clear(),M&&M.abort(),k.fetchers.forEach(((e,t)=>Je(t))),k.blockers.forEach(((e,t)=>tt(t)))},getBlocker:function(e,t){let i=k.blockers.get(e)||ae;return te.get(e)!==t&&te.set(e,t),i},deleteBlocker:tt,patchRoutes:function(e,t){let i=null==a;_e(e,t,a||h,l,n),i&&(h=[...h],ue({}))},_internalFetchControllers:W,_internalActiveDeferreds:ee,_internalSetRoutes:function(e){l={},a=P(e,n,void 0,l)}},o}function he(e,t,i,r,n,a,s,o){let l,u;if(s){l=[];for(let e of t)if(l.push(e),e.route.id===s){u=e;break}}else l=t,u=t[t.length-1];let h=Y(n||".",j(l,a),U(e.pathname,i)||e.pathname,"path"===o);if(null==n&&(h.search=e.search,h.hash=e.hash),(null==n||""===n||"."===n)&&u){let e=Ye(h.search);if(u.route.index&&!e)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&e){let e=new URLSearchParams(h.search),t=e.getAll("index");e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let i=e.toString();h.search=i?"?"+i:""}}return r&&"/"!==i&&(h.pathname="/"===h.pathname?i:W([i,h.pathname])),y(h)}function ce(e,t,i,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:i};if(r.formMethod&&(n=r.formMethod,!ee.has(n.toLowerCase())))return{path:i,error:Le(405,{method:r.formMethod})};var n;let a,s,o=()=>({path:i,error:Le(400,{type:"invalid-body"})}),l=r.formMethod||"get",u=e?l.toUpperCase():l.toLowerCase(),h=Ce(i);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Ue(u))return o();let e="string"==typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[i,r]=t;return""+e+i+"="+r+"\n"}),""):String(r.body);return{path:i,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Ue(u))return o();try{let e="string"==typeof r.body?JSON.parse(r.body):r.body;return{path:i,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(p){return o()}}}if(g("function"==typeof FormData,"FormData is not available in this environment"),r.formData)a=Pe(r.formData),s=r.formData;else if(r.body instanceof FormData)a=Pe(r.body),s=r.body;else if(r.body instanceof URLSearchParams)a=r.body,s=xe(a);else if(null==r.body)a=new URLSearchParams,s=new FormData;else try{a=new URLSearchParams(r.body),s=xe(a)}catch(p){return o()}let c={formMethod:u,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(Ue(c.formMethod))return{path:i,submission:c};let d=w(i);return t&&d.search&&Ye(d.search)&&a.append("index",""),d.search="?"+a,{path:y(d),submission:c}}function de(e,t,i){void 0===i&&(i=!1);let r=e.findIndex((e=>e.route.id===t));return r>=0?e.slice(0,i?r+1:r):e}function pe(e,t,i,r,n,a,s,o,l,u,h,c,p,f,g,m){let _=m?Ne(m[1])?m[1].error:m[1].data:void 0,v=e.createURL(t.location),y=e.createURL(n),w=i;a&&t.errors?w=de(i,Object.keys(t.errors)[0],!0):m&&Ne(m[1])&&(w=de(i,m[0]));let b=m?m[1].statusCode:void 0,R=s&&b&&b>=400,E=w.filter(((e,i)=>{let{route:n}=e;if(n.lazy)return!0;if(null==n.loader)return!1;if(a)return fe(n,t.loaderData,t.errors);if(function(e,t,i){let r=!t||i.route.id!==t.route.id,n=void 0===e[i.route.id];return r||n}(t.loaderData,t.matches[i],e)||l.some((t=>t===e.route.id)))return!0;let s=t.matches[i],u=e;return me(e,d({currentUrl:v,currentParams:s.params,nextUrl:y,nextParams:u.params},r,{actionResult:_,actionStatus:b,defaultShouldRevalidate:!R&&(o||v.pathname+v.search===y.pathname+y.search||v.search!==y.search||ge(s,u))}))})),P=[];return c.forEach(((e,n)=>{if(a||!i.some((t=>t.route.id===e.routeId))||h.has(n))return;let s=x(f,e.path,g);if(!s)return void P.push({key:n,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(n),c=We(s,e.path),m=!1;p.has(n)?m=!1:u.has(n)?(u.delete(n),m=!0):m=l&&"idle"!==l.state&&void 0===l.data?o:me(c,d({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:i[i.length-1].params},r,{actionResult:_,actionStatus:b,defaultShouldRevalidate:!R&&o})),m&&P.push({key:n,routeId:e.routeId,path:e.path,matches:s,match:c,controller:new AbortController})})),[E,P]}function fe(e,t,i){if(e.lazy)return!0;if(!e.loader)return!1;let r=null!=t&&void 0!==t[e.id],n=null!=i&&void 0!==i[e.id];return!(!r&&n)&&("function"==typeof e.loader&&!0===e.loader.hydrate||!r&&!n)}function ge(e,t){let i=e.route.path;return e.pathname!==t.pathname||null!=i&&i.endsWith("*")&&e.params["*"]!==t.params["*"]}function me(e,t){if(e.route.shouldRevalidate){let i=e.route.shouldRevalidate(t);if("boolean"==typeof i)return i}return t.defaultShouldRevalidate}function _e(e,t,i,r,n){var a;let s;if(e){let t=r[e];g(t,"No route found to patch children into: routeId = "+e),t.children||(t.children=[]),s=t.children}else s=i;let o=P(t.filter((e=>!s.some((t=>ve(e,t))))),n,[e||"_","patch",String((null==(a=s)?void 0:a.length)||"0")],r);s.push(...o)}function ve(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every(((e,i)=>{var r;return null==(r=t.children)?void 0:r.some((t=>ve(e,t)))})))}async function ye(e){let{matches:t}=e,i=t.filter((e=>e.shouldLoad));return(await Promise.all(i.map((e=>e.resolve())))).reduce(((e,t,r)=>Object.assign(e,{[i[r].route.id]:t})),{})}async function we(e){let{result:t,type:i}=e;if(Oe(t)){let e;try{let i=t.headers.get("Content-Type");e=i&&/\bapplication\/json\b/.test(i)?null==t.body?null:await t.json():await t.text()}catch(u){return{type:b.error,error:u}}return i===b.error?{type:b.error,error:new K(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:b.data,data:e,statusCode:t.status,headers:t.headers}}if(i===b.error){if(Be(t)){var r,n;if(t.data instanceof Error)return{type:b.error,error:t.data,statusCode:null==(n=t.init)?void 0:n.status};t=new K((null==(r=t.init)?void 0:r.status)||500,void 0,t.data)}return{type:b.error,error:t,statusCode:J(t)?t.status:void 0}}var a,s,o,l;return function(e){let t=e;return t&&"object"==typeof t&&"object"==typeof t.data&&"function"==typeof t.subscribe&&"function"==typeof t.cancel&&"function"==typeof t.resolveData}(t)?{type:b.deferred,deferredData:t,statusCode:null==(a=t.init)?void 0:a.status,headers:(null==(s=t.init)?void 0:s.headers)&&new Headers(t.init.headers)}:Be(t)?{type:b.data,data:t.data,statusCode:null==(o=t.init)?void 0:o.status,headers:null!=(l=t.init)&&l.headers?new Headers(t.init.headers):void 0}:{type:b.data,data:t}}function be(e,t,i,r,n,a){let s=e.headers.get("Location");if(g(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!se.test(s)){let o=r.slice(0,r.findIndex((e=>e.route.id===i))+1);s=he(new URL(t.url),o,n,!0,s,a),e.headers.set("Location",s)}return e}function Re(e,t,i){if(se.test(e)){let r=e,n=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=null!=U(n.pathname,i);if(n.origin===t.origin&&a)return n.pathname+n.search+n.hash}return e}function Ee(e,t,i,r){let n=e.createURL(Ce(t)).toString(),a={signal:i};if(r&&Ue(r.formMethod)){let{formMethod:e,formEncType:t}=r;a.method=e.toUpperCase(),"application/json"===t?(a.headers=new Headers({"Content-Type":t}),a.body=JSON.stringify(r.json)):"text/plain"===t?a.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?a.body=Pe(r.formData):a.body=r.formData}return new Request(n,a)}function Pe(e){let t=new URLSearchParams;for(let[i,r]of e.entries())t.append(i,"string"==typeof r?r:r.name);return t}function xe(e){let t=new FormData;for(let[i,r]of e.entries())t.append(i,r);return t}function Ve(e,t,i,r,n,a,s){let{loaderData:o,errors:l}=function(e,t,i,r){let n,a={},s=null,o=!1,l={},u=i&&Ne(i[1])?i[1].error:void 0;return e.forEach((i=>{if(!(i.route.id in t))return;let h=i.route.id,c=t[h];if(g(!Fe(c),"Cannot handle redirect results in processLoaderData"),Ne(c)){let t=c.error;void 0!==u&&(t=u,u=void 0),s=s||{};{let i=Te(e,h);null==s[i.route.id]&&(s[i.route.id]=t)}a[h]=void 0,o||(o=!0,n=J(c.error)?c.error.status:500),c.headers&&(l[h]=c.headers)}else Ie(c)?(r.set(h,c.deferredData),a[h]=c.deferredData.data,null==c.statusCode||200===c.statusCode||o||(n=c.statusCode),c.headers&&(l[h]=c.headers)):(a[h]=c.data,c.statusCode&&200!==c.statusCode&&!o&&(n=c.statusCode),c.headers&&(l[h]=c.headers))})),void 0!==u&&i&&(s={[i[0]]:u},a[i[0]]=void 0),{loaderData:a,errors:s,statusCode:n||200,loaderHeaders:l}}(t,i,r,s);return n.forEach((t=>{let{key:i,match:r,controller:n}=t,s=a[i];if(g(s,"Did not find corresponding fetcher result"),!n||!n.signal.aborted)if(Ne(s)){let t=Te(e.matches,null==r?void 0:r.route.id);l&&l[t.route.id]||(l=d({},l,{[t.route.id]:s.error})),e.fetchers.delete(i)}else if(Fe(s))g(!1,"Unhandled fetcher revalidation redirect");else if(Ie(s))g(!1,"Unhandled fetcher deferred data");else{let t=Ke(s.data);e.fetchers.set(i,t)}})),{loaderData:o,errors:l}}function Se(e,t,i,r){let n=d({},t);for(let a of i){let i=a.route.id;if(t.hasOwnProperty(i)?void 0!==t[i]&&(n[i]=t[i]):void 0!==e[i]&&a.route.loader&&(n[i]=e[i]),r&&r.hasOwnProperty(i))break}return n}function De(e){return e?Ne(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Te(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function Ae(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Le(e,t){let{pathname:i,routeId:r,method:n,type:a,message:s}=void 0===t?{}:t,o="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(o="Bad Request",n&&i&&r?l="You made a "+n+' request to "'+i+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===a?l="defer() is not supported in actions":"invalid-body"===a&&(l="Unable to encode submission body")):403===e?(o="Forbidden",l='Route "'+r+'" does not match URL "'+i+'"'):404===e?(o="Not Found",l='No route matches URL "'+i+'"'):405===e&&(o="Method Not Allowed",n&&i&&r?l="You made a "+n.toUpperCase()+' request to "'+i+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':n&&(l='Invalid request method "'+n.toUpperCase()+'"')),new K(e||500,o,new Error(l),!0)}function Me(e){let t=Object.entries(e);for(let i=t.length-1;i>=0;i--){let[e,r]=t[i];if(Fe(r))return{key:e,result:r}}}function Ce(e){return y(d({},"string"==typeof e?w(e):e,{hash:""}))}function ke(e){return Oe(e.result)&&te.has(e.result.status)}function Ie(e){return e.type===b.deferred}function Ne(e){return e.type===b.error}function Fe(e){return(e&&e.type)===b.redirect}function Be(e){return"object"==typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function Oe(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"object"==typeof e.headers&&void 0!==e.body}function Ue(e){return G.has(e.toLowerCase())}async function $e(e,t,i,r,n){let a=Object.entries(t);for(let s=0;s<a.length;s++){let[o,l]=a[s],u=e.find((e=>(null==e?void 0:e.route.id)===o));if(!u)continue;let h=r.find((e=>e.route.id===u.route.id)),c=null!=h&&!ge(h,u)&&void 0!==(n&&n[u.route.id]);Ie(l)&&c&&await je(l,i,!1).then((e=>{e&&(t[o]=e)}))}}async function ze(e,t,i){for(let r=0;r<i.length;r++){let{key:n,routeId:a,controller:s}=i[r],o=t[n];e.find((e=>(null==e?void 0:e.route.id)===a))&&(Ie(o)&&(g(s,"Expected an AbortController for revalidating fetcher deferred result"),await je(o,s.signal,!0).then((e=>{e&&(t[n]=e)}))))}}async function je(e,t,i){if(void 0===i&&(i=!1),!(await e.deferredData.resolveData(t))){if(i)try{return{type:b.data,data:e.deferredData.unwrappedData}}catch(r){return{type:b.error,error:r}}return{type:b.data,data:e.deferredData.data}}}function Ye(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function We(e,t){let i="string"==typeof t?w(t).search:t.search;if(e[e.length-1].route.index&&Ye(i||""))return e[e.length-1];let r=z(e);return r[r.length-1]}function qe(e){let{formMethod:t,formAction:i,formEncType:r,text:n,formData:a,json:s}=e;if(t&&i&&r)return null!=n?{formMethod:t,formAction:i,formEncType:r,formData:void 0,json:void 0,text:n}:null!=a?{formMethod:t,formAction:i,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:i,formEncType:r,formData:void 0,json:s,text:void 0}:void 0}function He(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Xe(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ke(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Je.apply(this,arguments)}const Ze=React.createContext(null),Ge=React.createContext(null),Qe=React.createContext(null),et=React.createContext(null),tt=React.createContext({outlet:null,matches:[],isDataRoute:!1}),it=React.createContext(null);function rt(){return null!=React.useContext(et)}function nt(){return rt()||g(!1),React.useContext(et).location}function at(e){React.useContext(Qe).static||React.useLayoutEffect(e)}function st(){let{isDataRoute:e}=React.useContext(tt);return e?function(){let{router:e}=function(){let e=React.useContext(Ze);return e||g(!1),e}(ft.UseNavigateStable),t=mt(gt.UseNavigateStable),i=React.useRef(!1);return at((()=>{i.current=!0})),React.useCallback((function(r,n){void 0===n&&(n={}),i.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Je({fromRouteId:t},n)))}),[e,t])}():function(){rt()||g(!1);let e=React.useContext(Ze),{basename:t,future:i,navigator:r}=React.useContext(Qe),{matches:n}=React.useContext(tt),{pathname:a}=nt(),s=JSON.stringify(j(n,i.v7_relativeSplatPath)),o=React.useRef(!1);return at((()=>{o.current=!0})),React.useCallback((function(i,n){if(void 0===n&&(n={}),!o.current)return;if("number"==typeof i)return void r.go(i);let l=Y(i,JSON.parse(s),a,"path"===n.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:W([t,l.pathname])),(n.replace?r.replace:r.push)(l,n.state,n)}),[t,r,s,a,e])}()}function ot(){let{matches:e}=React.useContext(tt),t=e[e.length-1];return t?t.params:{}}function lt(e,t){let{relative:i}=void 0===t?{}:t,{future:r}=React.useContext(Qe),{matches:n}=React.useContext(tt),{pathname:a}=nt(),s=JSON.stringify(j(n,r.v7_relativeSplatPath));return React.useMemo((()=>Y(e,JSON.parse(s),a,"path"===i)),[e,s,a,i])}function ut(e,t,i,r){rt()||g(!1);let{navigator:n}=React.useContext(Qe),{matches:a}=React.useContext(tt),s=a[a.length-1],o=s?s.params:{};!s||s.pathname;let l,u=s?s.pathnameBase:"/";s&&s.route,l=nt();let h=l.pathname||"/",c=h;if("/"!==u){let e=u.replace(/^\//,"").split("/");c="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let d=x(e,{pathname:c}),p=function(e,t,i,r){var n;void 0===t&&(t=[]);void 0===i&&(i=null);void 0===r&&(r=null);if(null==e){var a;if(!i)return null;if(i.errors)e=i.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!i.initialized&&i.matches.length>0))return null;e=i.matches}}let s=e,o=null==(n=i)?void 0:n.errors;if(null!=o){let e=s.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));e>=0||g(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let e=s[h];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=h),e.route.id){let{loaderData:t,errors:r}=i,n=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){l=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,r,n)=>{let a,h=!1,c=null,d=null;i&&(a=o&&r.route.id?o[r.route.id]:void 0,c=r.route.errorElement||ct,l&&(u<0&&0===n?(h=!0,d=null):u===n&&(h=!0,d=r.route.hydrateFallbackElement||null)));let p=t.concat(s.slice(0,n+1)),f=()=>{let t;return t=a?c:h?d:r.route.Component?React.createElement(r.route.Component,null):r.route.element?r.route.element:e,React.createElement(pt,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=i},children:t})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===n)?React.createElement(dt,{location:i.location,revalidation:i.revalidation,component:c,error:a,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}(d&&d.map((e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:W([u,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:W([u,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,r);return p}function ht(){let e=function(){var e;let t=React.useContext(it),i=function(){let e=React.useContext(Ge);return e||g(!1),e}(gt.UseRouteError),r=mt(gt.UseRouteError);if(void 0!==t)return t;return null==(e=i.errors)?void 0:e[r]}(),t=J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return React.createElement(React.Fragment,null,React.createElement("h2",null,"Unexpected Application Error!"),React.createElement("h3",{style:{fontStyle:"italic"}},t),i?React.createElement("pre",{style:r},i):null,null)}const ct=React.createElement(ht,null);class dt extends React.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?React.createElement(tt.Provider,{value:this.props.routeContext},React.createElement(it.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pt(e){let{routeContext:t,match:i,children:r}=e,n=React.useContext(Ze);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),React.createElement(tt.Provider,{value:t},r)}var ft=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ft||{}),gt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gt||{});function mt(e){let t=function(){let e=React.useContext(tt);return e||g(!1),e}(),i=t.matches[t.matches.length-1];return i.route.id||g(!1),i.route.id}function _t(e){let{to:t,replace:i,state:r,relative:n}=e;rt()||g(!1);let{future:a,static:s}=React.useContext(Qe),{matches:o}=React.useContext(tt),{pathname:l}=nt(),u=st(),h=Y(t,j(o,a.v7_relativeSplatPath),l,"path"===n),c=JSON.stringify(h);return React.useEffect((()=>u(JSON.parse(c),{replace:i,state:r,relative:n})),[u,c,n,i,r]),null}function vt(e){let{basename:t="/",children:i=null,location:r,navigationType:n=u.Pop,navigator:a,static:s=!1,future:o}=e;rt()&&g(!1);let l=t.replace(/^\/*/,"/"),h=React.useMemo((()=>({basename:l,navigator:a,static:s,future:Je({v7_relativeSplatPath:!1},o)})),[l,o,a,s]);"string"==typeof r&&(r=w(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:m="default"}=r,_=React.useMemo((()=>{let e=U(c,l);return null==e?null:{location:{pathname:e,search:d,hash:p,state:f,key:m},navigationType:n}}),[l,c,d,p,f,m,n]);return null==_?null:React.createElement(Qe.Provider,{value:h},React.createElement(et.Provider,{children:i,value:_}))}React.startTransition;new Promise((()=>{}));React.Component;function yt(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:React.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:React.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:React.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}
/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},wt.apply(this,arguments)}function bt(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,i)=>{let r=e[i];return t.concat(Array.isArray(r)?r.map((e=>[i,e])):[[i,r]])}),[]))}const Rt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(gn){}function Et(e,t){return ue({basename:void 0,future:wt({},void 0,{v7_prependBasename:!0}),history:f({window:void 0}),hydrationData:Pt(),routes:e,mapRouteProperties:yt,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Pt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=wt({},t,{errors:xt(t.errors)})),t}function xt(e){if(!e)return null;let t=Object.entries(e),i={};for(let[r,n]of t)if(n&&"RouteErrorResponse"===n.__type)i[r]=new K(n.status,n.statusText,n.data,!0===n.internal);else if(n&&"Error"===n.__type){if(n.__subType){let e=window[n.__subType];if("function"==typeof e)try{let t=new e(n.message);t.stack="",i[r]=t}catch(gn){}}if(null==i[r]){let e=new Error(n.message);e.stack="",i[r]=e}}else i[r]=n;return i}const Vt=React.createContext({isTransitioning:!1}),St=React.createContext(new Map),Dt=React.startTransition,Tt=ReactDOM.flushSync;function At(e){Tt?Tt(e):e()}React.useId;class Lt{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function Mt(e){let{fallbackElement:t,router:i,future:r}=e,[n,a]=React.useState(i.state),[s,o]=React.useState(),[l,u]=React.useState({isTransitioning:!1}),[h,c]=React.useState(),[d,p]=React.useState(),[f,g]=React.useState(),m=React.useRef(new Map),{v7_startTransition:_}=r||{},v=React.useCallback((e=>{_?function(e){Dt?Dt(e):e()}(e):e()}),[_]),y=React.useCallback(((e,t)=>{let{deletedFetchers:r,flushSync:n,viewTransitionOpts:s}=t;r.forEach((e=>m.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&m.current.set(t,e.data)}));let l=null==i.window||null==i.window.document||"function"!=typeof i.window.document.startViewTransition;if(s&&!l){if(n){At((()=>{d&&(h&&h.resolve(),d.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})}));let t=i.window.document.startViewTransition((()=>{At((()=>a(e)))}));return t.finished.finally((()=>{At((()=>{c(void 0),p(void 0),o(void 0),u({isTransitioning:!1})}))})),void At((()=>p(t)))}d?(h&&h.resolve(),d.skipTransition(),g({state:e,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(o(e),u({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else n?At((()=>a(e))):v((()=>a(e)))}),[i.window,d,h,m,v]);React.useLayoutEffect((()=>i.subscribe(y)),[i,y]),React.useEffect((()=>{l.isTransitioning&&!l.flushSync&&c(new Lt)}),[l]),React.useEffect((()=>{if(h&&s&&i.window){let e=s,t=h.promise,r=i.window.document.startViewTransition((async()=>{v((()=>a(e))),await t}));r.finished.finally((()=>{c(void 0),p(void 0),o(void 0),u({isTransitioning:!1})})),p(r)}}),[v,s,h,i.window]),React.useEffect((()=>{h&&s&&n.location.key===s.location.key&&h.resolve()}),[h,d,n.location,s]),React.useEffect((()=>{!l.isTransitioning&&f&&(o(f.state),u({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),g(void 0))}),[l.isTransitioning,f]),React.useEffect((()=>{}),[]);let w=React.useMemo((()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:e=>i.navigate(e),push:(e,t,r)=>i.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>i.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[i]),b=i.basename||"/",R=React.useMemo((()=>({router:i,navigator:w,static:!1,basename:b})),[i,w,b]),E=React.useMemo((()=>({v7_relativeSplatPath:i.future.v7_relativeSplatPath})),[i.future.v7_relativeSplatPath]);return React.createElement(React.Fragment,null,React.createElement(Ze.Provider,{value:R},React.createElement(Ge.Provider,{value:n},React.createElement(St.Provider,{value:m.current},React.createElement(Vt.Provider,{value:l},React.createElement(vt,{basename:b,location:n.location,navigationType:n.historyAction,navigator:w,future:E},n.initialized||i.future.v7_partialHydration?React.createElement(Ct,{routes:i.routes,future:i.future,state:n}):t))))),null)}const Ct=React.memo(kt);function kt(e){let{routes:t,future:i,state:r}=e;return ut(t,0,r,i)}const It="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Nt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=React.forwardRef((function(e,t){let i,{onClick:r,relative:n,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:h,viewTransition:c}=e,d=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,Rt),{basename:p}=React.useContext(Qe),f=!1;if("string"==typeof u&&Nt.test(u)&&(i=u,It))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),i=U(t.pathname,p);t.origin===e.origin&&null!=i?u=i+t.search+t.hash:f=!0}catch(gn){}let m=function(e,t){let{relative:i}=void 0===t?{}:t;rt()||g(!1);let{basename:r,navigator:n}=React.useContext(Qe),{hash:a,pathname:s,search:o}=lt(e,{relative:i}),l=s;return"/"!==r&&(l="/"===s?r:W([r,s])),n.createHref({pathname:l,search:o,hash:a})}(u,{relative:n}),_=function(e,t){let{target:i,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}=void 0===t?{}:t,l=st(),u=nt(),h=lt(e,{relative:s});return React.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,i)){t.preventDefault();let i=void 0!==r?r:y(u)===y(h);l(e,{replace:i,state:n,preventScrollReset:a,relative:s,viewTransition:o})}}),[u,l,h,r,n,i,e,a,s,o])}(u,{replace:s,state:o,target:l,preventScrollReset:h,relative:n,viewTransition:c});return React.createElement("a",wt({},d,{href:i||m,onClick:f||a?r:function(e){r&&r(e),e.defaultPrevented||_(e)},ref:t,target:l}))}));var Bt,Ot,Ut,$t;function zt(e){let t=React.useRef(bt(e)),i=React.useRef(!1),r=nt(),n=React.useMemo((()=>function(e,t){let i=bt(e);return t&&t.forEach(((e,r)=>{i.has(r)||t.getAll(r).forEach((e=>{i.append(r,e)}))})),i}(r.search,i.current?null:t.current)),[r.search]),a=st(),s=React.useCallback(((e,t)=>{const r=bt("function"==typeof e?e(n):e);i.current=!0,a("?"+r,t)}),[a,n]);return[n,s]}(Ot=Bt||(Bt={})).UseScrollRestoration="useScrollRestoration",Ot.UseSubmit="useSubmit",Ot.UseSubmitFetcher="useSubmitFetcher",Ot.UseFetcher="useFetcher",Ot.useViewTransitionState="useViewTransitionState",($t=Ut||(Ut={})).UseFetcher="useFetcher",$t.UseFetchers="useFetchers",$t.UseScrollRestoration="useScrollRestoration";const jt=(e=6,t="u_")=>{const i="abcdefhijkmnprstwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=i.charAt(Math.floor(30*Math.random()));return t+r};var Yt=Object.defineProperty,Wt=(e,t,i)=>(((e,t,i)=>{t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i);const qt=class e{constructor(t){Wt(this,"_date"),t instanceof e?this._date=new Date(t.toDate()):t instanceof Date?this._date=new Date(t):"string"==typeof t||"number"==typeof t?(this._date=new Date(t),"string"==typeof t&&isNaN(this._date.getTime())&&(this._date=new Date(t.replace(/-/g,"/")))):this._date=new Date}toDate(){return this._date}isValid(){return!isNaN(this._date.getTime())}diff(t,i="day"){const r=new e(t).toDate(),n=this._date.getTime()-r.getTime();switch(i){case"year":return this._date.getFullYear()-r.getFullYear();case"month":return 12*(this._date.getFullYear()-r.getFullYear())+(this._date.getMonth()-r.getMonth());default:return Math.floor(n/864e5)}}startOf(t){const i=new Date(this._date);switch(t){case"year":i.setMonth(0),i.setDate(1),i.setHours(0,0,0,0);break;case"month":i.setDate(1),i.setHours(0,0,0,0);break;case"day":i.setHours(0,0,0,0)}return new e(i)}endOf(t){const i=new Date(this._date);switch(t){case"year":i.setMonth(11),i.setDate(31),i.setHours(23,59,59,999);break;case"month":i.setDate(new Date(i.getFullYear(),i.getMonth()+1,0).getDate()),i.setHours(23,59,59,999);break;case"day":i.setHours(23,59,59,999)}return new e(i)}add(t,i){const r=new Date(this._date);switch(i){case"year":r.setFullYear(r.getFullYear()+t);break;case"month":r.setMonth(r.getMonth()+t);break;case"day":r.setDate(r.getDate()+t)}return new e(r)}subtract(e,t){return this.add(-e,t)}format(t){const i={YYYY:this._date.getFullYear(),MM:(this._date.getMonth()+1).toString().padStart(2,"0"),DD:this._date.getDate().toString().padStart(2,"0"),HH:this._date.getHours().toString().padStart(2,"0"),mm:this._date.getMinutes().toString().padStart(2,"0"),ss:this._date.getSeconds().toString().padStart(2,"0"),dddd:e.daysOfWeek[this._date.getDay()]};return t.replace(/YYYY|MM|DD|HH|mm|ss|dddd/g,(e=>i[e].toString()))}year(t){if(void 0===t)return this._date.getFullYear();const i=new Date(this._date);return i.setFullYear(t),new e(i)}month(t){if(void 0===t)return this._date.getMonth();const i=new Date(this._date);return i.setMonth(t),new e(i)}date(t){if(void 0===t)return this._date.getDate();const i=new Date(this._date);return i.setDate(t),new e(i)}day(t){if(void 0===t)return this._date.getDay();{const i=t-this._date.getDay(),r=new Date(this._date);return r.setDate(this._date.getDate()+i),new e(r)}}isBefore(t){const i=new e(t).toDate();return this._date.getTime()<i.getTime()}isAfter(t){const i=new e(t).toDate();return this._date.getTime()>i.getTime()}isSame(t,i="day"){const r=new e(t).toDate();switch(i){case"year":return this._date.getFullYear()===r.getFullYear();case"month":return this._date.getFullYear()===r.getFullYear()&&this._date.getMonth()===r.getMonth();default:return this._date.getFullYear()===r.getFullYear()&&this._date.getMonth()===r.getMonth()&&this._date.getDate()===r.getDate()}}isBetween(t,i,r){const n=new e(t).startOf(r).toDate(),a=new e(i).endOf(r).toDate(),s=this.toDate();return s>=n&&s<=a}};Wt(qt,"daysOfWeek",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);let Ht=qt;const Xt=e=>new Ht(e),Kt=e=>Xt(e).startOf("day"),Jt=(e,t)=>{e=Kt(e);const i=(t=Kt(t)).diff(e,"day");return Array.from({length:i+1},((t,i)=>e.add(i,"day")))};class Zt{constructor(){Wt(this,"dayDetails",{}),Wt(this,"holidays",{}),Wt(this,"workdays",{}),Wt(this,"inLieuDays",{})}y(e){return this.dayDetails.year=e,this}mark(e){return this.dayDetails.holiday=e,this}save(e,t,i){if(!this.dayDetails.year)throw new Error("should set year before saving holiday");if(!this.dayDetails.holiday)throw new Error("should set holiday before saving holiday");this.dayDetails.dayType=i;const r=Xt(`${this.dayDetails.year}-${e}-${t}`);return 2===i?this.holidays[r.format("YYYY-MM-DD")]=this.dayDetails.holiday:1===i?this.workdays[r.format("YYYY-MM-DD")]=this.dayDetails.holiday:3===i&&(this.inLieuDays[r.format("YYYY-MM-DD")]=this.dayDetails.holiday),this.dayDetails.month=e,this.dayDetails.day=t,this}to(e,t){if(!this.dayDetails.year||!this.dayDetails.month||!this.dayDetails.day)throw new Error("should set year/month/day before saving holiday range");const i=Xt(`${this.dayDetails.year}-${this.dayDetails.month}-${this.dayDetails.day}`),r=Xt(`${this.dayDetails.year}-${e}-${t}`);if(r.isBefore(i)||r.isSame(i))throw new Error("end date should be after start date");const n=r.diff(i,"day");for(let a=1;a<=n;a++){const e=i.add(a,"day");2===this.dayDetails.dayType?this.holidays[e.format("YYYY-MM-DD")]=this.dayDetails.holiday:1===this.dayDetails.dayType?this.workdays[e.format("YYYY-MM-DD")]=this.dayDetails.holiday:3===this.dayDetails.dayType&&(this.inLieuDays[e.format("YYYY-MM-DD")]=this.dayDetails.holiday)}return this}w(e,t){return this.save(e,t,1)}r(e,t){return this.save(e,t,2)}i(e,t){return this.save(e,t,3)}ny(){return this.mark("New Year's Day,,1")}s(){return this.mark("Spring Festival,,3")}t(){return this.mark("Tomb-sweeping Day,,1")}l(){return this.mark("Labour Day,,1")}d(){return this.mark("Dragon Boat Festival,,1")}n(){return this.mark("National Day,,3")}m(){return this.mark("Mid-autumn Festival,,1")}a(){return this.mark("Anti-Fascist 70th Day,70,1")}}const{holidays:Gt,workdays:Qt,inLieuDays:ei}=(()=>{const e=new Zt;return e.y(2024).ny().r(1,1).s().r(2,10).to(2,17).w(2,4).w(2,18).i(2,15).to(2,16).t().r(4,4).to(4,6).w(4,7).i(4,5).l().r(5,1).to(5,5).w(4,28).w(5,11).i(5,2).to(5,3).d().r(6,10).m().r(9,15).to(9,17).w(9,14).i(9,16).n().r(10,1).to(10,7).w(9,29).w(10,12).i(10,4).i(10,7),e.y(2023).ny().r(1,1).to(1,2).s().r(1,21).to(1,27).w(1,28).to(1,29).i(1,26).to(1,27).t().r(4,5).l().r(4,29).to(5,3).w(4,23).w(5,6).i(5,2).to(5,3).d().r(6,22).to(6,24).w(6,25).i(6,23).m().r(9,29).n().r(9,30).to(10,6).w(10,7).to(10,8).i(10,5).to(10,6),e.y(2022).ny().r(1,1).to(1,3).s().r(1,31).to(2,6).w(1,29).w(1,30).i(2,3).to(2,4).t().r(4,3).to(4,5).w(4,2).i(4,4).l().r(4,30).to(5,4).w(4,24).w(5,7).i(5,3).to(5,4).d().r(6,3).to(6,5).m().r(9,10).to(9,12).n().r(10,1).to(10,7).w(10,8).w(10,9).i(10,6).to(10,7).ny().r(12,31),e.y(2021).ny().r(1,1).to(1,3).s().r(2,11).to(2,17).w(2,7).w(2,20).i(2,16).to(2,17).t().r(4,3).to(4,5).l().r(5,1).to(5,5).w(4,25).w(5,8).i(5,4).to(5,5).d().r(6,12).to(6,14).m().r(9,19).to(9,21).w(9,18).i(9,20).n().r(10,1).to(10,7).w(9,26).w(10,9).i(10,6).to(10,7),e.y(2020).ny().r(1,1).s().r(1,24).to(2,2).w(1,19).i(1,29).t().r(4,4).to(4,6).l().r(5,1).to(5,5).w(4,26).w(5,9).i(5,4).to(5,5).d().r(6,25).to(6,27).w(6,28).i(6,26).n().r(10,1).to(10,8).w(9,27).w(10,10).i(10,7).to(10,8),e.y(2019).ny().r(1,1).s().r(2,4).to(2,10).w(2,2).to(2,3).i(2,4).i(2,8).t().r(4,5).to(4,7).l().r(5,1).to(5,4).w(4,28).w(5,5).i(5,2).i(5,3).d().r(6,7).to(6,9).m().r(9,13).to(9,15).n().r(10,1).to(10,7).w(9,29).w(10,12).i(10,4).i(10,7),e.y(2018).ny().r(1,1).s().r(2,15).to(2,21).w(2,11).w(2,24).i(2,19).to(2,21).t().r(4,5).to(4,7).w(4,8).i(4,6).l().r(4,29).to(5,1).w(4,28).i(4,30).d().r(6,18).n().r(10,1).to(10,7).w(9,29).to(9,30).i(10,4).to(10,5).m().r(9,24).ny().r(12,30).to(12,31).w(12,29).i(12,31),e.y(2017).ny().r(1,1).to(1,2).s().r(1,27).to(2,2).w(1,22).w(2,4).i(2,1).to(2,2).t().r(4,2).to(4,4).w(4,1).i(4,3).l().r(5,1).d().r(5,28).to(5,30).w(5,27).i(5,29).n().r(10,1).to(10,8).w(9,30).i(10,6).m().r(10,4),e.y(2016).ny().r(1,1).s().r(2,7).to(2,13).w(2,6).w(2,14).i(2,11).to(2,12).t().r(4,4).l().r(5,1).to(5,2).d().r(6,9).to(6,11).w(6,12).i(6,10).m().r(9,15).to(9,17).w(9,18).i(9,16).n().r(10,1).to(10,7).w(10,8).to(10,9).i(10,6).to(10,7),e.y(2015).ny().r(1,1).to(1,3).w(1,4).i(1,2).s().r(2,18).to(2,24).w(2,15).w(2,28).i(2,23).to(2,24).t().r(4,5).to(4,6).l().r(5,1).d().r(6,20).r(6,22).m().r(9,27).n().r(10,1).to(10,7).w(10,10).i(10,7).a().r(9,3).to(9,4).w(9,6).i(9,4),e.y(2014).ny().r(1,1).s().r(1,31).to(2,6).w(1,26).w(2,8).i(2,5).to(2,6).t().r(4,5).to(4,7).l().r(5,1).to(5,3).w(5,4).i(5,2).d().r(6,2).m().r(9,8).n().r(10,1).to(10,7).w(9,28).w(10,11).i(10,6).to(10,7),e.y(2013).ny().r(1,1).to(1,3).w(1,5).to(1,6).i(1,2).to(1,3).s().r(2,9).to(2,15).w(2,16).to(2,17).i(2,14).to(2,15).t().r(4,4).to(4,6).w(4,7).i(4,5).l().r(4,29).to(5,1).w(4,27).to(4,28).i(4,29).to(4,30).d().r(6,10).to(6,12).w(6,8).to(6,9).i(6,10).to(6,11).m().r(9,19).to(9,21).w(9,22).i(9,20).n().r(10,1).to(10,7).w(9,29).w(10,12).i(10,4).i(10,7),e.y(2012).ny().r(1,1).to(1,3).i(1,3).s().r(1,22).to(1,28).w(1,21).w(1,29).i(1,26).to(1,27).t().r(4,2).to(4,4).w(3,31).w(4,1).i(4,2).to(4,3).l().r(4,29).to(5,1).w(4,28).i(4,30).d().r(6,22).r(6,24).m().r(9,30).n().r(10,1).to(10,7).w(9,29).i(10,5),e.y(2011).ny().r(1,1).to(1,3).s().r(2,2).to(2,8).w(1,30).w(2,12).i(2,7).to(2,8).t().r(4,3).to(4,5).w(4,2).i(4,4).l().r(4,30).to(5,2).d().r(6,4).r(6,6).m().r(9,10).to(9,12).n().r(10,1).to(10,7).w(10,8).to(10,9).i(10,6).to(10,7).ny().w(12,31),e.y(2010).ny().r(1,1).to(1,3).s().r(2,13).to(2,19).w(2,20).to(2,21).i(2,18).to(2,19).t().r(4,3).to(4,5).l().r(5,1).to(5,3).d().r(6,14).to(6,16).w(6,12).to(6,13).i(6,14).to(6,15).m().r(9,22).to(9,24).w(9,19).w(9,25).i(9,23).to(9,24).n().r(10,1).to(10,7).w(9,26).w(10,9).i(10,6).to(10,7),e.y(2009).ny().r(1,1).to(1,3).w(1,4).i(1,2).s().r(1,25).to(1,31).w(1,24).w(2,1).i(1,29).to(1,30).t().r(4,4).to(4,6).l().r(5,1).to(5,3).d().r(5,28).to(5,30).w(5,31).i(5,29).n().r(10,1).to(10,8).w(9,27).w(10,10).i(10,7).to(10,8).m().r(10,3),e.y(2008).ny().r(1,1).s().r(2,6).to(2,12).w(2,2).to(2,3).i(2,11).to(2,12).t().r(4,4).to(4,6).l().r(5,1).to(5,3).w(5,4).i(5,2).d().r(6,7).to(6,9).m().r(9,13).to(9,15).n().r(9,29).to(10,5).w(9,27).to(9,28).i(9,29).to(9,30),e.y(2007).ny().r(1,1).to(1,3).i(1,2).to(1,3).s().r(2,18).to(2,24).w(2,17).w(2,25).i(2,22).to(2,23).l().r(5,1).to(5,7).w(4,28).to(4,29).i(5,4).i(5,7).n().r(10,1).to(10,7).w(9,29).to(9,30).i(10,4).to(10,5).ny().r(12,30).to(12,31).w(12,29).i(12,31),e.y(2006).ny().r(1,1).to(1,3).s().r(1,29).to(2,4).w(1,28).w(2,5).i(2,2).to(2,3).l().r(5,1).to(5,7).w(4,29).to(4,30).i(5,4).to(5,5).n().r(10,1).to(10,7).w(9,30).w(10,8).i(10,5).to(10,6).ny().w(12,30).to(12,31),e.y(2005).ny().r(1,1).to(1,3).s().r(2,9).to(2,15).w(2,5).to(2,6).i(2,14).to(2,15).l().r(5,1).to(5,7).w(4,30).w(5,8).i(5,5).to(5,6).n().r(10,1).to(10,7).w(10,8).to(10,9).i(10,6).to(10,7),e.y(2004).ny().r(1,1).s().r(1,22).to(1,28).w(1,17).to(1,18).i(1,27).to(1,28).l().r(5,1).to(5,7).w(5,8).to(5,9).i(5,6).to(5,7).n().r(10,1).to(10,7).w(10,9).to(10,10).i(10,6).to(10,7),{holidays:e.holidays,workdays:e.workdays,inLieuDays:e.inLieuDays}})(),ti=(...e)=>{if(1!==e.length)return e.map((e=>ti(e)));const t=Kt(e[0]);if(!t.isValid())throw new Error(`unsupported type ${typeof t}, expected type is Date or Dayjs`);return t},ii=e=>!ri(e),ri=e=>{const t=ti(e),i=t.day(),r=t.format("YYYY-MM-DD");return!!(Qt[r]||i>=1&&i<=5&&!Gt[r])},ni=(Symbol.toStringTag,{the_beginning_of_spring:[4.6295,3.87],rain_water:[19.4599,18.73],the_waking_of_insects:[6.3926,5.63],the_spring_equinox:[21.4155,20.646],pure_brightness:[5.59,4.81],grain_rain:[20.888,20.1],the_beginning_of_summer:[6.318,5.52],lesser_fullness_of_grain:[21.86,21.04],grain_in_beard:[6.5,5.678],the_summer_solstice:[22.2,21.37],lesser_heat:[7.928,7.108],greater_heat:[23.65,22.83],the_beginning_of_autumn:[28.35,7.5],the_end_of_heat:[23.95,23.13],white_dew:[8.44,7.646],the_autumn_equinox:[23.822,23.042],code_dew:[9.098,8.318],frost_descent:[24.218,23.438],the_beginning_of_winter:[8.218,7.438],lesser_snow:[23.08,22.36],greater_snow:[7.9,7.18],the_winter_solstice:[22.6,21.94],lesser_cold:[6.11,5.4055],greater_cold:[20.84,20.12]}),ai={1:["lesser_cold","greater_cold"],2:["the_beginning_of_spring","rain_water"],3:["the_waking_of_insects","the_spring_equinox"],4:["pure_brightness","grain_rain"],5:["the_beginning_of_summer","lesser_fullness_of_grain"],6:["grain_in_beard","the_summer_solstice"],7:["lesser_heat","greater_heat"],8:["the_beginning_of_autumn","the_end_of_heat"],9:["white_dew","the_autumn_equinox"],10:["code_dew","frost_descent"],11:["the_beginning_of_winter","lesser_snow"],12:["greater_snow","the_winter_solstice"]},si={"2026_rain_water":-1,"2084_the_spring_equinox":1,"1911_the_beginning_of_summer":1,"2008_lesser_fullness_of_grain":1,"1902_grain_in_beard":1,"1928_the_summer_solstice":1,"1925_lesser_heat":1,"2016_lesser_heat":1,"1922_greater_heat":1,"2002_the_beginning_of_autumn":1,"1927_white_dew":1,"1942_the_autumn_equinox":1,"2089_frost_descent":1,"2089_the_beginning_of_winter":1,"1978_lesser_snow":1,"1954_greater_snow":1,"1918_the_winter_solstice":-1,"2021_the_winter_solstice":-1,"1982_lesser_cold":1,"2019_lesser_cold":-1,"2000_greater_cold":1,"2082_greater_cold":1},oi={lesser_cold:"",greater_cold:"",the_beginning_of_spring:"",rain_water:"",the_waking_of_insects:"",the_spring_equinox:"",pure_brightness:"",grain_rain:"",the_beginning_of_summer:"",lesser_fullness_of_grain:"",grain_in_beard:"",the_summer_solstice:"",lesser_heat:"",greater_heat:"",the_beginning_of_autumn:"",the_end_of_heat:"",white_dew:"",the_autumn_equinox:"",code_dew:"",frost_descent:"",the_beginning_of_winter:"",lesser_snow:"",greater_snow:"",the_winter_solstice:""},li=(e,t,i)=>{const r=e%100,n=ni[i][21===(e>=2e3?21:20)?1:0];let a=Math.floor(r/4);["lesser_cold","greater_cold","the_beginning_of_spring","rain_water"].includes(i)&&(a=Math.floor((r-1)/4));let s=Math.floor(.2422*r+n)-a;const o=si[`${e}_${i}`];return o&&(s+=o),Xt(`${e}-${t}-${s}`).format("YYYY-MM-DD")},ui=(Symbol.toStringTag,[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560]),hi=["","","","","","","","","",""],ci=["","","","","","","","","","","",""],di=["","","","","","","","","",""],pi=["","","","","","","","","","","",""],fi=["","","","","","","","","","","",""],gi=e=>{let t=348;for(let i=32768;i>8;i>>=1)t+=ui[e-1900]&i?1:0;return t+_i(e)},mi=e=>15&ui[e-1900],_i=e=>mi(e)?65536&ui[e-1900]?30:29:0,vi=e=>di[e%10]+pi[e%12],yi=(e,t)=>ui[e-1900]&65536>>t?30:29,wi=e=>fi[(e-4)%12],bi=e=>{if(10===e)return"";if(20===e)return"";if(30===e)return"";const t=e%10;return["","","",""][Math.floor(e/10)]+(t?hi[t]:"")},Ri=e=>{const t=new Array(7).fill(0);let i=0,r=0;const n=Xt(new Date(1900,0,31)),a=Xt(e);let s=a.diff(n,"day");t[5]=s+40,t[4]=14;let o=1900;for(;o<2100&&s>0;o++)i=gi(o),s-=i,t[4]+=12;s<0&&(s+=i,o--,t[4]-=12),t[0]=o,t[3]=o-1864,r=mi(o),t[6]=0;for(let l=1;l<13&&s>0;l++)r>0&&l===r+1&&0===t[6]?(--l,t[6]=1,i=_i(o)):i=yi(o,l),1===t[6]&&l===r+1&&(t[6]=0),s-=i,0===t[6]&&t[4]++,t[1]=l;return 0===s&&r>0&&1===t[6]?t[6]=0:s<0&&(s+=i,t[1]--,t[4]--),t[2]=s+1,{date:a.format("YYYY-MM-DD"),lunarYear:t[0],lunarMon:t[1]+1,lunarDay:t[2],isLeap:!!t[6],zodiac:wi(t[0]),yearCyl:vi(t[3]),monCyl:vi(t[4]),dayCyl:vi(t[5]),lunarYearCN:`${t[0].toString().split("").map((e=>hi[Number(e)])).join("")}`,lunarMonCN:`${ci[t[1]]}`,lunarDayCN:bi(t[2])}},Ei=(e,t)=>{const i=Xt(e),r=Xt(t),n=[];for(let a=i;a.isBefore(r)||a.isSame(r,"day");a=a.add(1,"day"))n.push(Ri(a));return n},Pi=e=>{const t=Xt(e),i=t.year(),r=t.month()+1,n=t.date();let a=0;for(let c=1900;c<i;c++)a+=gi(c);let s=mi(i);for(let c=1;c<r;c++)a+=yi(i,c),c===s&&(a+=_i(i));a+=n-1;const o=Xt(new Date(1900,0,31)),l=o.add(a,"day").format("YYYY-MM-DD");let u,h=a;return s===r&&(h+=yi(i,r),u=o.add(h,"day").format("YYYY-MM-DD")),{date:l,leapMonthDate:u}},xi={getLunarDate:Ri,getLunarDatesInRange:Ei,getSolarDateFromLunar:Pi};Symbol.toStringTag;var Vi=Object.defineProperty,Si=(e,t,i)=>((e,t,i)=>t in e?Vi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);function Di(e,t){if(e.size!==t.size)return!1;for(let[i,r]of e)if(!t.has(i)||t.get(i)!==r)return!1;return!0}let Ti=0;var Ai=Object.defineProperty,Li=(e,t,i)=>((e,t,i)=>t in e?Ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);class Mi{constructor(e){Li(this,"x"),Li(this,"y"),Li(this,"target"),this.x=e.x,this.y=e.y,this.target=e.target}}class Ci extends Mi{}class ki extends Mi{}class Ii extends Mi{}class Ni extends Mi{}class Fi{constructor(e){Li(this,"pluginId"),Li(this,"pluginName"),Li(this,"viewName"),Li(this,"dataName"),Li(this,"dataValue"),this.event=e,this.pluginId=e.pluginId,this.pluginName=e.pluginName,this.viewName=e.viewName,this.dataName=e.dataName,this.dataValue=e.dataValue}}function Bi(e){return e.split("").map(((e,t)=>e.toUpperCase()===e?`${0!==t?"-":""}${e.toLowerCase()}`:e)).join("")}class Oi{constructor(e){Li(this,"node"),this.node=e.node}}class Ui{constructor(e){Li(this,"node"),this.node=e.node}}class $i{constructor(e){Li(this,"_eventBus"),Li(this,"_observer"),this._eventBus=e,this._observer=new MutationObserver(this._handler.bind(this)),this._observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})}_handler(e){e.forEach((e=>{e.addedNodes.forEach((e=>{if(!(e instanceof HTMLElement)||e.dataset.velViewId||e.parentElement&&typeof e.parentElement.dataset.velAdded<"u")return;let t=e;if(e.dataset.velView||(t=e.querySelector("[data-vel-view][data-vel-plugin]")),!t)return;this._eventBus.emitEvent(Oi,{node:t});const i=t.querySelectorAll("[data-vel-plugin]");i.length&&i.forEach((e=>{this._eventBus.emitEvent(Oi,{node:e})}))})),e.removedNodes.forEach((e=>{if(!(e instanceof HTMLElement)||typeof e.dataset.velProcessing<"u")return;const t=e.querySelectorAll("[data-vel-plugin]");t.length&&t.forEach((e=>{this._eventBus.emitEvent(Ui,{node:e})})),this._eventBus.emitEvent(Ui,{node:e})}));const t=e.attributeName;if("data-vel-view"===t&&this._eventBus.emitEvent(Oi,{node:e.target}),t&&/data-vel-data-.+/gi.test(t)){const i=e.target,r=i.dataset.velPluginId||"",n=i.dataset.velPlugin||"",a=i.dataset.velView||"",s=i.getAttribute(t);if(s&&s!==e.oldValue){const e=t.replace("data-vel-data-","").replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"").replace(/-+/g,"");this._eventBus.emitEvent(Fi,{pluginId:r,pluginName:n,viewName:a,dataName:e,dataValue:s})}}}))}}class zi{execute(e){this.call(e)}}class ji extends zi{constructor(e){super(),Li(this,"_handler"),this._handler=e}getHandler(){return this._handler}call(e){this._handler(e)}}class Yi{constructor(){Li(this,"_listeners",new Map),Li(this,"_keyedListeners",new Map)}subscribeToEvent(e,t,i){if(i)return void this._subscribeToKeyedEvent(e,t,i);let r=this._listeners.get(e);r||(r=[],this._listeners.set(e,r)),r.push(new ji(t))}removeEventListener(e,t,i){if(i)return void this._removeKeyedEventListener(e,t,i);let r=this._listeners.get(e);r&&(r=r.filter((e=>e.getHandler()!==t)),this._listeners.set(e,r))}_subscribeToKeyedEvent(e,t,i){let r=this._keyedListeners.get(e);r||(r=new Map,this._keyedListeners.set(e,r));let n=r.get(i);n||(n=[],r.set(i,n)),n.push(new ji(t))}_removeKeyedEventListener(e,t,i){let r=this._keyedListeners.get(e);if(!r)return;let n=r.get(i);n&&(n=n.filter((e=>e.getHandler()!==t)),r.set(i,n))}emitEvent(e,t,i){if(i)return void this._emitKeyedEvent(e,t,i);const r=this._listeners.get(e);r&&r.forEach((e=>{e.execute(t)}))}_emitKeyedEvent(e,t,i){const r=this._keyedListeners.get(e);if(!r)return;const n=r.get(i);n&&n.forEach((e=>{e.execute(t)}))}_convertListener(e){return t=>e(t)}subscribeToPluginReadyEvent(e,t,i=!1){i?this.subscribeToEvent(Jr,this._convertListener(e),t):this.subscribeToEvent(Kr,this._convertListener(e),t)}emitPluginReadyEvent(e,t,i=!1){i?this.emitEvent(Jr,t,e):this.emitEvent(Kr,t,e)}reset(){this._listeners.clear()}}let Wi=0;function qi(){return Wi+++""}class Hi{constructor(e,t,i,r,n,a,s){Li(this,"_registry"),Li(this,"_eventBus"),Li(this,"_appEventBus"),Li(this,"_internalEventBus"),Li(this,"_initialized",!1),Li(this,"_config"),Li(this,"_pluginFactory"),Li(this,"_pluginName"),Li(this,"_id"),Li(this,"_pluginKey"),Li(this,"_layoutIdViewMapWaitingToEnter"),Li(this,"_apiData"),Li(this,"_isReady",!1),this._id=qi(),this._pluginFactory=e,this._pluginName=t,this._registry=i,this._eventBus=r,this._appEventBus=n,this._internalEventBus=new Yi,this._config=a,this._layoutIdViewMapWaitingToEnter=new Map,this._pluginKey=s,this._apiData={},this._appEventBus.subscribeToPluginReadyEvent((()=>{this._isReady=!0}),this._pluginName,!0)}get api(){return this._apiData}_setApi(e){this._apiData=e}get pluginName(){return this._pluginName}get pluginFactory(){return this._pluginFactory}get pluginKey(){return this._pluginKey}get id(){return this._id}get config(){return{...this._config}}getViews(e){return e?this._registry.getViewsByNameForPlugin(this,e):this._registry.getViewsForPlugin(this)}getView(e){return e?this._registry.getViewsByNameForPlugin(this,e)[0]:this._registry.getViewsForPlugin(this)[0]}getViewById(e){return this._registry.getViewById(e)}addView(e){this._registry.assignViewToPlugin(e,this)}setInternalEventBus(e){this._internalEventBus=e}get internalBusEvent(){return this._internalEventBus}emit(e,t){this._internalEventBus.emitEvent(e,t,this.pluginKey)}on(e,t){this._internalEventBus.subscribeToEvent(e,t,this.pluginKey)}removeListener(e,t){this._internalEventBus.removeEventListener(e,t)}useEventPlugin(e,t={}){const i=this._registry.createPlugin(e,this._eventBus,t);return this._registry.associateEventPluginWithPlugin(this.id,i.id),i}notifyAboutDataChanged(e){this.onDataChanged(e)}onDataChanged(e){}removeView(e){e.onRemoveCallback?this._invokeRemoveCallback(e):this._deleteView(e),this.onViewRemoved(e)}_invokeRemoveCallback(e){const t=this._createTemporaryView(e);requestAnimationFrame((()=>{var i;null==(i=t.onRemoveCallback)||i.call(t,t,(()=>{var i,r;if(null!=(i=e.onAddCallbacks)&&i.afterRemoved&&e.layoutId){const t=this._layoutIdViewMapWaitingToEnter.get(e.layoutId);null==(r=null==t?void 0:t.onAddCallbacks)||r.afterEnter(t),this._layoutIdViewMapWaitingToEnter.delete(e.layoutId)}this._deleteView(t,!0)})),setTimeout((()=>{t.element.parentElement&&this._deleteView(t,!0)}),1e4)}))}_deleteView(e,t=!1){(t||!e.layoutId)&&(this._registry.removeViewById(e.id,this.id),e.element.remove())}_createTemporaryView(e){const t=e.previousRect.viewportOffset,i=e.previousRect.size,r=e.rotation.degrees<0?0:Math.sin(e.rotation.radians)*i.height*e.scale.y,n=e.rotation.degrees>0?0:Math.sin(e.rotation.radians)*i.width*e.scale.y,a=e.element.cloneNode(!0);e.element.remove(),a.style.cssText="",a.style.position="absolute",a.style.left=`${t.left+r}px`,a.style.top=t.top-n+"px",a.style.width=`${i.width}px`,a.style.height=`${i.height}px`,a.style.transform=`\n      scale3d(${e.scale.x}, ${e.scale.y}, 1) rotate(${e.rotation.degrees}deg)\n    `,a.style.pointerEvents="none",a.dataset.velRemoved="",document.body.appendChild(a);const s=this._registry.createView(a,e.name);return s.setAsTemporaryView(),s.styles.position="absolute",s.styles.left=`${t.left+r}px`,s.styles.top=t.top-n+"px",s.rotation.setDegrees(e.rotation.degrees,!1),s.scale.set({x:e.scale.x,y:e.scale.y},!1),s.size.set({width:e._localWidth,height:e._localHeight},!1),e._copyAnimatorsToAnotherView(s),e.onRemoveCallback&&s.onRemove(e.onRemoveCallback),s}onViewRemoved(e){}notifyAboutViewAdded(e){this.onViewAdded(e),this._invokeAddCallbacks(e)}_invokeAddCallbacks(e){var t,i,r;(null==(t=e.onAddCallbacks)||!t.onInitialLoad)&&!this._initialized||(null==(i=e.onAddCallbacks)||i.beforeEnter(e),null!=(r=e.onAddCallbacks)&&r.afterRemoved&&this._initialized?e.layoutId&&this._layoutIdViewMapWaitingToEnter.set(e.layoutId,e):requestAnimationFrame((()=>{var t;null==(t=e.onAddCallbacks)||t.afterEnter(e)})))}onViewAdded(e){}init(){!this._initialized&&this._isReady&&(this.setup(),this._initialized=!0)}setup(){}subscribeToEvents(e){}}class Xi extends Hi{isRenderable(){return!0}isInitialized(){return this._initialized}get initialized(){return this._initialized}update(e,t){}render(){}addView(e){e.setPluginId(this.id),super.addView(e)}}class Ki extends Hi{isRenderable(){return!1}}class Ji{constructor(e){Li(this,"_plugin"),this._plugin=e}get initialized(){return this._plugin.isInitialized()}get config(){return this._plugin.config}setup(e){this._plugin.setup=e}api(e){this._plugin._setApi(e)}update(e){this._plugin.update=e}render(e){this._plugin.render=e}getViews(e){return this._plugin.getViews(e)}getView(e){return this._plugin.getView(e)}getViewById(e){return this._plugin.getViewById(e)}useEventPlugin(e,t={}){return this._plugin.useEventPlugin(e,t)}emit(e,t){this._plugin.emit(e,t)}on(e,t){this._plugin.on(e,t)}onDataChanged(e){this._plugin.onDataChanged=e}onViewRemoved(e){this._plugin.onViewRemoved=e}onViewAdded(e){this._plugin.onViewAdded=e}subscribeToEvents(e){this._plugin.subscribeToEvents=e}}function Zi(e,t,i,r,n,a){if(function(e){var t;return 0===(null==(t=e.prototype)?void 0:t.constructor.toString().indexOf("class "))}(e))return new e(e,e.pluginName,t,i,r,n,a);const s=new Xi(e,e.pluginName,t,i,r,n,a);return e(new Ji(s)),s}class Gi{constructor(e,t){Li(this,"x"),Li(this,"y"),this.x=e,this.y=t}get magnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get unitVector(){const e=new Gi(0,0),t=this.magnitude;return 0!==t&&(e.x=this.x/t,e.y=this.y/t),e}add(e){this.x+=e.x,this.y+=e.y}sub(e){this.x-=e.x,this.y-=e.y}scale(e){this.x*=e,this.y*=e}dot(e){return this.x*e.x+this.y*e.y}equals(e){return this.x===e.x&&this.y===e.y}clone(){return new Gi(this.x,this.y)}static scale(e,t){return new Gi(e.x*t,e.y*t)}static sub(e,t){return new Gi(e.x-t.x,e.y-t.y)}static add(e,t){return new Gi(e.x+t.x,e.y+t.y)}}class Qi{constructor(e){Li(this,"_element"),Li(this,"_callback"),this._element=e,this._observe()}setElement(e){this._element=e,this._observe()}_observe(){var e;function t(e,t){let i,r=!0;return function(){r&&(e(),r=!1),clearTimeout(i),i=setTimeout((()=>{e(),r=!0}),t)}}new MutationObserver((()=>{var e;null==(e=this._callback)||e.call(this,!1)})).observe(this._element,{attributes:!0,childList:!0,attributeOldValue:!0}),new ResizeObserver((()=>{var e;null==(e=this._callback)||e.call(this,!0)})).observe(this._element),null==(e=this._element.parentElement)||e.addEventListener("scroll",t((()=>{var e;null==(e=this._callback)||e.call(this,!0)}),30)),window.addEventListener("scroll",t((()=>{var e;null==(e=this._callback)||e.call(this,!0)}),30)),window.addEventListener("resize",t((()=>{var e;null==(e=this._callback)||e.call(this,!0)}),30))}onChange(e){this._callback=e}}function er(e,t){const i=e-t;return Math.abs(i)<=.01}function tr(e){let t=e.match(/^([\d.]+)([a-zA-Z%]*)$/);t||(t="0px".match(/^([\d.]+)([a-zA-Z%]*)$/));return{value:parseFloat(t[1]),unit:t[2],valueWithUnit:e}}function ir(e,t){return function(e,t,i=!1){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(i&&!er(e[r].value,t[r].value)||e[r].value!==t[r].value)return!1;return!0}(e,t,!0)}class rr{constructor(e,t,i,r){Li(this,"_topLeft"),Li(this,"_topRight"),Li(this,"_bottomLeft"),Li(this,"_bottomRight"),this._topLeft=e,this._topRight=t,this._bottomLeft=i,this._bottomRight=r}get value(){return{topLeft:this._topLeft,topRight:this._topRight,bottomRight:this._bottomRight,bottomLeft:this._bottomLeft}}equals(e){return er(this.value.topLeft.value,e.value.topLeft.value)&&er(this.value.topRight.value,e.value.topRight.value)&&er(this.value.bottomRight.value,e.value.bottomRight.value)&&er(this.value.bottomLeft.value,e.value.bottomLeft.value)}toCssPercentageForNewSize(e){const t=this._convertToPercentage(this._topLeft,e),i=this._convertToPercentage(this._topRight,e),r=this._convertToPercentage(this._bottomLeft,e),n=this._convertToPercentage(this._bottomRight,e);return`${t.h} ${i.h} ${n.h} ${r.h} / ${t.v} ${i.v} ${n.v} ${r.v}`}_convertToPercentage(e,t){if("%"===e.unit)return{h:`${e.value}%`,v:`${e.value}%`};return{h:`${e.value/t.width*100}%`,v:`${e.value/t.height*100}%`}}}function nr(e){const t=e.split(" ").map((e=>tr(e))),i={value:0,unit:"",valueWithUnit:"0"};switch(t.length){case 1:return new rr(t[0],t[0],t[0],t[0]);case 2:return new rr(t[0],t[1],t[0],t[1]);case 3:return new rr(t[0],t[1],t[2],t[1]);case 4:return new rr(t[0],t[1],t[3],t[2]);default:return new rr(i,i,i,i)}}function ar(e,t){return er(e.topLeft.value,t.topLeft.value)&&er(e.topRight.value,t.topRight.value)&&er(e.bottomRight.value,t.bottomRight.value)&&er(e.bottomLeft.value,t.bottomLeft.value)}class sr{constructor(e){Li(this,"_value"),this._value=e}get value(){return this._value}equals(e){return er(this.value,e.value)}}class or{constructor(e,t){Li(this,"_x"),Li(this,"_y"),this._x=e,this._y=t}get value(){return new Gi(this._x,this._y)}}function lr(e,t){const i=function(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}(e),r=e.offsetWidth,n=e.offsetHeight;return{viewportOffset:{left:Math.round(i.left),top:Math.round(i.top),right:Math.round(i.right),bottom:Math.round(i.bottom)},pageOffset:t.read({width:r,height:n}),size:{width:r,height:n}}}function ur(e){let t=e,i=0,r=0;for(;t;)i+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return{top:i,left:r}}class hr{constructor(e){Li(this,"_currentPageRect"),Li(this,"_view"),Li(this,"_element"),Li(this,"_offsetLeft"),Li(this,"_offsetTop"),Li(this,"_width"),Li(this,"_height"),Li(this,"_parentWidth"),Li(this,"_parentHeight"),Li(this,"_parentEl"),Li(this,"_isSvg"),Li(this,"_invalid"),this._invalid=!0,this._view=e,this._element=e.element,this._isSvg=!!this._element.closest("svg"),this._offsetLeft=0,this._offsetTop=0,this._width=0,this._height=0,this._parentWidth=0,this._parentHeight=0,this._offsetLeft=0,this._parentEl=this._element.parentElement,window.addEventListener("resize",(()=>{this.invalidate()}))}invalidate(){this._invalid=!0}read(e){if(this._isSvg)return this._currentPageRect||(this._currentPageRect=ur(this._element)),this._currentPageRect;const t=this._element.parentElement,i=this._element.offsetLeft,r=this._element.offsetTop,n=e.width,a=e.height,s=(null==t?void 0:t.offsetWidth)||0,o=(null==t?void 0:t.offsetHeight)||0;return(this._offsetLeft!==i||this._offsetTop!==r||!er(this._width,n)||!er(this._height,a))&&this._view._children.forEach((e=>e.elementReader.invalidatePageRect())),!this._invalid&&this._currentPageRect&&this._offsetLeft===i&&this._offsetTop===r&&er(this._width,n)&&er(this._height,a)&&er(this._parentWidth,s)&&er(this._parentHeight,o)&&this._parentEl===t||(this._offsetLeft=i,this._offsetTop=r,this._width=n,this._height=a,this._parentWidth=s,this._parentHeight=o,this._parentEl=t,this._currentPageRect=ur(this._element),this._invalid=!1),this._currentPageRect}}class cr{constructor(e){Li(this,"_element"),Li(this,"_rect"),Li(this,"_computedStyle"),Li(this,"_pageRectReader"),Li(this,"_scroll"),this._element=e.element,this._pageRectReader=new hr(e),this._rect=lr(this._element,this._pageRectReader),this._computedStyle=getComputedStyle(this._element),this._scroll=this._calculateScroll()}invalidatePageRect(){this._pageRectReader.invalidate()}update(e=!1){this._rect=lr(this._element,this._pageRectReader),this._computedStyle=getComputedStyle(this._element),e&&(this._scroll=this._calculateScroll())}get rect(){return this._rect}get opacity(){return e=this._computedStyle.opacity,new sr(parseFloat(e));var e}get borderRadius(){return nr(this._computedStyle.borderRadius)}get origin(){return function(e,t){const[i,r]=e.split(" "),n=tr(i),a=tr(r);return new or(n.value/t.width,a.value/t.height)}(this._computedStyle.transformOrigin,this._rect.size)}_calculateScroll(){let e=this._element,t=0,i=0;for(;e;)t+=e.scrollTop,i+=e.scrollLeft,e=e.offsetParent;return i+=window.scrollX,t+=window.scrollY,{y:t,x:i}}get scroll(){return this._scroll}}function dr(e){return new cr(e)}function pr(e,t){return new Proxy(e,{set:(e,i,r)=>("object"==typeof e[i]&&null!==e[i]?e[i]=pr(r,t):(t(),e[i]=r),!0),get:(e,i)=>"object"==typeof e[i]&&null!==e[i]?pr(e[i],t):e[i]})}const fr=.01,gr={speed:15};class mr{constructor(e){Li(this,"name","dynamic"),Li(this,"_config"),this._config=e}get config(){return this._config}}class _r extends mr{update({animatorProp:e,current:t,target:i,dt:r}){const n=Gi.sub(i,t),a=Gi.scale(n,this._config.speed);let s=Gi.add(t,Gi.scale(a,r));return this._shouldFinish(i,t,a)&&(s=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),e.callUpdateCallback(),s}_shouldFinish(e,t,i){return Gi.sub(e,t).magnitude<fr&&i.magnitude<fr}}class vr extends mr{update({animatorProp:e,current:t,target:i,dt:r}){let n=t+(i-t)*this._config.speed*r;return er(n,i)&&(n=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),e.callUpdateCallback(),n}}class yr extends mr{update({animatorProp:e,current:t,target:i,dt:r}){return i.map(((i,n)=>{const a=t[n],s=0===i.value?a.unit:i.unit,o=(i.value-a.value)*this._config.speed;let l=tr(`${a.value+o*r}${s}`);return this._shouldFinish(i.value,a.value,o)&&(l=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),e.callUpdateCallback(),l}))}_shouldFinish(e,t,i){return Math.abs(e-t)<fr&&Math.abs(i)<fr}}class wr{constructor(){Li(this,"name","instant"),Li(this,"_config",{})}get config(){return this._config}update(e){return requestAnimationFrame((()=>{e.animatorProp.callCompleteCallback()})),e.target}}const br={stiffness:.5,damping:.75,speed:10},Rr=.01;class Er{constructor(e){Li(this,"name","spring"),Li(this,"_config"),this._config=e}get config(){return this._config}}class Pr extends Er{constructor(){super(...arguments),Li(this,"_velocity",new Gi(0,0))}update({animatorProp:e,current:t,target:i,dt:r}){const n=Gi.scale(Gi.scale(Gi.sub(t,i),-1),this._config.stiffness);this._velocity=Gi.add(this._velocity,n),this._velocity=Gi.scale(this._velocity,this._config.damping);let a=Gi.add(t,Gi.scale(this._velocity,r*this._config.speed));return this._shouldFinish(i,t)&&(a=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),a}_shouldFinish(e,t){return Gi.sub(e,t).magnitude<Rr&&this._velocity.magnitude<Rr}}class xr extends Er{constructor(){super(...arguments),Li(this,"_velocity",0)}update({animatorProp:e,current:t,target:i,dt:r}){const n=-(t-i)*this._config.stiffness;this._velocity+=n,this._velocity*=this._config.damping;let a=t+this._velocity*r*this._config.speed;return er(a,i)&&(a=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),a}}class Vr extends Er{constructor(){super(...arguments),Li(this,"_velocity",0)}update({animatorProp:e,current:t,target:i,dt:r}){return i.map(((i,n)=>{const a=t[n],s=0===i.value?a.unit:i.unit,o=-(a.value-i.value)*this._config.stiffness;this._velocity+=o,this._velocity*=this._config.damping;let l=tr(`${a.value+this._velocity*r*this._config.speed}${s}`);return this._shouldFinish(i.value,a.value)&&(l=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),l}))}_shouldFinish(e,t){return Math.abs(e-t)<Rr&&Math.abs(this._velocity)<Rr}}const Sr={duration:350,ease:function(e){return e}};class Dr{constructor(e){Li(this,"name","tween"),Li(this,"_config"),Li(this,"_startTime"),this._config=e}get config(){return this._config}reset(){this._startTime=void 0}}class Tr extends Dr{update({animatorProp:e,initial:t,target:i,ts:r}){this._startTime||(this._startTime=r);const n=Math.min(1,(r-this._startTime)/this._config.duration);return er(n,1)?(requestAnimationFrame((()=>{e.callCompleteCallback()})),i):Gi.add(t,Gi.scale(Gi.sub(i,t),this._config.ease(n)))}}class Ar extends Dr{update({animatorProp:e,initial:t,target:i,ts:r}){this._startTime||(this._startTime=r);const n=Math.min(1,(r-this._startTime)/this._config.duration);return er(n,1)?(requestAnimationFrame((()=>{e.callCompleteCallback()})),i):t.map(((e,t)=>{const r=i[t],a=0===r.value?e.unit:r.unit;return tr(`${e.value+this._config.ease(n)*(i[t].value-e.value)}${a}`)}))}}class Lr extends Dr{update({animatorProp:e,initial:t,target:i,ts:r}){this._startTime||(this._startTime=r);const n=Math.min(1,(r-this._startTime)/this._config.duration);return er(n,1)?(requestAnimationFrame((()=>{e.callCompleteCallback()})),i):t+(i-t)*this._config.ease(n)}}class Mr{createAnimatorByName(e,t){switch(e){case"instant":return this.createInstantAnimator();case"dynamic":return this.createDynamicAnimator(t);case"tween":return this.createTweenAnimator(t);case"spring":return this.createSpringAnimator(t)}return this.createInstantAnimator()}}class Cr extends Mr{createInstantAnimator(){return new wr}createTweenAnimator(e){return new Tr({...Sr,...e})}createDynamicAnimator(e){return new _r({...gr,...e})}createSpringAnimator(e){return new Pr({...br,...e})}}class kr extends Mr{createInstantAnimator(){return new wr}createTweenAnimator(e){return new Ar({...Sr,...e})}createDynamicAnimator(e){return new yr({...gr,...e})}createSpringAnimator(e){return new Vr({...br,...e})}}class Ir extends Mr{createInstantAnimator(){return new wr}createDynamicAnimator(e){return new vr({...gr,...e})}createTweenAnimator(e){return new Lr({...Sr,...e})}createSpringAnimator(e){return new xr({...br,...e})}}function Nr(e){return structuredClone(e)}class Fr{constructor(e){Li(this,"_viewProp"),Li(this,"_completeCallback"),Li(this,"_updateCallback"),Li(this,"_isAnimating"),this._viewProp=e,this._isAnimating=!1}set(e,t){this._viewProp.setAnimator(e,t)}get name(){return this._viewProp.getAnimator().name}onComplete(e){this._completeCallback=e}get isAnimating(){return this._isAnimating}markAsAnimating(){this._isAnimating=!0}callCompleteCallback(){var e;null==(e=this._completeCallback)||e.call(this),this._isAnimating=!1}onUpdate(e){this._updateCallback=e}callUpdateCallback(){var e;null==(e=this._updateCallback)||e.call(this)}}class Br{constructor(e,t,i){Li(this,"_animatorProp"),Li(this,"_animator"),Li(this,"_initialValue"),Li(this,"_previousValue"),Li(this,"_targetValue"),Li(this,"_currentValue"),Li(this,"_hasChanged"),Li(this,"_view"),Li(this,"_animatorFactory"),Li(this,"_previousRenderValue"),this._animatorProp=new Fr(this),this._animatorFactory=e,this._initialValue=Nr(t),this._previousValue=Nr(t),this._targetValue=Nr(t),this._currentValue=Nr(t),this._hasChanged=!1,this._previousRenderValue=void 0,this._view=i,this._animator=this._animatorFactory.createInstantAnimator()}get shouldRender(){return!0}get isAnimating(){return this.animator.isAnimating}getAnimator(){return this._animator}get animator(){return this._animatorProp}get _rect(){return this._view.rect}get _previousRect(){return this._view.previousRect}setAnimator(e,t){this._animator=this._animatorFactory.createAnimatorByName(e,t)}_setTarget(e,t=!0){var i,r;this._previousValue=Nr(this._currentValue),this._targetValue=e,t?(null==(r=(i=this._animator).reset)||r.call(i),this.animator.markAsAnimating()):this._currentValue=e,this._hasChanged=!0}hasChanged(){return this._hasChanged}destroy(){this._hasChanged=!1}update(e,t){}}class Or extends Br{constructor(){super(...arguments),Li(this,"_invertedBorderRadius"),Li(this,"_forceStyleUpdateThisFrame",!1),Li(this,"_updateWithScale",!1)}setFromElementPropValue(e){this._setTarget([e.value.topLeft,e.value.topRight,e.value.bottomRight,e.value.bottomLeft],!0)}enableUpdateWithScale(){this._updateWithScale=!0}disableUpdateWithScale(){this._updateWithScale=!1}get value(){return{topLeft:this._currentValue[0],topRight:this._currentValue[1],bottomRight:this._currentValue[2],bottomLeft:this._currentValue[3]}}get invertedBorderRadius(){return this._invertedBorderRadius}set(e,t=!0){let i;if("string"==typeof e){const t=nr(e.trim());i={topLeft:t.value.topLeft.valueWithUnit,topRight:t.value.topRight.valueWithUnit,bottomRight:t.value.bottomRight.valueWithUnit,bottomLeft:t.value.bottomLeft.valueWithUnit}}else i=e;const r=i.topLeft?tr(i.topLeft):this._currentValue[0],n=i.topRight?tr(i.topRight):this._currentValue[1],a=i.bottomRight?tr(i.bottomRight):this._currentValue[2],s=i.bottomLeft?tr(i.bottomLeft):this._currentValue[3];this._setTarget([r,n,a,s],t)}reset(e=!0){this._setTarget(this._initialValue,e)}update(e,t){if(this._forceStyleUpdateThisFrame)this._hasChanged=!0,this._forceStyleUpdateThisFrame=!1;else if(this._view.scale.isAnimating&&this._updateWithScale)this._hasChanged=!0;else if(ir(this._targetValue,this._currentValue))return void(this._hasChanged=!ir(this._targetValue,this._initialValue));this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t}),this._updateWithScale&&this._applyScaleInverse()}applyScaleInverse(){this._updateWithScale&&(this._forceStyleUpdateThisFrame=!0)}_applyScaleInverse(){if(er(this._view.scale.x,1)&&er(this._view.scale.y,1))return;const e=this._rect.size.width*this._view.scale.x,t=this._rect.size.height*this._view.scale.y;this._invertedBorderRadius=function(e,t){const i=s(e.topLeft,t),r=s(e.topRight,t),n=s(e.bottomLeft,t),a=s(e.bottomRight,t);return{v:{topLeft:i.v,topRight:r.v,bottomRight:a.v,bottomLeft:n.v},h:{topLeft:i.h,topRight:r.h,bottomRight:a.h,bottomLeft:n.h}};function s(e,t){if("%"===e.unit)return{h:tr(`${e.value}%`),v:tr(`${e.value}%`)};const i=e.value/t.width*100,r=e.value/t.height*100;return{h:tr(`${i}%`),v:tr(`${r}%`)}}}(nr(`${this._currentValue[0].valueWithUnit} ${this._currentValue[1].valueWithUnit} ${this._currentValue[2].valueWithUnit} ${this._currentValue[3].valueWithUnit}`).value,{width:e,height:t})}get shouldRender(){return!!this._hasChanged&&(!this._previousRenderValue||!(ar(this.renderValue.v,this._previousRenderValue.v)&&ar(this.renderValue.h,this._previousRenderValue.h)))}get renderValue(){return this.invertedBorderRadius?{v:{topLeft:this.invertedBorderRadius.v.topLeft,topRight:this.invertedBorderRadius.v.topRight,bottomLeft:this.invertedBorderRadius.v.bottomLeft,bottomRight:this.invertedBorderRadius.v.bottomRight},h:{topLeft:this.invertedBorderRadius.h.topLeft,topRight:this.invertedBorderRadius.h.topRight,bottomLeft:this.invertedBorderRadius.h.bottomLeft,bottomRight:this.invertedBorderRadius.h.bottomRight}}:{v:{topLeft:this.value.topLeft,topRight:this.value.topRight,bottomLeft:this.value.bottomLeft,bottomRight:this.value.bottomRight},h:{topLeft:this.value.topLeft,topRight:this.value.topRight,bottomLeft:this.value.bottomLeft,bottomRight:this.value.bottomRight}}}projectStyles(){const e=this.renderValue,t=`border-radius: ${e.h.topLeft.valueWithUnit} ${e.h.topRight.valueWithUnit} ${e.h.bottomRight.valueWithUnit} ${e.h.bottomLeft.valueWithUnit} / ${e.v.topLeft.valueWithUnit} ${e.v.topRight.valueWithUnit} ${e.v.bottomRight.valueWithUnit} ${e.v.bottomLeft.valueWithUnit};`;return this._previousRenderValue=e,t}isTransform(){return!1}}class Ur extends Br{setFromElementPropValue(e){this._setTarget(e.value,!0)}get value(){return this._currentValue}set(e,t=!0){this._setTarget(e,t)}reset(e=!0){this._setTarget(1,e)}update(e,t){er(this._targetValue,this._currentValue)?this._hasChanged=!er(this._targetValue,this._initialValue):this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t})}get shouldRender(){return!!this._hasChanged&&(typeof this._previousRenderValue>"u"||this.renderValue!==this._previousRenderValue)}get renderValue(){return this.value}projectStyles(){const e=this.renderValue,t=`opacity: ${e};`;return this._previousRenderValue=e,t}isTransform(){return!1}}class $r extends Br{get x(){return this._currentValue.x}get y(){return this._currentValue.y}set(e){const t={x:this.x,y:this.y,...e};t.x<0||t.x>1||t.y<0||t.y>1||this._setTarget(new Gi(t.x,t.y),!1)}reset(){this._setTarget(this._initialValue,!1)}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(er(e.x,this._previousRenderValue.x)&&er(e.y,this._previousRenderValue.y))}get renderValue(){return new Gi(100*this.x,100*this.y)}projectStyles(){const e=this.renderValue,t=`transform-origin: ${e.x}% ${e.y}%;`;return this._previousRenderValue=e,t}isTransform(){return!1}}class zr extends Br{constructor(){super(...arguments),Li(this,"_animateLayoutUpdateNextFrame",!1),Li(this,"_parentScaleInverse",new Gi(1,1))}get _parentDiff(){let e=this._view._parent,t=0,i=0;if(e){const r=e.rect.pageOffset,n=e.getScroll(),a={left:e.previousRect.viewportOffset.left+n.x,top:e.previousRect.viewportOffset.top+n.y};t=a.left-r.left,i=a.top-r.top}return{parentDx:t,parentDy:i}}get x(){return this._currentValue.x+this._rect.pageOffset.left+this._parentDiff.parentDx}get y(){return this._currentValue.y+this._rect.pageOffset.top+this._parentDiff.parentDy}get initialX(){return this._rect.pageOffset.left}get initialY(){return this._rect.pageOffset.top}progressTo(e){const t=typeof e.x>"u"?this.initialX:e.x,i=typeof e.y>"u"?this.initialY:e.y,r=new Gi(t,i),n=new Gi(this.initialX,this.initialY),a=new Gi(this.x,this.y),s=Gi.sub(a,n),o=Gi.sub(r,n);return 1-Gi.sub(o,s).magnitude/o.magnitude}set(e,t=!0){const i={x:this.x,y:this.y,...e};this._setTarget(new Gi(i.x-this._rect.pageOffset.left,i.y-this._rect.pageOffset.top),t)}reset(e=!0){this._setTarget(new Gi(0,0),e)}update(e,t){if((this._view.isInverseEffectEnabled||this._view.isLayoutTransitionEnabled)&&!this._view.isTemporaryView&&this._runLayoutTransition(),this._view.isInverseEffectEnabled){const e=this._view._parent,t=e?e.scale.x:1,i=e?e.scale.y:1;this._parentScaleInverse=new Gi(1/t,1/i),this._parentScaleInverse.equals(new Gi(1,1))||(this._hasChanged=!0)}if(this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y)return;const i=this._view._parent,r=i?i.scale.x:1,n=i?i.scale.y:1,a=i?i.scale._previousValue.x:1,s=i?i.scale._previousValue.y:1;this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:new Gi(this._currentValue.x*r,this._currentValue.y*n),target:this._targetValue,initial:new Gi(this._previousValue.x*a,this._previousValue.y*s),ts:e,dt:t}),this._currentValue=new Gi(this._currentValue.x/r,this._currentValue.y/n)}_runLayoutTransition(){const e=!(this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y),t=!(this._view.scale._targetValue.x===this._view.scale._currentValue.x&&this._view.scale._targetValue.y===this._view.scale._currentValue.y),i=e||t,r=this._rect.pageOffset.left-this._previousRect.pageOffset.left,n=this._rect.pageOffset.top-this._previousRect.pageOffset.top,a=this._previousRect.size.width/this._rect.size.width,s=this._previousRect.size.height/this._rect.size.height;let o=!1;if(o=0!==r||0!==n||!Number.isNaN(a)&&1!==a||!Number.isNaN(s)&&1!==s||(()=>{const e=this._view._parents;for(let t=0;t<e.length;t++){const i=e[t],r=i.previousRect.size.width/i.rect.size.width,n=i.previousRect.size.height/i.rect.size.height;if(1!==r||1!==n)return!0}return!1})(),o){if(0!==this._currentValue.x||0!==this._currentValue.y||1!==this._view.scale._currentValue.x||1!==this._view.scale._currentValue.y){if(!i){const e=this._rect.pageOffset.left-this._previousRect.pageOffset.left,t=this._rect.pageOffset.top-this._previousRect.pageOffset.top;return void this._setTarget(new Gi(this._currentValue.x-e,this._currentValue.y-t),!1)}const e=this._view._parent,t=this._rect.pageOffset,r=this._view.getScroll(),n={left:this._previousRect.viewportOffset.left+r.x,top:this._previousRect.viewportOffset.top+r.y},a=n.left-t.left,s=n.top-t.top;let o=0,l=0,u=0,h=0;if(e){const t=e.rect.pageOffset,i=e.getScroll(),r={left:e.previousRect.viewportOffset.left+i.x,top:e.previousRect.viewportOffset.top+i.y};o=r.left-t.left,l=r.top-t.top;const a=n.top-r.top,s=n.left-r.left;u=(a-e.scale.y*a)/e.scale.y;h=(s-e.scale.x*s)/e.scale.x}return this._setTarget(new Gi(a-o+h,s-l+u),!1),void(i&&(this._animateLayoutUpdateNextFrame=!0))}this._animateLayoutUpdateNextFrame=!0;const e=this._previousRect,t=this._rect,r=this._view._parent;let n=0,a=0;r&&(n=r.previousRect.viewportOffset.left-r.rect.viewportOffset.left),r&&(a=r.previousRect.viewportOffset.top-r.rect.viewportOffset.top);let s=1,o=1;r&&(s=r.previousRect.size.width/r.rect.size.width,o=r.previousRect.size.height/r.rect.size.height);const l=r?r.previousRect.viewportOffset.left:0,u=r?r.previousRect.viewportOffset.top:0,h=e.viewportOffset.left-l,c=e.viewportOffset.top-u,d=h/s-h,p=c/o-c;let f=e.viewportOffset.left-t.viewportOffset.left-n+d,g=e.viewportOffset.top-t.viewportOffset.top-a+p;f=Number.isFinite(f)?f:0,g=Number.isFinite(g)?g:0,this._setTarget(new Gi(f,g),!1)}else this._animateLayoutUpdateNextFrame&&(this._setTarget(this._initialValue,!0),this._animateLayoutUpdateNextFrame=!1)}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(er(e.x,this._previousRenderValue.x)&&er(e.y,this._previousRenderValue.y))}get renderValue(){let e=0,t=0;return(this._view.isInverseEffectEnabled||this._view.isLayoutTransitionEnabled)&&(e=(this._rect.size.width*this._parentScaleInverse.x*this._view.scale.x-this._rect.size.width)*this._view.origin.x,t=(this._rect.size.height*this._parentScaleInverse.y*this._view.scale.y-this._rect.size.height)*this._view.origin.y),new Gi(this._currentValue.x+e,this._currentValue.y+t)}projectStyles(){const e=this.renderValue,t=`translate3d(${e.x}px, ${e.y}px, 0px)`;return this._previousRenderValue=e,t}isTransform(){return!0}}class jr extends Br{constructor(){super(...arguments),Li(this,"_unit","deg")}get degrees(){let e=this._currentValue;return"rad"===this._unit&&(e*=180/Math.PI),e}get radians(){let e=this._currentValue;return"deg"===this._unit&&(e*=Math.PI/180),e}setDegrees(e,t=!0){this._unit="deg",this._setTarget(e,t)}setRadians(e,t=!0){this._unit="rad",this._setTarget(e,t)}reset(e=!0){this._setTarget(0,e)}update(e,t){this._targetValue!==this._currentValue&&(this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t}))}get shouldRender(){if(!this._hasChanged)return!1;if(typeof this._previousRenderValue>"u")return!0;return!er(this.renderValue,this._previousRenderValue)}get renderValue(){return this._currentValue}projectStyles(){const e=this.renderValue,t=`rotate(${e}${this._unit})`;return this._previousRenderValue=e,t}isTransform(){return!0}}class Yr extends Br{constructor(){super(...arguments),Li(this,"_animateLayoutUpdateNextFrame",!1)}get x(){return this._currentValue.x}get y(){return this._currentValue.y}set(e,t=!0){const i={x:this._currentValue.x,y:this._currentValue.y,..."number"==typeof e?{x:e,y:e}:e};this._setTarget(new Gi(i.x,i.y),t)}setWithSize(e,t=!0){let i=this._currentValue.x,r=this._currentValue.y;e.width&&(i=e.width/this._rect.size.width),e.height&&(r=e.height/this._rect.size.height),!e.width&&e.height&&(i=r),!e.height&&e.width&&(r=i);const n={x:i,y:r};this._setTarget(new Gi(n.x,n.y),t)}reset(e=!0){this._setTarget(new Gi(1,1),e)}update(e,t){if("position"!==this._view.layoutOption){if((this._view.isInverseEffectEnabled||this._view.isLayoutTransitionEnabled)&&!this._view.isTemporaryView&&this._runLayoutTransition(),this._view.isInverseEffectEnabled){const e=this._view._parent,t=e?e.scale.x:1,i=e?e.scale.y:1;this._hasChanged=1!==t||1!==i}this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y||(this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:new Gi(this._previousValue.x,this._previousValue.y),ts:e,dt:t}))}}_runLayoutTransition(){const e=!(this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y),t=this._previousRect.size.width/this._rect.size.width,i=this._previousRect.size.height/this._rect.size.height;let r=!1;if((!Number.isNaN(t)&&1!==t||!Number.isNaN(i)&&1!==i)&&(r=!0),r){if(1!==this._currentValue.x||1!==this._currentValue.y){const t=this._view.previousRect.size.width/this._view.rect.size.width,i=this._view.previousRect.size.height/this._view.rect.size.height;return this._setTarget(new Gi(this._currentValue.x*t,this._currentValue.y*i),!1),void(e&&(this._animateLayoutUpdateNextFrame=!0))}const t=this._previousRect.size.width/this._rect.size.width,i=this._previousRect.size.height/this._rect.size.height;this._view.viewProps.borderRadius.applyScaleInverse(),this._setTarget(new Gi(t,i),!1),this._animateLayoutUpdateNextFrame=!0}else this._animateLayoutUpdateNextFrame&&(this._setTarget(this._initialValue,!0),this._animateLayoutUpdateNextFrame=!1)}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(er(e.x,this._previousRenderValue.x)&&er(e.y,this._previousRenderValue.y))}get renderValue(){const e=this._view._parent?this._view._parent.scale.x:1,t=this._view._parent?this._view._parent.scale.y:1,i=this._currentValue.x/e,r=this._currentValue.y/t;return new Gi(i,r)}projectStyles(){const e=this.renderValue,t=`scale3d(${e.x}, ${e.y}, 1)`;return this._previousRenderValue=e,t}isTransform(){return!0}}class Wr extends Br{get width(){return this._view.rect.size.width}get height(){return this._view.rect.size.height}get localWidth(){return this._currentValue.x}get localHeight(){return this._currentValue.y}get widthAfterScale(){const e=this._view.scale.x;return this.localWidth*e}get heightAfterScale(){const e=this._view.scale.y;return this.localHeight*e}get initialWidth(){return this._initialValue.x}get initialHeight(){return this._initialValue.y}set(e,t=!0){const i={width:this._currentValue.x,height:this._currentValue.y,...e};this._setTarget(new Gi(i.width,i.height),t)}setWidth(e,t=!0){const i={width:this._currentValue.x,height:this._currentValue.y,width:e};this._setTarget(new Gi(i.width,i.height),t)}setHeight(e,t=!0){const i={width:this._currentValue.x,height:this._currentValue.y,height:e};this._setTarget(new Gi(i.width,i.height),t)}reset(e=!0){this._setTarget(new Gi(this.initialWidth,this.initialHeight),e)}update(e,t){this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y||(this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t}))}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(er(e.x,this._previousRenderValue.x)&&er(e.y,this._previousRenderValue.y))}get renderValue(){return new Gi(this._currentValue.x,this._currentValue.y)}projectStyles(){const e=this.renderValue,t=`width: ${e.x}px; height: ${e.y}px;`;return this._previousRenderValue=e,t}isTransform(){return!1}}class qr{constructor(e){Li(this,"_props",new Map),this._props.set("position",new zr(new Cr,new Gi(0,0),e)),this._props.set("scale",new Yr(new Cr,new Gi(1,1),e)),this._props.set("rotation",new jr(new Ir,0,e)),this._props.set("size",new Wr(new Cr,new Gi(e.rect.size.width,e.rect.size.height),e)),this._props.set("opacity",new Ur(new Ir,e.elementReader.opacity.value,e)),this._props.set("borderRadius",new Or(new kr,[e.elementReader.borderRadius.value.topLeft,e.elementReader.borderRadius.value.topRight,e.elementReader.borderRadius.value.bottomRight,e.elementReader.borderRadius.value.bottomLeft],e)),this._props.set("origin",new $r(new Cr,e.elementReader.origin.value,e))}allProps(){return Array.from(this._props.values())}allPropNames(){return Array.from(this._props.keys())}getPropByName(e){return this._props.get(e)}get position(){return this._props.get("position")}get scale(){return this._props.get("scale")}get rotation(){return this._props.get("rotation")}get size(){return this._props.get("size")}get opacity(){return this._props.get("opacity")}get borderRadius(){return this._props.get("borderRadius")}get origin(){return this._props.get("origin")}}class Hr{constructor(e,t,i,r){Li(this,"id"),Li(this,"name"),Li(this,"element"),Li(this,"styles",{}),Li(this,"_viewProps"),Li(this,"_previousRect"),Li(this,"_onAddCallbacks"),Li(this,"_onRemoveCallback"),Li(this,"_skipFirstRenderFrame"),Li(this,"_layoutTransition"),Li(this,"_registry"),Li(this,"_layoutId"),Li(this,"_elementReader"),Li(this,"_viewParents"),Li(this,"_temporaryView"),Li(this,"_inverseEffect"),Li(this,"_renderNextTick"),Li(this,"_layoutOption"),Li(this,"_elementObserver"),Li(this,"_hasReadElement"),Li(this,"_shouldReadRect"),Li(this,"_readWithScroll"),Li(this,"_externalUserStyles"),this._registry=i,this.id=qi(),this.name=t,this.element=e,this.element.dataset.velViewId=this.id,this._elementReader=dr(this),this._viewParents=this._getParents(),this._previousRect=this._elementReader.rect,this._viewProps=new qr(this),this._skipFirstRenderFrame=!0,this._layoutId=r,this._layoutTransition=!1,this._temporaryView=!1,this.styles=pr(this.styles,(()=>{this._renderNextTick=!0})),this._externalUserStyles=this._getExternalUserStyles(),this._renderNextTick=!1,this._layoutOption=this._getLayoutOption(),this._hasReadElement=!1,this._shouldReadRect=!1,this._readWithScroll=!1,this._elementObserver=new Qi(e),this._elementObserver.onChange((e=>{this._hasReadElement?this._shouldReadRect=!1:(this._externalUserStyles=this._getExternalUserStyles(),this._shouldReadRect=!0,this._readWithScroll=e)}))}destroy(){this._viewProps.allProps().forEach((e=>e.destroy())),this.element.removeAttribute("data-vel-view-id"),this.element.removeAttribute("data-vel-plugin-id"),this._renderNextTick=!0}get elementReader(){return this._elementReader}get layoutOption(){return this._layoutOption}_getLayoutOption(){return this.element.closest("[data-vel-layout-position]")?"position":this.element.closest("[data-vel-layout-size]")?"size":"all"}setElement(e){this.element=e,this._elementReader=dr(this),this.element.dataset.velViewId=this.id,this._elementObserver.setElement(e),this._viewParents=this._getParents()}get layoutId(){return this._layoutId}get position(){return this._viewProps.position}get scale(){return this._viewProps.scale}get _children(){const e=this.element.querySelectorAll("*");return Array.from(e).map((e=>e.dataset.velViewId)).filter((e=>e&&"string"==typeof e)).map((e=>this._registry.getViewById(e))).filter((e=>!!e))}get _parent(){return this._parents[0]}get _parents(){return this._viewParents}_getParents(){var e;const t=[];let i=this.element.parentElement;if(!i)return t;for(i=i.closest("[data-vel-view-id]");i;){const r=i.dataset.velViewId;if(r){const e=this._registry.getViewById(r);e&&t.push(e)}i=null==(e=i.parentElement)?void 0:e.closest("[data-vel-view-id]")}return t}get rotation(){return this._viewProps.rotation}get size(){return this._viewProps.size}get _localWidth(){return this._viewProps.size.localWidth}get _localHeight(){return this._viewProps.size.localHeight}get opacity(){return this._viewProps.opacity}get borderRadius(){return this._viewProps.borderRadius}get origin(){return this._viewProps.origin}get data(){const e=this.element.dataset;return Object.keys(e).filter((e=>e.includes("velData"))).map((e=>e.replace("velData",""))).map((e=>`${e[0].toLowerCase()}${e.slice(1)}`)).reduce(((t,i)=>{const r=e[`velData${i[0].toUpperCase()}${i.slice(1)}`];return!t[i]&&r&&(t[i]=r),t}),{})}get onAddCallbacks(){return this._onAddCallbacks}get onRemoveCallback(){return this._onRemoveCallback}get isLayoutTransitionEnabled(){return this._layoutTransition}get hasLayoutTransitionEnabledForParents(){return this._parents.some((e=>e.isLayoutTransitionEnabled))}get isInverseEffectEnabled(){let e=!1;for(let t=0;t<this._parents.length;t++){const i=this._parents[t];if(typeof i._inverseEffect<"u"){e=i._inverseEffect;break}}return e}layoutTransition(e){this._layoutTransition=e,this.inverseEffect(e)}inverseEffect(e){this._inverseEffect=e,e&&this._children.forEach((e=>{if("instant"===e.position.animator.name){const t=this.viewProps.position.getAnimator();e.position.setAnimator(t.name,t.config)}if("instant"===e.scale.animator.name){const t=this.viewProps.scale.getAnimator();e.scale.setAnimator(t.name,t.config)}}))}setAnimatorsFromParent(){let e=this._parent;for(;e&&!e._inverseEffect;)e=e._parent;if(e){if("instant"===this.position.animator.name){const t=e.viewProps.position.getAnimator();this.position.setAnimator(t.name,t.config)}if("instant"===this.scale.animator.name){const t=e.viewProps.scale.getAnimator();this.scale.setAnimator(t.name,t.config)}}}get _isRemoved(){return!this._registry.getViewById(this.id)}setPluginId(e){this.element.dataset.velPluginId=e}hasElement(e){return this.element.contains(e)}getScroll(){return this._elementReader.scroll}intersects(e,t){const i=this.element.getBoundingClientRect(),r=i.left,n=i.top;return e>=r&&e<=r+i.width&&t>=n&&t<=n+i.height}overlapsWith(e){const t=e._localWidth*e.scale.x,i=e._localHeight*e.scale.y,r=this._localWidth*this.scale.x,n=this._localHeight*this.scale.y;return this.position.x<e.position.x+t&&this.position.x+r>e.position.x&&this.position.y<e.position.y+i&&this.position.y+n>e.position.y}distanceTo(e){const t=new Gi(this.position.x,this.position.y),i=new Gi(e.position.x,e.position.y);return Gi.sub(i,t).magnitude}read(){this._shouldReadRect&&(this._elementReader.update(this._readWithScroll),this._children.forEach((e=>{e.setHasReadElement(!0),e.elementReader.update(this._readWithScroll)})),this._shouldReadRect=!1,this._readWithScroll=!1),this.setHasReadElement(!1)}setHasReadElement(e){this._hasReadElement=e}get rect(){return this._elementReader.rect}get previousRect(){return this._previousRect}update(e,t){this._viewProps.allProps().forEach((i=>i.update(e,t)))}_updatePreviousRect(){this._previousRect=this._elementReader.rect}setAsTemporaryView(){this._temporaryView=!0}get isTemporaryView(){return this._temporaryView}get shouldRender(){return this._renderNextTick||this._viewProps.allProps().some((e=>e.shouldRender))}_cleanCssText(e){const t=new Map,i=/([-\w]+)\s*:\s*([^;]+)\s*;?/g;let r;for(;null!==(r=i.exec(e));){const[e,i,n]=r;if(!n.trim())continue;const a=i.replace(/^-\w+-/,"");(!t.has(a)||!i.startsWith("-"))&&t.set(a,`${a}: ${n.trim()}`)}return Array.from(t.values()).join("; ")}render(){if(!this.shouldRender)return;if(this._isRemoved&&this._skipFirstRenderFrame)return void(this._skipFirstRenderFrame=!1);let e="";const t=this._viewProps.allProps(),i=t.filter((e=>e.isTransform())),r=t.filter((e=>!e.isTransform()));if(i.some((e=>e.hasChanged()))){const t=i.reduce(((e,t,r)=>(e+=t.projectStyles(),r<i.length-1&&(e+=" "),r===i.length-1&&(e+=";"),e)),"transform: ");e+=t}r.forEach((t=>{t.hasChanged()&&(e+=t.projectStyles())})),e+=this._getUserStyles(),this._cleanCssText(this.element.style.cssText)!==this._cleanCssText(e)&&(this.element.style.cssText=e),this._renderNextTick=!1}_getExternalUserStyles(){const e=this.element.style.cssText,t=this.styles;if(0===e.length)return"";const i=["transform","transform-origin","opacity","width","height","border-radius"],r={};for(const n in t)t.hasOwnProperty(n)&&(r[Bi(n)]=t[n]);return e.split(";").map((e=>e.trim())).filter(Boolean).filter((e=>{const t=e.indexOf(":");if(-1===t)return!1;const n=e.slice(0,t).trim();return!r.hasOwnProperty(n)&&!i.includes(n)})).join("; ")}_getUserStyles(){return Object.keys(this.styles).reduce(((e,t)=>{if(!t)return e;return e+`${Bi(t).replace("webkit","-webkit").replace("moz","-moz")}: ${this.styles[t]}; `}),this._externalUserStyles)}markAsAdded(){delete this.element.dataset.velProcessing}onAdd(e){this._onAddCallbacks=e}onRemove(e){this._onRemoveCallback=e}get viewProps(){return this._viewProps}getPropByName(e){return this._viewProps.getPropByName(e)}_copyAnimatorsToAnotherView(e){e.viewProps.allPropNames().forEach((t=>{var i,r;const n=null==(i=this.viewProps.getPropByName(t))?void 0:i.getAnimator();n&&(null==(r=e.viewProps.getPropByName(t))||r.setAnimator(n.name,n.config))}))}getChildren(e){const t=this.element.querySelectorAll("*"),i=Array.from(t).filter((t=>{const i=t;return typeof i.dataset.velViewId<"u"&&i.dataset.velView===e})).map((e=>e.dataset.velViewId));return this._registry.getViewsById(i)}getChild(e){return this.getChildren(e)[0]}getParent(e){const t=this.element.closest(`[data-vel-view="${e}"]`);if(!t)return;const i=t.dataset.velViewId;return i?this._registry.getViewById(i):void 0}}class Xr{constructor(e,t){Li(this,"_appEventBus"),Li(this,"_eventBus"),Li(this,"_plugins",[]),Li(this,"_views",[]),Li(this,"_viewsPerPlugin",new Map),Li(this,"_viewsToBeCreated",[]),Li(this,"_viewsToBeRemoved",[]),Li(this,"_viewsCreatedInPreviousFrame",[]),Li(this,"_layoutIdToViewMap",new Map),Li(this,"_eventPluginsPerPlugin",new Map),Li(this,"_pluginNameToPluginFactoryMap",new Map),Li(this,"_pluginNameToPluginConfigMap",new Map),this._appEventBus=e,this._eventBus=t}update(){this._handleRemovedViews(),this._handleAddedViews()}associateEventPluginWithPlugin(e,t){let i=this._eventPluginsPerPlugin.get(e);i||(i=[],this._eventPluginsPerPlugin.set(e,i)),i.push(t)}_handleRemovedViews(){const e=this._viewsToBeRemoved.filter((e=>e.dataset.velViewId));e.length&&(e.forEach((e=>{const t=e.dataset.velViewId;t&&this._handleRemoveView(t)})),this._viewsToBeRemoved=[])}_getPluginNameForElement(e){const t=e.dataset.velPlugin;if(t&&t.length>0)return t;const i=e.closest("[data-vel-plugin]");return i?i.dataset.velPlugin:void 0}_getPluginIdForElement(e){const t=this._getPluginNameForElement(e);if(!t)return;const i=e.closest("[data-vel-plugin-id]");if(i)return i.dataset.velPluginId;const r=this.getPluginByName(t);return r?r.id:void 0}_isScopedElement(e){const t=this._getPluginNameForElement(e);if(!t)return!1;const i=this._pluginNameToPluginFactoryMap.get(t),r=null==i?void 0:i.scope;return e.dataset.velView===r}_removeElementsWithParent(e){const t=new Set(e);return e.filter((e=>{let i=e.parentElement;for(;i;){if(t.has(i))return!1;i=i.parentElement}return!0}))}_handleAddedViews(){this._viewsCreatedInPreviousFrame.forEach((e=>{e.markAsAdded()})),this._viewsCreatedInPreviousFrame=[];const e=this._removeElementsWithParent(this._viewsToBeCreated),t=Array.from(new Set(e.filter((e=>this._isScopedElement(e)&&!this._isElementIgnored(e))))),i=e.filter((e=>!this._isScopedElement(e)&&!this._isElementIgnored(e)));this._viewsToBeCreated=[],t.forEach((e=>{const t=this._getPluginNameForElement(e),i=this._pluginNameToPluginFactoryMap.get(t),r=this._pluginNameToPluginConfigMap.get(t),n=e.dataset.velPluginKey,a=Zi(i,this,this._eventBus,this._appEventBus,r,n);this._plugins.push(a);const s=e.dataset.velView,o=this._createNewView(e,s,a);o.isInverseEffectEnabled&&o.setAnimatorsFromParent(),a.notifyAboutViewAdded(o)}));const r=i.filter((e=>!!this._getPluginIdForElement(e)));0!==r.length&&r.forEach((e=>{const t=this._getPluginIdForElement(e),i=e.dataset.velView;if(!i||!t)return;const r=this._getPluginById(t);if(!r)return;const n=this._getLayoutIdForElement(e,r);let a;n&&this._layoutIdToViewMap.has(n)?(a=this._layoutIdToViewMap.get(n),a.setElement(e),a.setPluginId(r.id),this._createChildrenForView(a,r)):a=this._createNewView(e,i,r),a.isInverseEffectEnabled&&a.setAnimatorsFromParent(),r.notifyAboutViewAdded(a)}))}_getLayoutIdForElement(e,t){const i=e.dataset.velLayoutId;if(i)return`${i}-${t.id}`}_createNewView(e,t,i){const r=this._getLayoutIdForElement(e,i),n=this.createView(e,t,r);return i.addView(n),n.layoutId&&this._layoutIdToViewMap.set(n.layoutId,n),this._createChildrenForView(n,i),this._appEventBus.emitPluginReadyEvent(i.pluginName,i.api,!0),requestAnimationFrame((()=>{requestAnimationFrame((()=>{this._appEventBus.emitPluginReadyEvent(i.pluginName,i.api)}))})),n}_createChildrenForView(e,t){const i=e.element.querySelectorAll("*");if(i.length){if(Array.from(i).some((e=>this._getPluginNameForElement(e)!==t.pluginName)))return;Array.from(i).filter((e=>!this._isElementIgnored(e))).forEach((i=>{const r=i,n=r.dataset.velView?r.dataset.velView:`${e.name}-child`,a=this._getLayoutIdForElement(r,t),s=this.createView(r,n,a);a&&!this._layoutIdToViewMap.has(a)&&this._layoutIdToViewMap.set(a,s),t.addView(s),t.notifyAboutViewAdded(s)}))}}_handleRemoveView(e){this._plugins.forEach((t=>{if(!this._viewsPerPlugin.get(t.id))return;const i=this._getPluginViewById(t,e);i&&t.removeView(i)}))}removeViewById(e,t){this._unassignViewFromPlugin(e,t),this._views=this._views.filter((t=>t.id!==e))}_unassignViewFromPlugin(e,t){const i=this._viewsPerPlugin.get(t);if(!i)return;const r=i.indexOf(e);-1!==r&&i.splice(r,1)}getViewById(e){return this._views.find((t=>t.id===e))}getViewsById(e){return this._views.filter((t=>e.includes(t.id)))}_getPluginById(e){return this._plugins.find((t=>t.id===e))}_getPluginViewById(e,t){return this.getViewsForPlugin(e).find((e=>e.id===t))}destroy(e,t){if(!e)return void this._destroyAll(t);let i=[];if(e&&e.length>0){const t=this.getPluginByName(e);if(t){const e=(this._eventPluginsPerPlugin.get(t.id)||[]).map((e=>this._getPluginById(e))).filter((e=>typeof e<"u"));i.push(t),i.push(...e)}}else i=this._plugins;i.forEach((e=>{this._destroyPlugin(e)})),requestAnimationFrame((()=>{null==t||t()}))}_destroyPlugin(e){const t=this.getViewsForPlugin(e);t.forEach((e=>{e.layoutId&&this._layoutIdToViewMap.delete(e.layoutId),e.destroy()})),this._views=this._views.filter((e=>!t.find((t=>t.id===e.id)))),this._viewsPerPlugin.delete(e.id),this._plugins=this._plugins.filter((t=>t.id!==e.id))}_destroyAll(e){this._views.forEach((e=>e.destroy())),requestAnimationFrame((()=>{this._plugins=[],this._views=[],this._viewsPerPlugin.clear(),this._viewsToBeCreated=[],this._viewsToBeRemoved=[],this._viewsCreatedInPreviousFrame=[],this._layoutIdToViewMap.clear(),this._eventPluginsPerPlugin.clear(),null==e||e()}))}reset(e,t){let i=[];if(e&&e.length>0){const t=this.getPluginByName(e);if(t){const e=(this._eventPluginsPerPlugin.get(t.id)||[]).map((e=>this._getPluginById(e))).filter((e=>typeof e<"u"));i.push(t),i.push(...e)}}else i=this._plugins;requestAnimationFrame((()=>{i.forEach((e=>{this._resetPlugin(e)})),requestAnimationFrame((()=>{null==t||t()}))}))}_resetPlugin(e){const t=e.config,i=e.pluginFactory,r=e.internalBusEvent,n=!e.isRenderable(),a=this.getViewsForPlugin(e);a.forEach((e=>{e.layoutId&&this._layoutIdToViewMap.delete(e.layoutId),e.destroy()})),this._views=this._views.filter((e=>!a.find((t=>t.id===e.id)))),this._viewsPerPlugin.delete(e.id),this._plugins=this._plugins.filter((t=>t.id!==e.id)),n||requestAnimationFrame((()=>{this.createPlugin(i,this._eventBus,t).setInternalEventBus(r)}))}queueNodeToBeCreated(e){this._viewsToBeCreated.push(e)}queueNodeToBeRemoved(e){this._viewsToBeRemoved.push(e)}notifyPluginAboutDataChange(e){const t=this._plugins.filter((t=>t.id===e.pluginId));!t||!t.length||t.forEach((t=>{t.notifyAboutDataChanged({dataName:e.dataName,dataValue:e.dataValue,viewName:e.viewName})}))}getPlugins(){return this._plugins}getRenderablePlugins(){return this._plugins.filter((function(e){return e.isRenderable()}))}getPluginByName(e,t){return this._plugins.find((i=>t?i.pluginKey===t&&i.pluginName===e:i.pluginName===e))}getPluginsByName(e,t){return this._plugins.filter((i=>t?i.pluginKey===t&&i.pluginName===e:i.pluginName===e))}hasPlugin(e){return!!e.pluginName&&!!this.getPluginByName(e.pluginName)}createPlugin(e,t,i={},r=!1){if(!e.pluginName)throw Error(`Plugin ${e.name} must contain a pluginName field`);let n=[];if(e.scope){const t=r?`[data-vel-plugin=${e.pluginName}][data-vel-view=${e.scope}]:not([data-vel-plugin-id])`:`[data-vel-plugin=${e.pluginName}][data-vel-view=${e.scope}]`,a=document.querySelectorAll(t);this._pluginNameToPluginFactoryMap.has(e.pluginName)||this._pluginNameToPluginFactoryMap.set(e.pluginName,e),this._pluginNameToPluginConfigMap.has(e.pluginName)||this._pluginNameToPluginConfigMap.set(e.pluginName,i),n=a?Array.from(a):[document.documentElement]}else n=[document.documentElement];const a=n.map((r=>{const n=r.dataset.velPluginKey,a=Zi(e,this,t,this._appEventBus,i,n);this._plugins.push(a);let s=[];r!==document.documentElement&&s.push(r);const o=r.querySelectorAll(`[data-vel-plugin=${a.pluginName}]`);s=[...s,...o];const l=s.filter((e=>{if(this._isElementIgnored(e))return!1;if(!e.parentElement)return!0;const t=this._getPluginNameForElement(e.parentElement);return!(t&&t.length>0)}));return l.length&&l.forEach((e=>{const t=e.dataset.velView;if(!t)return;const i=this._createNewView(e,t,a);a.notifyAboutViewAdded(i)})),a}));if(a&&a.length>0)return a[0];const s=Zi(e,this,t,this._appEventBus,i);return e.scope,s}updatePlugin(e,t,i={}){return this.createPlugin(e,t,i,!0)}getViews(){return this._views}createView(e,t,i){const r=new Hr(e,t,this,i);return this._views.push(r),this._viewsCreatedInPreviousFrame.push(r),r}_isElementIgnored(e){return e.closest("[data-vel-ignore]")}assignViewToPlugin(e,t){this._viewsPerPlugin.has(t.id)||this._viewsPerPlugin.set(t.id,[]);const i=this._viewsPerPlugin.get(t.id);i.includes(e.id)||i.push(e.id)}getViewsForPlugin(e){const t=this._viewsPerPlugin.get(e.id);return t?t.map((e=>this._views.find((t=>t.id===e)))).filter((e=>!!e)):[]}getViewsByNameForPlugin(e,t){return this.getViewsForPlugin(e).filter((e=>e.name===t))}}class Kr{constructor(e){Li(this,"pluginApi"),this.pluginApi=e.pluginApi}}class Jr{constructor(e){Li(this,"pluginApi"),this.pluginApi=e.pluginApi}}class Zr{constructor(){Li(this,"previousTime",0),Li(this,"registry"),Li(this,"eventBus"),Li(this,"appEventBus"),this.eventBus=new Yi,this.appEventBus=new Yi,this.registry=new Xr(this.appEventBus,this.eventBus),new $i(this.eventBus)}static create(){return new Zr}addPlugin(e,t={}){this.registry.hasPlugin(e)||this.registry.createPlugin(e,this.eventBus,t)}updatePlugin(e,t={}){this.registry.hasPlugin(e)&&this.registry.updatePlugin(e,this.eventBus,t)}reset(e,t){this.registry.reset(e,t)}destroy(e,t){this.registry.destroy(e,t)}getPlugin(e,t){let i="string"==typeof e?e:e.pluginName;const r=this.registry.getPluginByName(i,t);if(!r)throw new Error(`You can't call getPlugin for ${i} with key: ${t} because it does not exist in your app`);return r.api}getPlugins(e,t){let i="string"==typeof e?e:e.pluginName;const r=this.registry.getPluginsByName(i,t);if(0===r.length)throw new Error(`You can't call getPlugins for ${i} with key: ${t} because they don't exist in your app`);return r.map((e=>e.api))}onPluginEvent(e,t,i,r){requestAnimationFrame((()=>{const n=this.registry.getPluginByName(e.pluginName,r);n&&n.on(t,i)}))}removePluginEventListener(e,t,i){const r=this.registry.getPluginByName(e.pluginName);r&&r.removeListener(t,i)}run(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.start.bind(this)):this.start()}start(){this.setup(),requestAnimationFrame(this.tick.bind(this))}setup(){this.listenToNativeEvents(),this.subscribeToEvents()}listenToNativeEvents(){document.addEventListener("click",(e=>{this.eventBus.emitEvent(Ci,{x:e.clientX,y:e.clientY,target:e.target})})),document.addEventListener("pointermove",(e=>{this.eventBus.emitEvent(ki,{x:e.clientX,y:e.clientY,target:e.target})})),document.addEventListener("pointerdown",(e=>{this.eventBus.emitEvent(Ii,{x:e.clientX,y:e.clientY,target:e.target})})),document.addEventListener("pointerup",(e=>{this.eventBus.emitEvent(Ni,{x:e.clientX,y:e.clientY,target:e.target})}))}tick(e){let t=(e-this.previousTime)/1e3;t>.016&&(t=1/60),this.previousTime=e,this.eventBus.reset(),this.subscribeToEvents(),this.read(),this.update(e,t),this.render(),requestAnimationFrame(this.tick.bind(this))}subscribeToEvents(){this.eventBus.subscribeToEvent(Oi,this.onNodeAdded.bind(this)),this.eventBus.subscribeToEvent(Ui,this.onNodeRemoved.bind(this)),this.eventBus.subscribeToEvent(Fi,this.onDataChanged.bind(this)),this.registry.getPlugins().forEach((e=>{e.subscribeToEvents(this.eventBus)}))}onNodeAdded({node:e}){this.registry.queueNodeToBeCreated(e)}onNodeRemoved({node:e}){this.registry.queueNodeToBeRemoved(e)}onDataChanged(e){this.registry.notifyPluginAboutDataChange(e)}read(){this.registry.getViews().forEach((e=>{e.read()}))}update(e,t){this.registry.update(),this.registry.getPlugins().slice().reverse().forEach((e=>{e.init()})),this.registry.getRenderablePlugins().forEach((i=>{i.update(e,t)})),this.registry.getViews().forEach((i=>{i.update(e,t)})),this.registry.getViews().forEach((e=>{e._updatePreviousRect()}))}render(){this.registry.getRenderablePlugins().forEach((e=>{e.render()})),this.registry.getViews().forEach((e=>{e.render()}))}}class Gr{constructor(e){Li(this,"view"),Li(this,"previousX"),Li(this,"previousY"),Li(this,"x"),Li(this,"y"),Li(this,"pointerX"),Li(this,"pointerY"),Li(this,"isDragging"),Li(this,"target"),Li(this,"directions",[]),Li(this,"width"),Li(this,"height"),Li(this,"distance"),Li(this,"stopped"),this.props=e,this.previousX=e.previousX,this.previousY=e.previousY,this.x=e.x,this.y=e.y,this.pointerX=e.pointerX,this.pointerY=e.pointerY,this.width=e.width,this.height=e.height,this.distance=e.distance,this.view=e.view,this.isDragging=e.isDragging,this.stopped=e.stopped,this.target=e.target,this.directions=e.directions}}class Qr extends Ki{constructor(){super(...arguments),Li(this,"_pointerX",0),Li(this,"_pointerY",0),Li(this,"_initialPointer",new Gi(0,0)),Li(this,"_initialPointerPerView",new Map),Li(this,"_pointerDownPerView",new Map),Li(this,"_viewPointerPositionLog",new Map),Li(this,"_stopTimer",0)}setup(){document.addEventListener("selectstart",this.onSelect.bind(this))}onSelect(e){this._isDragging&&e.preventDefault()}get _isDragging(){return Array.from(this._pointerDownPerView.values()).some((e=>!!e))}subscribeToEvents(e){e.subscribeToEvent(Ii,(({x:e,y:t})=>{this._initialPointer=new Gi(e,t),this.getViews().forEach((i=>{this._pointerDownPerView.set(i.id,i.intersects(e,t));const r=i.isLayoutTransitionEnabled?i.position.initialX:i.position.x,n=i.isLayoutTransitionEnabled?i.position.initialY:i.position.y,a=new Gi(e-r,t-n);this._pointerX=e,this._pointerY=t,this._initialPointerPerView.set(i.id,a)}))})),e.subscribeToEvent(Ni,(()=>{this.getViews().forEach((e=>{this._pointerDownPerView.get(e.id)&&this._initialPointerPerView.get(e.id)&&(this._pointerDownPerView.set(e.id,!1),this._emitEvent(e,[]))}))})),e.subscribeToEvent(ki,(({x:e,y:t})=>{this._pointerX=e,this._pointerY=t,this.getViews().forEach((i=>{if(this._pointerDownPerView.get(i.id)&&this._initialPointerPerView.get(i.id)){this._viewPointerPositionLog.has(i.id)||this._viewPointerPositionLog.set(i.id,[]);const r=new Gi(e,t),n=this._viewPointerPositionLog.get(i.id);n&&n.push(new Gi(e,t));const a=n&&n.length>=2?n[n.length-2]:r.clone(),s=this._calculateDirections(a,r);this._emitEvent(i,s),clearTimeout(this._stopTimer),this._stopTimer=setTimeout((()=>{!0===this._pointerDownPerView.get(i.id)&&this._emitEvent(i,s,!0)}),120)}}))}))}_emitEvent(e,t,i=!1){const r=this._viewPointerPositionLog.get(e.id),n=r&&r.length>=2?r[r.length-2]:null,a=this._pointerX-this._initialPointerPerView.get(e.id).x,s=this._pointerY-this._initialPointerPerView.get(e.id).y,o=this._pointerX,l=this._pointerY,u=n?n.x-this._initialPointerPerView.get(e.id).x:a,h=n?n.y-this._initialPointerPerView.get(e.id).y:s,c=this._pointerY-this._initialPointer.y,d=this._pointerX-this._initialPointer.x,p=function(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}(this._initialPointer,{x:this._pointerX,y:this._pointerY}),f=!0===this._pointerDownPerView.get(e.id);f||this._viewPointerPositionLog.clear();const g={view:e,target:e.element,previousX:u,previousY:h,x:a,y:s,pointerX:o,pointerY:l,distance:p,width:d,height:c,isDragging:f,directions:t,stopped:i};this.emit(Gr,g)}_calculateDirections(e,t){const i={up:Gi.sub(new Gi(e.x,e.y-1),e),down:Gi.sub(new Gi(e.x,e.y+1),e),left:Gi.sub(new Gi(e.x-1,e.y),e),right:Gi.sub(new Gi(e.x+1,e.y),e)},r=Gi.sub(t,e).unitVector;return[{direction:"up",projection:r.dot(i.up)},{direction:"down",projection:r.dot(i.down)},{direction:"left",projection:r.dot(i.left)},{direction:"right",projection:r.dot(i.right)}].filter((e=>e.projection>0)).map((e=>e.direction))}}Li(Qr,"pluginName","DragEventPlugin");class en{constructor(e){Li(this,"view"),Li(this,"direction"),this.props=e,this.view=e.view,this.direction=e.direction}}Li(class extends Ki{constructor(){super(...arguments),Li(this,"_viewIsPointerDownMap",new Map),Li(this,"_viewPointerPositionLog",new Map),Li(this,"_targetPerView",new Map)}subscribeToEvents(e){e.subscribeToEvent(Ii,(({x:e,y:t,target:i})=>{this.getViews().forEach((r=>{this._targetPerView.set(r.id,i),r.intersects(e,t)&&this._viewIsPointerDownMap.set(r.id,!0)}))})),e.subscribeToEvent(ki,(({x:e,y:t})=>{this.getViews().forEach((i=>{this._viewIsPointerDownMap.get(i.id)&&(this._viewPointerPositionLog.has(i.id)||this._viewPointerPositionLog.set(i.id,[]),this._viewPointerPositionLog.get(i.id).push(new Gi(e,t)))}))})),e.subscribeToEvent(Ni,(({x:e,y:t})=>{this.getViews().forEach((i=>{if(!this._viewIsPointerDownMap.get(i.id)||!this._viewPointerPositionLog.has(i.id))return;const r=new Gi(e,t),n=this._viewPointerPositionLog.get(i.id),a=n[n.length-2]||r.clone(),s=this._targetPerView.get(i.id),o=function(e,t){const i={up:Gi.sub(new Gi(e.x,e.y-1),e),down:Gi.sub(new Gi(e.x,e.y+1),e),left:Gi.sub(new Gi(e.x-1,e.y),e),right:Gi.sub(new Gi(e.x+1,e.y),e)},r=Gi.sub(t,e).unitVector,n=["up","down","left","right"],a=[r.dot(i.up),r.dot(i.down),r.dot(i.left),r.dot(i.right)],s=Math.max(...a),o=a.indexOf(s),l=n[o],u=Gi.sub(t,e).magnitude;return{hasSwiped:r.dot(i[l])*u>30,direction:l}}(a,r);s&&i.hasElement(s)&&o.hasSwiped&&this.emit(en,{view:i,direction:o.direction}),this._viewPointerPositionLog.set(i.id,[]),this._viewIsPointerDownMap.set(i.id,!1)}))}))}},"pluginName","SwipeEventPlugin");class tn{constructor(e){Li(this,"view"),this.props=e,this.view=e.view}}Li(class extends Ki{subscribeToEvents(e){e.subscribeToEvent(Ci,(({x:e,y:t,target:i})=>{this.getViews().forEach((r=>{const n=i,a=r.element===n||r.element.contains(n);r.intersects(e,t)&&a&&this.emit(tn,{view:r})}))}))}},"pluginName","ClickEventPlugin");class rn{constructor(e){Si(this,"data"),this.data=e.data}}class nn{constructor(e){Si(this,"data"),this.data=e.data}}class an{}class sn{constructor(e){Si(this,"data"),this.data=e.data}}function on(e){return{map:new Map(e),array:Array.from(e).map((([e,t])=>({slotId:e,itemId:t}))),object:Array.from(e).reduce(((e,[t,i])=>(e[t]=i,e)),{})}}const ln=e=>{const t=e.useEventPlugin(Qr);t.on(Gr,(function(t){if(!v)return;const i=b().swapMode;a="handle"===t.view.name?t.view.getParent("item"):t.view,p||(p=a.getParent("slot")),null===m&&null===_&&(m=t.view.position.x-a.position.x,_=t.view.position.y-a.position.y);const R=r.some((e=>e.intersects(t.pointerX,t.pointerY)));t.isDragging?(y||(y=!0,e.emit(an,{})),h=t,V(),r.forEach((r=>{var n;if(!r.intersects(t.pointerX,t.pointerY))return void(r!==p&&r.element.removeAttribute("data-swapy-highlighted"));if(typeof r.element.dataset.swapyHighlighted>"u"&&(r.element.dataset.swapyHighlighted=""),!p||("stop"===i||"drop"!==i&&!c)&&!t.stopped)return;const s=r.element.dataset.swapySlot,o=null==(n=r.getChild("item"))?void 0:n.element.dataset.swapyItem,l=p.element.dataset.swapySlot,u=a.element.dataset.swapyItem;if(!s||!l||!u)return;const h=new Map(f);h.set(s,u),o?h.set(l,o):h.set(l,null),Di(h,g)||(w=E(new Map(h)),!d&&"drop"!==i&&w(),p=null,"drop"!==i&&e.emit(rn,{data:on(h)}))})),n.forEach((e=>{e.styles.zIndex=e===a?"2":""}))):(r.forEach((e=>{e.element.removeAttribute("data-swapy-highlighted")})),a.position.reset(),p=null,s=null,o=null,l=null,u=null,h=null,m=null,_=null,y=!1,"drop"===i&&(R||(w=E(new Map(f))),w(),e.emit(rn,{data:on(f)})),w=()=>{},e.emit(nn,{data:on(f)})),requestAnimationFrame((()=>{V()}))}));let i,r,n,a,s,o,l,u,h,c,d,p,f=new Map,g=new Map,m=null,_=null,v=!0,y=!1,w=()=>{};function b(){return{animation:i.data.configAnimation,continuousMode:typeof i.data.configContinuousMode<"u",manualSwap:typeof i.data.configManualSwap<"u",swapMode:i.data.configSwapMode}}function R(){const e=b().animation;return"dynamic"===e?{animator:"dynamic",config:{}}:"spring"===e?{animator:"spring",config:{damping:.7,stiffness:.62}}:{animator:"instant",config:{}}}function E(e){return()=>{f=e,g=new Map(f)}}function P(e){const i=e.getChild("item");i&&function(e){const i=R();e.styles.position="relative",e.styles.userSelect="none",e.styles.webkitUserSelect="none",e.position.setAnimator(i.animator,i.config),e.scale.setAnimator(i.animator,i.config),e.layoutTransition(!0),requestAnimationFrame((()=>{const i=e.getChild("handle");i?(t.addView(i),i.styles.touchAction="none"):(t.addView(e),e.styles.touchAction="none")}))}(i),f.set(e.element.dataset.swapySlot,i?i.element.dataset.swapyItem:null)}function x(){const t=R();e.getViews("root-child").forEach((e=>{e.position.setAnimator(t.animator,t.config),e.scale.setAnimator(t.animator,t.config),e.layoutTransition(!0)}))}function V(){if(!h)return;if(!s||!o){const e=a.getScroll();s=h.pointerX-a.position.x+e.x,o=h.pointerY-a.position.y+e.y}(!l||!u)&&(l=a.size.width,u=a.size.height);const e=a.size.width/l,t=a.size.height/u,i=s*(e-1),r=o*(t-1);a.position.set({x:h.x-i-(m||0),y:h.y-r-(_||0)},1!==a.scale.x||1!==a.scale.y)}e.api({setEnabled(e){v=e},setData(e){const t=function(e){if(e.map)return{map:new Map(e.map),array:Array.from(e.map).map((([e,t])=>({slotId:e,itemId:t}))),object:Array.from(e.map).reduce(((e,[t,i])=>(e[t]=i,e)),{})};if(e.object){const t={...e.object};return{map:new Map(Object.entries(t)),array:Object.entries(t).map((([e,t])=>({slotId:e,itemId:t}))),object:t}}{const t=[...e.array];return{map:new Map(t.map((({slotId:e,itemId:t})=>[e,t]))),array:t,object:t.reduce(((e,{slotId:t,itemId:i})=>(e[t]=i,e)),{})}}}(e);f=new Map(t.map),g=new Map(f)}}),e.setup((()=>{i=e.getView("root"),r=e.getViews("slot"),n=e.getViews("item"),c=b().continuousMode,d=b().manualSwap,r.forEach((e=>{P(e)})),x(),g=new Map(f),requestAnimationFrame((()=>{e.emit(sn,{data:on(f)})}))})),e.onViewAdded((t=>{if(e.initialized)if("item"===t.name){n=e.getViews("item");P(t.getParent("slot")),x(),g=new Map(f),e.emit(rn,{data:on(f)})}else"slot"===t.name&&(r=e.getViews("slot"))}))};let un;function hn(){return un?(un.updatePlugin(ln),un):(un=Zr.create(),un.addPlugin(ln),un.run(),un)}ln.pluginName="Swapy",ln.scope="root";const cn={animation:"dynamic",continuousMode:!0,manualSwap:!1,swapMode:"hover"};function dn(e,t={}){const i=Ti+++"";return e.dataset.velPluginKey=i,e.dataset.velPlugin="Swapy",e.dataset.velView="root",e.dataset.velDataConfigAnimation=t.animation,e.dataset.velDataConfigSwapMode=t.swapMode,t.continuousMode&&(e.dataset.velDataConfigContinuousMode="true"),t.manualSwap&&(e.dataset.velDataConfigManualSwap="true"),Array.from(e.querySelectorAll("[data-swapy-slot]")).forEach((e=>{e.dataset.velView="slot"})),Array.from(e.querySelectorAll("[data-swapy-item]")).forEach((e=>{e.dataset.velView="item",e.dataset.velLayoutId=e.dataset.swapyItem;const t=e.querySelector("[data-swapy-handle]");t&&(t.dataset.velView="handle")})),Array.from(e.querySelectorAll("[data-swapy-text]")).forEach((e=>{e.dataset.velLayoutPosition=""})),Array.from(e.querySelectorAll("[data-swapy-exclude]")).forEach((e=>{e.dataset.velIgnore=""})),i}function pn(e,t={}){if(!e)throw new Error("Cannot create a Swapy instance because the element you provided does not exist on the page!");const i={...cn,...t},r=e;if(!function(e){let t=!0;const i=e.querySelectorAll("[data-swapy-slot]");return 0===i.length&&(t=!1),i.forEach((e=>{const i=e,r=i.dataset.swapySlot;(!r||0===r.length)&&(t=!1);const n=i.children;n.length>1&&(t=!1);const a=n[0];a&&(!a.dataset.swapyItem||0===a.dataset.swapyItem.length)&&(t=!1)})),t}(r))throw new Error("Cannot create a Swapy instance because your HTML structure is invalid. Fix all above errors and then try!");const n=dn(r,i),a=new fn(r,n,i);return{onSwap(e){a.setSwapCallback(e)},onSwapEnd(e){a.setSwapEndCallback(e)},onSwapStart(e){a.setSwapStartCallback(e)},enable(e){a.setEnabled(e)},destroy(){a.destroy()},setData(e){a.setData(e)}}}class fn{constructor(e,t,i){Si(this,"_rootEl"),Si(this,"_veloxiApp"),Si(this,"_slotElMap"),Si(this,"_itemElMap"),Si(this,"_swapCallback"),Si(this,"_swapEndCallback"),Si(this,"_swapStartCallback"),Si(this,"_previousMap"),Si(this,"_pluginKey"),this._rootEl=e,this._veloxiApp=hn(),this._slotElMap=this._createSlotElMap(),this._itemElMap=this._createItemElMap(),this._pluginKey=t,this._veloxiApp.onPluginEvent(ln,sn,(({data:e})=>{this._previousMap=e.map}),t),this._veloxiApp.onPluginEvent(ln,rn,(e=>{var t;this._previousMap&&Di(this._previousMap,e.data.map)||(i.manualSwap||this._applyOrder(e.data.map),this._previousMap=e.data.map,null==(t=this._swapCallback)||t.call(this,e))}),t),this._veloxiApp.onPluginEvent(ln,nn,(e=>{var t;null==(t=this._swapEndCallback)||t.call(this,e)}),t),this._veloxiApp.onPluginEvent(ln,an,(()=>{var e;null==(e=this._swapStartCallback)||e.call(this)}),t),this.setupMutationObserver()}setupMutationObserver(){new MutationObserver((e=>{e.some((e=>"childList"===e.type))&&function(e){const t=Array.from(e.querySelectorAll("[data-swapy-slot]:not([data-vel-view])"));t.forEach((e=>{e.dataset.velView="slot"}));const i=Array.from(e.querySelectorAll("[data-swapy-item]:not([data-vel-view]"));return i.forEach((e=>{e.dataset.velView="item",e.dataset.velLayoutId=e.dataset.swapyItem;const t=e.querySelector("[data-swapy-handle]");t&&(t.dataset.velView="handle"),Array.from(e.querySelectorAll("[data-swapy-text]")).forEach((e=>{e.dataset.velLayoutPosition=""})),Array.from(e.querySelectorAll("[data-swapy-exclude]")).forEach((e=>{e.dataset.velIgnore=""}))})),i.length>0||t.length>0}(this._rootEl)&&(this._slotElMap=this._createSlotElMap(),this._itemElMap=this._createItemElMap())})).observe(this._rootEl,{childList:!0,subtree:!0})}setData(e){try{this._veloxiApp.getPlugin("Swapy",this._pluginKey).setData(e)}catch{}}destroy(){this._veloxiApp.destroy("Swapy")}setEnabled(e){try{this._veloxiApp.getPlugin("Swapy",this._pluginKey).setEnabled(e)}catch{}}setSwapCallback(e){this._swapCallback=e}setSwapEndCallback(e){this._swapEndCallback=e}setSwapStartCallback(e){this._swapStartCallback=e}_applyOrder(e){Array.from(e.keys()).forEach((t=>{var i;if(e.get(t)===(null==(i=this._previousMap)?void 0:i.get(t)))return;const r=e.get(t);if(!r)return;const n=this._slotElMap.get(t),a=this._itemElMap.get(r);!n||!a||(n.innerHTML="",n.appendChild(a))}))}_createSlotElMap(){return Array.from(this._rootEl.querySelectorAll("[data-swapy-slot]")).reduce(((e,t)=>(e.set(t.dataset.swapySlot,t),e)),new Map)}_createItemElMap(){return Array.from(this._rootEl.querySelectorAll("[data-swapy-item]")).reduce(((e,t)=>(e.set(t.dataset.swapyItem,t),e)),new Map)}}export{pn as K,Ft as L,_t as N,Mt as R,jt as a,ot as b,zt as c,Et as d,c as j,st as u};
