var e={exports:{}},t={};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var i=React,r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,i){var n,l={},u=null,h=null;for(n in void 0!==i&&(u=""+i),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(h=t.ref),t)a.call(t,n)&&!o.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:r,type:e,key:u,ref:h,props:l,_owner:s.current}}t.Fragment=n,t.jsx=l,t.jsxs=l,e.exports=t;var u,h,c=e.exports;
/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},d.apply(this,arguments)}(h=u||(u={})).Pop="POP",h.Push="PUSH",h.Replace="REPLACE";const p="popstate";function f(e){return void 0===e&&(e={}),function(e,t,i,r){void 0===r&&(r={});let{window:n=document.defaultView,v5Compat:a=!1}=r,s=n.history,o=u.Pop,l=null,h=c();null==h&&(h=0,s.replaceState(d({},s.state,{idx:h}),""));function c(){return(s.state||{idx:null}).idx}function f(){o=u.Pop;let e=c(),t=null==e?null:e-h;h=e,l&&l({action:o,location:R.location,delta:t})}function m(e,t){o=u.Push;let i=_(R.location,e,t);h=c()+1;let r=v(i,h),d=R.createHref(i);try{s.pushState(r,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;n.location.assign(d)}a&&l&&l({action:o,location:R.location,delta:1})}function w(e,t){o=u.Replace;let i=_(R.location,e,t);h=c();let r=v(i,h),n=R.createHref(i);s.replaceState(r,"",n),a&&l&&l({action:o,location:R.location,delta:0})}function b(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,i="string"==typeof e?e:y(e);return i=i.replace(/ $/,"%20"),g(t,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,t)}let R={get action(){return o},get location(){return e(n,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(p,f),l=e,()=>{n.removeEventListener(p,f),l=null}},createHref:e=>t(n,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:m,replace:w,go:e=>s.go(e)};return R}((function(e,t){let{pathname:i,search:r,hash:n}=e.location;return _("",{pathname:i,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:y(t)}),0,e)}function g(e,t){if(!1===e||null==e)throw new Error(t)}function m(e,t){if(!e)try{throw new Error(t)}catch(i){}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t,i,r){return void 0===i&&(i=null),d({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?w(t):t,{state:i,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function y(e){let{pathname:t="/",search:i="",hash:r=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function w(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var b,R;(R=b||(b={})).data="data",R.deferred="deferred",R.redirect="redirect",R.error="error";const E=new Set(["lazy","caseSensitive","path","id","index","children"]);function P(e,t,i,r){return void 0===i&&(i=[]),void 0===r&&(r={}),e.map(((e,n)=>{let a=[...i,String(n)],s="string"==typeof e.id?e.id:a.join("-");if(g(!0!==e.index||!e.children,"Cannot specify children on an index route"),g(!r[s],'Found a route id collision on id "'+s+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let i=d({},e,t(e),{id:s});return r[s]=i,i}{let i=d({},e,t(e),{id:s,children:void 0});return r[s]=i,e.children&&(i.children=P(e.children,t,a,r)),i}}))}function x(e,t,i){return void 0===i&&(i="/"),V(e,t,i,!1)}function V(e,t,i,r){let n=U(("string"==typeof t?w(t):t).pathname||"/",i);if(null==n)return null;let a=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=O(n);s=B(a[o],e,r)}return s}function S(e,t,i,r){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===r&&(r="");let n=(e,n,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};s.relativePath.startsWith("/")&&(g(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=q([r,s.relativePath]),l=i.concat(s);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),S(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var i;if(""!==e.path&&null!=(i=e.path)&&i.includes("?"))for(let r of T(e.path))n(e,t,r);else n(e,t)})),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[i,...r]=t,n=i.endsWith("?"),a=i.replace(/\?$/,"");if(0===r.length)return n?[a,""]:[a];let s=T(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),n&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const A=/^:[\w-]+$/,C=3,L=2,M=1,k=10,D=-2,I=e=>"*"===e;function N(e,t){let i=e.split("/"),r=i.length;return i.some(I)&&(r+=D),t&&(r+=L),i.filter((e=>!I(e))).reduce(((e,t)=>e+(A.test(t)?C:""===t?M:k)),r)}function B(e,t,i){void 0===i&&(i=!1);let{routesMeta:r}=e,n={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===a?t:t.slice(a.length)||"/",h=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),c=e.route;if(!h&&l&&i&&!r[r.length-1].route.index&&(h=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),s.push({params:n,pathname:q([a,h.pathname]),pathnameBase:H(q([a,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(a=q([a,h.pathnameBase]))}return s}function F(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(r.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let a=n[0],s=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce(((e,t,i)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=o[i]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[i];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:s,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=e.charAt(i);return r&&"/"!==r?null:e.slice(i)||"/"}function z(e,t,i,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function $(e,t){let i=j(e);return t?i.map(((e,t)=>t===i.length-1?e.pathname:e.pathnameBase)):i.map((e=>e.pathnameBase))}function W(e,t,i,r){let n;void 0===r&&(r=!1),"string"==typeof e?n=w(e):(n=d({},e),g(!n.pathname||!n.pathname.includes("?"),z("?","pathname","search",n)),g(!n.pathname||!n.pathname.includes("#"),z("#","pathname","hash",n)),g(!n.search||!n.search.includes("#"),z("#","search","hash",n)));let a,s=""===e||""===n.pathname,o=s?"/":n.pathname;if(null==o)a=i;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:i,search:r="",hash:n=""}="string"==typeof e?w(e):e,a=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:a,search:Y(r),hash:X(n)}}(n,a),u=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&i.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const q=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class K{constructor(e,t,i,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function J(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const Z=["post","put","patch","delete"],G=new Set(Z),Q=["get",...Z],ee=new Set(Q),te=new Set([301,302,303,307,308]),ie=new Set([307,308]),re={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ne={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ae={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),le="remix-router-transitions";function ue(e){const t=e.window?e.window:"undefined"!=typeof window?window:void 0,i=void 0!==t&&void 0!==t.document&&void 0!==t.document.createElement,r=!i;let n;if(g(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)n=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;n=e=>({hasErrorBoundary:t(e)})}else n=oe;let a,s,o,l={},h=P(e.routes,n,void 0,l),c=e.basename||"/",p=e.unstable_dataStrategy||ve,f=e.unstable_patchRoutesOnNavigation,v=d({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),y=null,w=new Set,R=new Set,S=null,T=null,A=null,C=null!=e.hydrationData,L=x(h,e.history.location,c),M=null;if(null==L&&!f){let t=Ae(404,{pathname:e.history.location.pathname}),{matches:i,route:r}=Te(h);L=i,M={[r.id]:t}}if(L&&!e.hydrationData){ct(L,h,e.history.location.pathname).active&&(L=null)}if(L)if(L.some((e=>e.route.lazy)))s=!1;else if(L.some((e=>e.route.loader)))if(v.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,i=e.hydrationData?e.hydrationData.errors:null,r=e=>!e.route.loader||("function"!=typeof e.route.loader||!0!==e.route.loader.hydrate)&&(t&&void 0!==t[e.route.id]||i&&void 0!==i[e.route.id]);if(i){let e=L.findIndex((e=>void 0!==i[e.route.id]));s=L.slice(0,e+1).every(r)}else s=L.every(r)}else s=null!=e.hydrationData;else s=!0;else if(s=!1,L=[],v.v7_partialHydration){let t=ct(null,h,e.history.location.pathname);t.active&&t.matches&&(L=t.matches)}let k,D,I={historyAction:e.history.action,location:e.history.location,matches:L,initialized:s,navigation:re,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||M,fetchers:new Map,blockers:new Map},N=u.Pop,B=!1,F=!1,O=new Map,z=null,j=!1,$=!1,W=[],q=new Set,H=new Map,Y=0,X=-1,K=new Map,Z=new Set,G=new Map,Q=new Map,ee=new Set,te=new Map,ue=new Map,pe=new Map;function fe(e,t){void 0===t&&(t={}),I=d({},I,e);let i=[],r=[];v.v7_fetcherPersist&&I.fetchers.forEach(((e,t)=>{"idle"===e.state&&(ee.has(t)?r.push(t):i.push(t))})),[...w].forEach((e=>e(I,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),v.v7_fetcherPersist&&(i.forEach((e=>I.fetchers.delete(e))),r.forEach((e=>Ge(e))))}function Re(t,i,r){var n,s;let o,{flushSync:l}=void 0===r?{}:r,c=null!=I.actionData&&null!=I.navigation.formMethod&&Fe(I.navigation.formMethod)&&"loading"===I.navigation.state&&!0!==(null==(n=t.state)?void 0:n._isRedirect);o=i.actionData?Object.keys(i.actionData).length>0?i.actionData:null:c?I.actionData:null;let p=i.loaderData?xe(I.loaderData,i.loaderData,i.matches||[],i.errors):I.loaderData,f=I.blockers;f.size>0&&(f=new Map(f),f.forEach(((e,t)=>f.set(t,ae))));let g,m=!0===B||null!=I.navigation.formMethod&&Fe(I.navigation.formMethod)&&!0!==(null==(s=t.state)?void 0:s._isRedirect);if(a&&(h=a,a=void 0),j||N===u.Pop||(N===u.Push?e.history.push(t,t.state):N===u.Replace&&e.history.replace(t,t.state)),N===u.Pop){let e=O.get(I.location.pathname);e&&e.has(t.pathname)?g={currentLocation:I.location,nextLocation:t}:O.has(t.pathname)&&(g={currentLocation:t,nextLocation:I.location})}else if(F){let e=O.get(I.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),O.set(I.location.pathname,e)),g={currentLocation:I.location,nextLocation:t}}fe(d({},i,{actionData:o,loaderData:p,historyAction:N,location:t,initialized:!0,navigation:re,revalidation:"idle",restoreScrollPosition:ht(t,i.matches||I.matches),preventScrollReset:m,blockers:f}),{viewTransitionOpts:g,flushSync:!0===l}),N=u.Pop,B=!1,F=!1,j=!1,$=!1,W=[]}async function Ee(t,i,r){k&&k.abort(),k=null,N=t,j=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(S&&A){let i=ut(e,t);S[i]=A()}}(I.location,I.matches),B=!0===(r&&r.preventScrollReset),F=!0===(r&&r.enableViewTransition);let n=a||h,s=r&&r.overrideNavigation,o=x(n,i,c),l=!0===(r&&r.flushSync),p=ct(o,n,i.pathname);if(p.active&&p.matches&&(o=p.matches),!o){let{error:e,notFoundMatches:t,route:r}=st(i.pathname);return void Re(i,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:l})}if(I.initialized&&!$&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(I.location,i)&&!(r&&r.submission&&Fe(r.submission.formMethod)))return void Re(i,{matches:o},{flushSync:l});k=new AbortController;let f,g=be(e.history,i,k.signal,r&&r.submission);if(r&&r.pendingError)f=[Se(o).route.id,{type:b.error,error:r.pendingError}];else if(r&&r.submission&&Fe(r.submission.formMethod)){let t=await async function(e,t,i,r,n,a){void 0===a&&(a={});Xe();let s,o=function(e,t){let i={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return i}(t,i);if(fe({navigation:o},{flushSync:!0===a.flushSync}),n){let i=await dt(r,t.pathname,e.signal);if("aborted"===i.type)return{shortCircuited:!0};if("error"===i.type){let{boundaryId:e,error:r}=ot(t.pathname,i);return{matches:i.partialMatches,pendingActionResult:[e,{type:b.error,error:r}]}}if(!i.matches){let{notFoundMatches:e,error:i,route:r}=st(t.pathname);return{matches:e,pendingActionResult:[r.id,{type:b.error,error:i}]}}r=i.matches}let l=$e(r,t);if(l.route.action||l.route.lazy){if(s=(await Be("action",I,e,[l],r,null))[l.route.id],e.signal.aborted)return{shortCircuited:!0}}else s={type:b.error,error:Ae(405,{method:e.method,pathname:t.pathname,routeId:l.route.id})};if(Ie(s)){let t;if(a&&null!=a.replace)t=a.replace;else{t=we(s.response.headers.get("Location"),new URL(e.url),c)===I.location.pathname+I.location.search}return await Ne(e,s,!0,{submission:i,replace:t}),{shortCircuited:!0}}if(ke(s))throw Ae(400,{type:"defer-action"});if(De(s)){let e=Se(r,l.route.id);return!0!==(a&&a.replace)&&(N=u.Push),{matches:r,pendingActionResult:[e.route.id,s]}}return{matches:r,pendingActionResult:[l.route.id,s]}}(g,i,r.submission,o,p.active,{replace:r.replace,flushSync:l});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,r]=t.pendingActionResult;if(De(r)&&J(r.error)&&404===r.error.status)return k=null,void Re(i,{matches:t.matches,loaderData:{},errors:{[e]:r.error}})}o=t.matches||o,f=t.pendingActionResult,s=qe(i,r.submission),l=!1,p.active=!1,g=be(e.history,g.url,g.signal)}let{shortCircuited:m,matches:_,loaderData:y,errors:w}=await async function(t,i,r,n,s,o,l,u,p,f,g){let m=s||qe(i,o),_=o||l||We(m),y=!(j||v.v7_partialHydration&&p);if(n){if(y){let e=Le(g);fe(d({navigation:m},void 0!==e?{actionData:e}:{}),{flushSync:f})}let e=await dt(r,i.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let{boundaryId:t,error:r}=ot(i.pathname,e);return{matches:e.partialMatches,loaderData:{},errors:{[t]:r}}}if(!e.matches){let{error:e,notFoundMatches:t,route:r}=st(i.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}r=e.matches}let w=a||h,[b,R]=de(e.history,I,r,_,i,v.v7_partialHydration&&!0===p,v.v7_skipActionErrorRevalidation,$,W,q,ee,G,Z,w,c,g);if(lt((e=>!(r&&r.some((t=>t.route.id===e)))||b&&b.some((t=>t.route.id===e)))),X=++Y,0===b.length&&0===R.length){let e=tt();return Re(i,d({matches:r,loaderData:{},errors:g&&De(g[1])?{[g[0]]:g[1].error}:null},Ve(g),e?{fetchers:new Map(I.fetchers)}:{}),{flushSync:f}),{shortCircuited:!0}}if(y){let e={};if(!n){e.navigation=m;let t=Le(g);void 0!==t&&(e.actionData=t)}R.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=I.fetchers.get(e.key),i=He(void 0,t?t.data:void 0);I.fetchers.set(e.key,i)})),new Map(I.fetchers)}(R)),fe(e,{flushSync:f})}R.forEach((e=>{H.has(e.key)&&Qe(e.key),e.controller&&H.set(e.key,e.controller)}));let E=()=>R.forEach((e=>Qe(e.key)));k&&k.signal.addEventListener("abort",E);let{loaderResults:P,fetcherResults:x}=await je(I,r,b,R,t);if(t.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",E);R.forEach((e=>H.delete(e.key)));let V=Ce(P);if(V)return await Ne(t,V.result,!0,{replace:u}),{shortCircuited:!0};if(V=Ce(x),V)return Z.add(V.key),await Ne(t,V.result,!0,{replace:u}),{shortCircuited:!0};let{loaderData:S,errors:T}=Pe(I,r,b,P,g,R,x,te);te.forEach(((e,t)=>{e.subscribe((i=>{(i||e.done)&&te.delete(t)}))})),v.v7_partialHydration&&p&&I.errors&&Object.entries(I.errors).filter((e=>{let[t]=e;return!b.some((e=>e.route.id===t))})).forEach((e=>{let[t,i]=e;T=Object.assign(T||{},{[t]:i})}));let A=tt(),C=it(X),L=A||C||R.length>0;return d({matches:r,loaderData:S,errors:T},L?{fetchers:new Map(I.fetchers)}:{})}(g,i,o,p.active,s,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,l,f);m||(k=null,Re(i,d({matches:_||o},Ve(f),{loaderData:y,errors:w})))}function Le(e){return e&&!De(e[1])?{[e[0]]:e[1].data}:I.actionData?0===Object.keys(I.actionData).length?null:I.actionData:void 0}async function Ne(r,n,a,s){let{submission:o,fetcherSubmission:l,replace:h}=void 0===s?{}:s;n.response.headers.has("X-Remix-Revalidate")&&($=!0);let p=n.response.headers.get("Location");g(p,"Expected a Location header on the redirect Response"),p=we(p,new URL(r.url),c);let f=_(I.location,p,{_isRedirect:!0});if(i){let i=!1;if(n.response.headers.has("X-Remix-Reload-Document"))i=!0;else if(se.test(p)){const r=e.history.createURL(p);i=r.origin!==t.location.origin||null==U(r.pathname,c)}if(i)return void(h?t.location.replace(p):t.location.assign(p))}k=null;let m=!0===h||n.response.headers.has("X-Remix-Replace")?u.Replace:u.Push,{formMethod:v,formAction:y,formEncType:w}=I.navigation;!o&&!l&&v&&y&&w&&(o=We(I.navigation));let b=o||l;if(ie.has(n.response.status)&&b&&Fe(b.formMethod))await Ee(m,f,{submission:d({},b,{formAction:p}),preventScrollReset:B,enableViewTransition:a?F:void 0});else{let e=qe(f,o);await Ee(m,f,{overrideNavigation:e,fetcherSubmission:l,preventScrollReset:B,enableViewTransition:a?F:void 0})}}async function Be(e,t,i,r,a,s){let o,u={};try{o=await async function(e,t,i,r,n,a,s,o,l,u){let h=a.map((e=>e.route.lazy?async function(e,t,i){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let n=i[e.id];g(n,"No route found in manifest");let a={};for(let s in r){let e=void 0!==n[s]&&"hasErrorBoundary"!==s;m(!e,'Route "'+n.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),e||E.has(s)||(a[s]=r[s])}Object.assign(n,a),Object.assign(n,d({},t(n),{lazy:void 0}))}(e.route,l,o):void 0)),c=a.map(((e,i)=>{let a=h[i],s=n.some((t=>t.route.id===e.route.id)),o=async i=>(i&&"GET"===r.method&&(e.route.lazy||e.route.loader)&&(s=!0),s?async function(e,t,i,r,n,a){let s,o,l=r=>{let s,l=new Promise(((e,t)=>s=t));o=()=>s(),t.signal.addEventListener("abort",o);let u=n=>"function"!=typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+i.route.id+"]")):r({request:t,params:i.params,context:a},...void 0!==n?[n]:[]),h=(async()=>{try{return{type:"data",result:await(n?n((e=>u(e))):u())}}catch(e){return{type:"error",result:e}}})();return Promise.race([h,l])};try{let n=i.route[e];if(r)if(n){let e,[t]=await Promise.all([l(n).catch((t=>{e=t})),r]);if(void 0!==e)throw e;s=t}else{if(await r,n=i.route[e],!n){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw Ae(405,{method:t.method,pathname:r,routeId:i.route.id})}return{type:b.data,result:void 0}}s=await l(n)}else{if(!n){let e=new URL(t.url);throw Ae(404,{pathname:e.pathname+e.search})}s=await l(n)}g(void 0!==s.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+i.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(u){return{type:b.error,result:u}}finally{o&&t.signal.removeEventListener("abort",o)}return s}(t,r,e,a,i,u):Promise.resolve({type:b.data,result:void 0}));return d({},e,{shouldLoad:s,resolve:o})})),p=await e({matches:c,request:r,params:a[0].params,fetcherKey:s,context:u});try{await Promise.all(h)}catch(f){}return p}(p,e,0,i,r,a,s,l,n)}catch(h){return r.forEach((e=>{u[e.route.id]={type:b.error,error:h}})),u}for(let[n,l]of Object.entries(o))if(Me(l)){let e=l.result;u[n]={type:b.redirect,response:ye(e,i,n,a,c,v.v7_relativeSplatPath)}}else u[n]=await _e(l);return u}async function je(t,i,r,n,a){let s=t.matches,o=Be("loader",0,a,r,i,null),l=Promise.all(n.map((async t=>{if(t.matches&&t.match&&t.controller){let i=(await Be("loader",0,be(e.history,t.path,t.controller.signal),[t.match],t.matches,t.key))[t.match.route.id];return{[t.key]:i}}return Promise.resolve({[t.key]:{type:b.error,error:Ae(404,{pathname:t.path})}})}))),u=await o,h=(await l).reduce(((e,t)=>Object.assign(e,t)),{});return await Promise.all([Oe(i,u,a.signal,s,t.loaderData),Ue(i,h,n)]),{loaderResults:u,fetcherResults:h}}function Xe(){$=!0,W.push(...lt()),G.forEach(((e,t)=>{H.has(t)&&(q.add(t),Qe(t))}))}function Ke(e,t,i){void 0===i&&(i={}),I.fetchers.set(e,t),fe({fetchers:new Map(I.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function Je(e,t,i,r){void 0===r&&(r={});let n=Se(I.matches,t);Ge(e),fe({errors:{[n.route.id]:i},fetchers:new Map(I.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Ze(e){return v.v7_fetcherPersist&&(Q.set(e,(Q.get(e)||0)+1),ee.has(e)&&ee.delete(e)),I.fetchers.get(e)||ne}function Ge(e){let t=I.fetchers.get(e);!H.has(e)||t&&"loading"===t.state&&K.has(e)||Qe(e),G.delete(e),K.delete(e),Z.delete(e),ee.delete(e),q.delete(e),I.fetchers.delete(e)}function Qe(e){let t=H.get(e);g(t,"Expected fetch controller: "+e),t.abort(),H.delete(e)}function et(e){for(let t of e){let e=Ye(Ze(t).data);I.fetchers.set(t,e)}}function tt(){let e=[],t=!1;for(let i of Z){let r=I.fetchers.get(i);g(r,"Expected fetcher: "+i),"loading"===r.state&&(Z.delete(i),e.push(i),t=!0)}return et(e),t}function it(e){let t=[];for(let[i,r]of K)if(r<e){let e=I.fetchers.get(i);g(e,"Expected fetcher: "+i),"loading"===e.state&&(Qe(i),K.delete(i),t.push(i))}return et(t),t.length>0}function rt(e){I.blockers.delete(e),ue.delete(e)}function nt(e,t){let i=I.blockers.get(e)||ae;g("unblocked"===i.state&&"blocked"===t.state||"blocked"===i.state&&"blocked"===t.state||"blocked"===i.state&&"proceeding"===t.state||"blocked"===i.state&&"unblocked"===t.state||"proceeding"===i.state&&"unblocked"===t.state,"Invalid blocker state transition: "+i.state+" -> "+t.state);let r=new Map(I.blockers);r.set(e,t),fe({blockers:r})}function at(e){let{currentLocation:t,nextLocation:i,historyAction:r}=e;if(0===ue.size)return;ue.size>1&&m(!1,"A router only supports one blocker at a time");let n=Array.from(ue.entries()),[a,s]=n[n.length-1],o=I.blockers.get(a);return o&&"proceeding"===o.state?void 0:s({currentLocation:t,nextLocation:i,historyAction:r})?a:void 0}function st(e){let t=Ae(404,{pathname:e}),i=a||h,{matches:r,route:n}=Te(i);return lt(),{notFoundMatches:r,route:n,error:t}}function ot(e,t){return{boundaryId:Se(t.partialMatches).route.id,error:Ae(400,{type:"route-discovery",pathname:e,message:null!=t.error&&"message"in t.error?t.error:String(t.error)})}}function lt(e){let t=[];return te.forEach(((i,r)=>{e&&!e(r)||(i.cancel(),t.push(r),te.delete(r))})),t}function ut(e,t){if(T){return T(e,t.map((e=>function(e,t){let{route:i,pathname:r,params:n}=e;return{id:i.id,pathname:r,params:n,data:t[i.id],handle:i.handle}}(e,I.loaderData))))||e.key}return e.key}function ht(e,t){if(S){let i=ut(e,t),r=S[i];if("number"==typeof r)return r}return null}function ct(e,t,i){if(f){if(R.has(i))return{active:!1,matches:e};if(!e){return{active:!0,matches:V(t,i,c,!0)||[]}}if(Object.keys(e[0].params).length>0){return{active:!0,matches:V(t,i,c,!0)}}}return{active:!1,matches:null}}async function dt(e,t,i){let r=e;for(;;){let e=null==a,o=a||h;try{await ge(f,t,r,o,l,n,pe,i)}catch(s){return{type:"error",error:s,partialMatches:r}}finally{e&&(h=[...h])}if(i.aborted)return{type:"aborted"};let u=x(o,t,c);if(u)return pt(t,R),{type:"success",matches:u};let d=V(o,t,c,!0);if(!d||r.length===d.length&&r.every(((e,t)=>e.route.id===d[t].route.id)))return pt(t,R),{type:"success",matches:null};r=d}}function pt(e,t){if(t.size>=1e3){let e=t.values().next().value;t.delete(e)}t.add(e)}return o={get basename(){return c},get future(){return v},get state(){return I},get routes(){return h},get window(){return t},initialize:function(){if(y=e.history.listen((t=>{let{action:i,location:r,delta:n}=t;if(D)return D(),void(D=void 0);m(0===ue.size||null!=n,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a=at({currentLocation:I.location,nextLocation:r,historyAction:i});if(a&&null!=n){let t=new Promise((e=>{D=e}));return e.history.go(-1*n),void nt(a,{state:"blocked",location:r,proceed(){nt(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.then((()=>e.history.go(n)))},reset(){let e=new Map(I.blockers);e.set(a,ae),fe({blockers:e})}})}return Ee(i,r)})),i){!function(e,t){try{let i=e.sessionStorage.getItem(le);if(i){let e=JSON.parse(i);for(let[i,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(i,new Set(r||[]))}}catch(i){}}(t,O);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,i]of t)r[e]=[...i];try{e.sessionStorage.setItem(le,JSON.stringify(r))}catch(i){m(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}
/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */(t,O);t.addEventListener("pagehide",e),z=()=>t.removeEventListener("pagehide",e)}return I.initialized||Ee(u.Pop,I.location,{initialHydration:!0}),o},subscribe:function(e){return w.add(e),()=>w.delete(e)},enableScrollRestoration:function(e,t,i){if(S=e,A=t,T=i||null,!C&&I.navigation===re){C=!0;let e=ht(I.location,I.matches);null!=e&&fe({restoreScrollPosition:e})}return()=>{S=null,A=null,T=null}},navigate:async function t(i,r){if("number"==typeof i)return void e.history.go(i);let n=he(I.location,I.matches,c,v.v7_prependBasename,i,v.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:a,submission:s,error:o}=ce(v.v7_normalizeFormMethod,!1,n,r),l=I.location,h=_(I.location,a,r&&r.state);h=d({},h,e.history.encodeLocation(h));let p=r&&null!=r.replace?r.replace:void 0,f=u.Push;!0===p?f=u.Replace:!1===p||null!=s&&Fe(s.formMethod)&&s.formAction===I.location.pathname+I.location.search&&(f=u.Replace);let g=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,m=!0===(r&&r.unstable_flushSync),y=at({currentLocation:l,nextLocation:h,historyAction:f});if(!y)return await Ee(f,h,{submission:s,pendingError:o,preventScrollReset:g,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:m});nt(y,{state:"blocked",location:h,proceed(){nt(y,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),t(i,r)},reset(){let e=new Map(I.blockers);e.set(y,ae),fe({blockers:e})}})},fetch:function(t,i,n,s){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(t)&&Qe(t);let o=!0===(s&&s.unstable_flushSync),l=a||h,u=he(I.location,I.matches,c,v.v7_prependBasename,n,v.v7_relativeSplatPath,i,null==s?void 0:s.relative),d=x(l,u,c),p=ct(d,l,u);if(p.active&&p.matches&&(d=p.matches),!d)return void Je(t,i,Ae(404,{pathname:u}),{flushSync:o});let{path:f,submission:m,error:_}=ce(v.v7_normalizeFormMethod,!0,u,s);if(_)return void Je(t,i,_,{flushSync:o});let y=$e(d,f);B=!0===(s&&s.preventScrollReset),m&&Fe(m.formMethod)?async function(t,i,r,n,s,o,l,u){function d(e){if(!e.route.action&&!e.route.lazy){let e=Ae(405,{method:u.formMethod,pathname:r,routeId:i});return Je(t,i,e,{flushSync:l}),!0}return!1}if(Xe(),G.delete(t),!o&&d(n))return;let p=I.fetchers.get(t);Ke(t,function(e,t){let i={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return i}(u,p),{flushSync:l});let f=new AbortController,m=be(e.history,r,f.signal,u);if(o){let e=await dt(s,r,m.signal);if("aborted"===e.type)return;if("error"===e.type){let{error:n}=ot(r,e);return void Je(t,i,n,{flushSync:l})}if(!e.matches)return void Je(t,i,Ae(404,{pathname:r}),{flushSync:l});if(d(n=$e(s=e.matches,r)))return}H.set(t,f);let _=Y,y=await Be("action",I,m,[n],s,t),w=y[n.route.id];if(m.signal.aborted)return void(H.get(t)===f&&H.delete(t));if(v.v7_fetcherPersist&&ee.has(t)){if(Ie(w)||De(w))return void Ke(t,Ye(void 0))}else{if(Ie(w))return H.delete(t),X>_?void Ke(t,Ye(void 0)):(Z.add(t),Ke(t,He(u)),Ne(m,w,!1,{fetcherSubmission:u}));if(De(w))return void Je(t,i,w.error)}if(ke(w))throw Ae(400,{type:"defer-action"});let b=I.navigation.location||I.location,R=be(e.history,b,f.signal),E=a||h,P="idle"!==I.navigation.state?x(E,I.navigation.location,c):I.matches;g(P,"Didn't find any matches after fetcher action");let V=++Y;K.set(t,V);let S=He(u,w.data);I.fetchers.set(t,S);let[T,A]=de(e.history,I,P,u,b,!1,v.v7_skipActionErrorRevalidation,$,W,q,ee,G,Z,E,c,[n.route.id,w]);A.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,i=I.fetchers.get(t),r=He(void 0,i?i.data:void 0);I.fetchers.set(t,r),H.has(t)&&Qe(t),e.controller&&H.set(t,e.controller)})),fe({fetchers:new Map(I.fetchers)});let C=()=>A.forEach((e=>Qe(e.key)));f.signal.addEventListener("abort",C);let{loaderResults:L,fetcherResults:M}=await je(I,P,T,A,R);if(f.signal.aborted)return;f.signal.removeEventListener("abort",C),K.delete(t),H.delete(t),A.forEach((e=>H.delete(e.key)));let D=Ce(L);if(D)return Ne(R,D.result,!1);if(D=Ce(M),D)return Z.add(D.key),Ne(R,D.result,!1);let{loaderData:B,errors:F}=Pe(I,P,T,L,void 0,A,M,te);if(I.fetchers.has(t)){let e=Ye(w.data);I.fetchers.set(t,e)}it(V),"loading"===I.navigation.state&&V>X?(g(N,"Expected pending action"),k&&k.abort(),Re(I.navigation.location,{matches:P,loaderData:B,errors:F,fetchers:new Map(I.fetchers)})):(fe({errors:F,loaderData:xe(I.loaderData,B,P,F),fetchers:new Map(I.fetchers)}),$=!1)}(t,i,f,y,d,p.active,o,m):(G.set(t,{routeId:i,path:f}),async function(t,i,r,n,a,s,o,l){let u=I.fetchers.get(t);Ke(t,He(l,u?u.data:void 0),{flushSync:o});let h=new AbortController,c=be(e.history,r,h.signal);if(s){let e=await dt(a,r,c.signal);if("aborted"===e.type)return;if("error"===e.type){let{error:n}=ot(r,e);return void Je(t,i,n,{flushSync:o})}if(!e.matches)return void Je(t,i,Ae(404,{pathname:r}),{flushSync:o});n=$e(a=e.matches,r)}H.set(t,h);let d=Y,p=await Be("loader",I,c,[n],a,t),f=p[n.route.id];ke(f)&&(f=await ze(f,c.signal,!0)||f);H.get(t)===h&&H.delete(t);if(c.signal.aborted)return;if(ee.has(t))return void Ke(t,Ye(void 0));if(Ie(f))return X>d?void Ke(t,Ye(void 0)):(Z.add(t),void(await Ne(c,f,!1)));if(De(f))return void Je(t,i,f.error);g(!ke(f),"Unhandled fetcher deferred data"),Ke(t,Ye(f.data))}(t,i,f,y,d,p.active,o,m))},revalidate:function(){Xe(),fe({revalidation:"loading"}),"submitting"!==I.navigation.state&&("idle"!==I.navigation.state?Ee(N||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:!0===F}):Ee(I.historyAction,I.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Ze,deleteFetcher:function(e){if(v.v7_fetcherPersist){let t=(Q.get(e)||0)-1;t<=0?(Q.delete(e),ee.add(e)):Q.set(e,t)}else Ge(e);fe({fetchers:new Map(I.fetchers)})},dispose:function(){y&&y(),z&&z(),w.clear(),k&&k.abort(),I.fetchers.forEach(((e,t)=>Ge(t))),I.blockers.forEach(((e,t)=>rt(t)))},getBlocker:function(e,t){let i=I.blockers.get(e)||ae;return ue.get(e)!==t&&ue.set(e,t),i},deleteBlocker:rt,patchRoutes:function(e,t){let i=null==a;me(e,t,a||h,l,n),i&&(h=[...h],fe({}))},_internalFetchControllers:H,_internalActiveDeferreds:te,_internalSetRoutes:function(e){l={},a=P(e,n,void 0,l)}},o}function he(e,t,i,r,n,a,s,o){let l,u;if(s){l=[];for(let e of t)if(l.push(e),e.route.id===s){u=e;break}}else l=t,u=t[t.length-1];let h=W(n||".",$(l,a),U(e.pathname,i)||e.pathname,"path"===o);return null==n&&(h.search=e.search,h.hash=e.hash),null!=n&&""!==n&&"."!==n||!u||!u.route.index||je(h.search)||(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==i&&(h.pathname="/"===h.pathname?i:q([i,h.pathname])),y(h)}function ce(e,t,i,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:i};if(r.formMethod&&(n=r.formMethod,!ee.has(n.toLowerCase())))return{path:i,error:Ae(405,{method:r.formMethod})};var n;let a,s,o=()=>({path:i,error:Ae(400,{type:"invalid-body"})}),l=r.formMethod||"get",u=e?l.toUpperCase():l.toLowerCase(),h=Le(i);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Fe(u))return o();let e="string"==typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[i,r]=t;return""+e+i+"="+r+"\n"}),""):String(r.body);return{path:i,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Fe(u))return o();try{let e="string"==typeof r.body?JSON.parse(r.body):r.body;return{path:i,submission:{formMethod:u,formAction:h,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(p){return o()}}}if(g("function"==typeof FormData,"FormData is not available in this environment"),r.formData)a=Re(r.formData),s=r.formData;else if(r.body instanceof FormData)a=Re(r.body),s=r.body;else if(r.body instanceof URLSearchParams)a=r.body,s=Ee(a);else if(null==r.body)a=new URLSearchParams,s=new FormData;else try{a=new URLSearchParams(r.body),s=Ee(a)}catch(p){return o()}let c={formMethod:u,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(Fe(c.formMethod))return{path:i,submission:c};let d=w(i);return t&&d.search&&je(d.search)&&a.append("index",""),d.search="?"+a,{path:y(d),submission:c}}function de(e,t,i,r,n,a,s,o,l,u,h,c,p,f,g,m){let v=m?De(m[1])?m[1].error:m[1].data:void 0,_=e.createURL(t.location),y=e.createURL(n),w=m&&De(m[1])?m[0]:void 0,b=w?function(e,t){let i=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(i=e.slice(0,r))}return i}(i,w):i,R=m?m[1].statusCode:void 0,E=s&&R&&R>=400,P=b.filter(((e,i)=>{let{route:n}=e;if(n.lazy)return!0;if(null==n.loader)return!1;if(a)return!("function"==typeof n.loader&&!n.loader.hydrate)||void 0===t.loaderData[n.id]&&(!t.errors||void 0===t.errors[n.id]);if(function(e,t,i){let r=!t||i.route.id!==t.route.id,n=void 0===e[i.route.id];return r||n}(t.loaderData,t.matches[i],e)||l.some((t=>t===e.route.id)))return!0;let s=t.matches[i],u=e;return fe(e,d({currentUrl:_,currentParams:s.params,nextUrl:y,nextParams:u.params},r,{actionResult:v,actionStatus:R,defaultShouldRevalidate:!E&&(o||_.pathname+_.search===y.pathname+y.search||_.search!==y.search||pe(s,u))}))})),V=[];return c.forEach(((e,n)=>{if(a||!i.some((t=>t.route.id===e.routeId))||h.has(n))return;let s=x(f,e.path,g);if(!s)return void V.push({key:n,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(n),c=$e(s,e.path),m=!1;p.has(n)?m=!1:u.has(n)?(u.delete(n),m=!0):m=l&&"idle"!==l.state&&void 0===l.data?o:fe(c,d({currentUrl:_,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:i[i.length-1].params},r,{actionResult:v,actionStatus:R,defaultShouldRevalidate:!E&&o})),m&&V.push({key:n,routeId:e.routeId,path:e.path,matches:s,match:c,controller:new AbortController})})),[P,V]}function pe(e,t){let i=e.route.path;return e.pathname!==t.pathname||null!=i&&i.endsWith("*")&&e.params["*"]!==t.params["*"]}function fe(e,t){if(e.route.shouldRevalidate){let i=e.route.shouldRevalidate(t);if("boolean"==typeof i)return i}return t.defaultShouldRevalidate}async function ge(e,t,i,r,n,a,s,o){let l=[t,...i.map((e=>e.route.id))].join("-");try{let h=s.get(l);h||(h=e({path:t,matches:i,patch:(e,t)=>{o.aborted||me(e,t,r,n,a)}}),s.set(l,h)),h&&("object"==typeof(u=h)&&null!=u&&"then"in u)&&await h}finally{s.delete(l)}var u}function me(e,t,i,r,n){if(e){var a;let i=r[e];g(i,"No route found to patch children into: routeId = "+e);let s=P(t,n,[e,"patch",String((null==(a=i.children)?void 0:a.length)||"0")],r);i.children?i.children.push(...s):i.children=s}else{let e=P(t,n,["patch",String(i.length||"0")],r);i.push(...e)}}async function ve(e){let{matches:t}=e,i=t.filter((e=>e.shouldLoad));return(await Promise.all(i.map((e=>e.resolve())))).reduce(((e,t,r)=>Object.assign(e,{[i[r].route.id]:t})),{})}async function _e(e){let{result:t,type:i}=e;if(Be(t)){let e;try{let i=t.headers.get("Content-Type");e=i&&/\bapplication\/json\b/.test(i)?null==t.body?null:await t.json():await t.text()}catch(u){return{type:b.error,error:u}}return i===b.error?{type:b.error,error:new K(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:b.data,data:e,statusCode:t.status,headers:t.headers}}if(i===b.error){if(Ne(t)){var r,n;if(t.data instanceof Error)return{type:b.error,error:t.data,statusCode:null==(n=t.init)?void 0:n.status};t=new K((null==(r=t.init)?void 0:r.status)||500,void 0,t.data)}return{type:b.error,error:t,statusCode:J(t)?t.status:void 0}}var a,s,o,l;return function(e){let t=e;return t&&"object"==typeof t&&"object"==typeof t.data&&"function"==typeof t.subscribe&&"function"==typeof t.cancel&&"function"==typeof t.resolveData}(t)?{type:b.deferred,deferredData:t,statusCode:null==(a=t.init)?void 0:a.status,headers:(null==(s=t.init)?void 0:s.headers)&&new Headers(t.init.headers)}:Ne(t)?{type:b.data,data:t.data,statusCode:null==(o=t.init)?void 0:o.status,headers:null!=(l=t.init)&&l.headers?new Headers(t.init.headers):void 0}:{type:b.data,data:t}}function ye(e,t,i,r,n,a){let s=e.headers.get("Location");if(g(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!se.test(s)){let o=r.slice(0,r.findIndex((e=>e.route.id===i))+1);s=he(new URL(t.url),o,n,!0,s,a),e.headers.set("Location",s)}return e}function we(e,t,i){if(se.test(e)){let r=e,n=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=null!=U(n.pathname,i);if(n.origin===t.origin&&a)return n.pathname+n.search+n.hash}return e}function be(e,t,i,r){let n=e.createURL(Le(t)).toString(),a={signal:i};if(r&&Fe(r.formMethod)){let{formMethod:e,formEncType:t}=r;a.method=e.toUpperCase(),"application/json"===t?(a.headers=new Headers({"Content-Type":t}),a.body=JSON.stringify(r.json)):"text/plain"===t?a.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?a.body=Re(r.formData):a.body=r.formData}return new Request(n,a)}function Re(e){let t=new URLSearchParams;for(let[i,r]of e.entries())t.append(i,"string"==typeof r?r:r.name);return t}function Ee(e){let t=new FormData;for(let[i,r]of e.entries())t.append(i,r);return t}function Pe(e,t,i,r,n,a,s,o){let{loaderData:l,errors:u}=function(e,t,i,r){let n,a={},s=null,o=!1,l={},u=i&&De(i[1])?i[1].error:void 0;return e.forEach((i=>{if(!(i.route.id in t))return;let h=i.route.id,c=t[h];if(g(!Ie(c),"Cannot handle redirect results in processLoaderData"),De(c)){let t=c.error;void 0!==u&&(t=u,u=void 0),s=s||{};{let i=Se(e,h);null==s[i.route.id]&&(s[i.route.id]=t)}a[h]=void 0,o||(o=!0,n=J(c.error)?c.error.status:500),c.headers&&(l[h]=c.headers)}else ke(c)?(r.set(h,c.deferredData),a[h]=c.deferredData.data,null==c.statusCode||200===c.statusCode||o||(n=c.statusCode),c.headers&&(l[h]=c.headers)):(a[h]=c.data,c.statusCode&&200!==c.statusCode&&!o&&(n=c.statusCode),c.headers&&(l[h]=c.headers))})),void 0!==u&&i&&(s={[i[0]]:u},a[i[0]]=void 0),{loaderData:a,errors:s,statusCode:n||200,loaderHeaders:l}}(t,r,n,o);return a.forEach((t=>{let{key:i,match:r,controller:n}=t,a=s[i];if(g(a,"Did not find corresponding fetcher result"),!n||!n.signal.aborted)if(De(a)){let t=Se(e.matches,null==r?void 0:r.route.id);u&&u[t.route.id]||(u=d({},u,{[t.route.id]:a.error})),e.fetchers.delete(i)}else if(Ie(a))g(!1,"Unhandled fetcher revalidation redirect");else if(ke(a))g(!1,"Unhandled fetcher deferred data");else{let t=Ye(a.data);e.fetchers.set(i,t)}})),{loaderData:l,errors:u}}function xe(e,t,i,r){let n=d({},t);for(let a of i){let i=a.route.id;if(t.hasOwnProperty(i)?void 0!==t[i]&&(n[i]=t[i]):void 0!==e[i]&&a.route.loader&&(n[i]=e[i]),r&&r.hasOwnProperty(i))break}return n}function Ve(e){return e?De(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Se(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function Te(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ae(e,t){let{pathname:i,routeId:r,method:n,type:a,message:s}=void 0===t?{}:t,o="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(o="Bad Request","route-discovery"===a?l='Unable to match URL "'+i+'" - the `unstable_patchRoutesOnNavigation()` function threw the following error:\n'+s:n&&i&&r?l="You made a "+n+' request to "'+i+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===a?l="defer() is not supported in actions":"invalid-body"===a&&(l="Unable to encode submission body")):403===e?(o="Forbidden",l='Route "'+r+'" does not match URL "'+i+'"'):404===e?(o="Not Found",l='No route matches URL "'+i+'"'):405===e&&(o="Method Not Allowed",n&&i&&r?l="You made a "+n.toUpperCase()+' request to "'+i+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':n&&(l='Invalid request method "'+n.toUpperCase()+'"')),new K(e||500,o,new Error(l),!0)}function Ce(e){let t=Object.entries(e);for(let i=t.length-1;i>=0;i--){let[e,r]=t[i];if(Ie(r))return{key:e,result:r}}}function Le(e){return y(d({},"string"==typeof e?w(e):e,{hash:""}))}function Me(e){return Be(e.result)&&te.has(e.result.status)}function ke(e){return e.type===b.deferred}function De(e){return e.type===b.error}function Ie(e){return(e&&e.type)===b.redirect}function Ne(e){return"object"==typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function Be(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"object"==typeof e.headers&&void 0!==e.body}function Fe(e){return G.has(e.toLowerCase())}async function Oe(e,t,i,r,n){let a=Object.entries(t);for(let s=0;s<a.length;s++){let[o,l]=a[s],u=e.find((e=>(null==e?void 0:e.route.id)===o));if(!u)continue;let h=r.find((e=>e.route.id===u.route.id)),c=null!=h&&!pe(h,u)&&void 0!==(n&&n[u.route.id]);ke(l)&&c&&await ze(l,i,!1).then((e=>{e&&(t[o]=e)}))}}async function Ue(e,t,i){for(let r=0;r<i.length;r++){let{key:n,routeId:a,controller:s}=i[r],o=t[n];e.find((e=>(null==e?void 0:e.route.id)===a))&&(ke(o)&&(g(s,"Expected an AbortController for revalidating fetcher deferred result"),await ze(o,s.signal,!0).then((e=>{e&&(t[n]=e)}))))}}async function ze(e,t,i){if(void 0===i&&(i=!1),!(await e.deferredData.resolveData(t))){if(i)try{return{type:b.data,data:e.deferredData.unwrappedData}}catch(r){return{type:b.error,error:r}}return{type:b.data,data:e.deferredData.data}}}function je(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function $e(e,t){let i="string"==typeof t?w(t).search:t.search;if(e[e.length-1].route.index&&je(i||""))return e[e.length-1];let r=j(e);return r[r.length-1]}function We(e){let{formMethod:t,formAction:i,formEncType:r,text:n,formData:a,json:s}=e;if(t&&i&&r)return null!=n?{formMethod:t,formAction:i,formEncType:r,formData:void 0,json:void 0,text:n}:null!=a?{formMethod:t,formAction:i,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:i,formEncType:r,formData:void 0,json:s,text:void 0}:void 0}function qe(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function He(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ye(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Xe.apply(this,arguments)}const Ke=React.createContext(null),Je=React.createContext(null),Ze=React.createContext(null),Ge=React.createContext(null),Qe=React.createContext({outlet:null,matches:[],isDataRoute:!1}),et=React.createContext(null);function tt(){return null!=React.useContext(Ge)}function it(){return tt()||g(!1),React.useContext(Ge).location}function rt(e){React.useContext(Ze).static||React.useLayoutEffect(e)}function nt(){let{isDataRoute:e}=React.useContext(Qe);return e?function(){let{router:e}=function(){let e=React.useContext(Ke);return e||g(!1),e}(dt.UseNavigateStable),t=ft(pt.UseNavigateStable),i=React.useRef(!1);return rt((()=>{i.current=!0})),React.useCallback((function(r,n){void 0===n&&(n={}),i.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Xe({fromRouteId:t},n)))}),[e,t])}():function(){tt()||g(!1);let e=React.useContext(Ke),{basename:t,future:i,navigator:r}=React.useContext(Ze),{matches:n}=React.useContext(Qe),{pathname:a}=it(),s=JSON.stringify($(n,i.v7_relativeSplatPath)),o=React.useRef(!1);return rt((()=>{o.current=!0})),React.useCallback((function(i,n){if(void 0===n&&(n={}),!o.current)return;if("number"==typeof i)return void r.go(i);let l=W(i,JSON.parse(s),a,"path"===n.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:q([t,l.pathname])),(n.replace?r.replace:r.push)(l,n.state,n)}),[t,r,s,a,e])}()}function at(){let{matches:e}=React.useContext(Qe),t=e[e.length-1];return t?t.params:{}}function st(e,t){let{relative:i}=void 0===t?{}:t,{future:r}=React.useContext(Ze),{matches:n}=React.useContext(Qe),{pathname:a}=it(),s=JSON.stringify($(n,r.v7_relativeSplatPath));return React.useMemo((()=>W(e,JSON.parse(s),a,"path"===i)),[e,s,a,i])}function ot(e,t,i,r){tt()||g(!1);let{navigator:n}=React.useContext(Ze),{matches:a}=React.useContext(Qe),s=a[a.length-1],o=s?s.params:{};!s||s.pathname;let l,u=s?s.pathnameBase:"/";s&&s.route,l=it();let h=l.pathname||"/",c=h;if("/"!==u){let e=u.replace(/^\//,"").split("/");c="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let d=x(e,{pathname:c}),p=function(e,t,i,r){var n;void 0===t&&(t=[]);void 0===i&&(i=null);void 0===r&&(r=null);if(null==e){var a;if(!i)return null;if(i.errors)e=i.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!i.initialized&&i.matches.length>0))return null;e=i.matches}}let s=e,o=null==(n=i)?void 0:n.errors;if(null!=o){let e=s.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));e>=0||g(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let e=s[h];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=h),e.route.id){let{loaderData:t,errors:r}=i,n=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){l=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,r,n)=>{let a,h=!1,c=null,d=null;i&&(a=o&&r.route.id?o[r.route.id]:void 0,c=r.route.errorElement||ut,l&&(u<0&&0===n?(h=!0,d=null):u===n&&(h=!0,d=r.route.hydrateFallbackElement||null)));let p=t.concat(s.slice(0,n+1)),f=()=>{let t;return t=a?c:h?d:r.route.Component?React.createElement(r.route.Component,null):r.route.element?r.route.element:e,React.createElement(ct,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=i},children:t})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===n)?React.createElement(ht,{location:i.location,revalidation:i.revalidation,component:c,error:a,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}(d&&d.map((e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:q([u,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:q([u,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,r);return p}function lt(){let e=function(){var e;let t=React.useContext(et),i=function(){let e=React.useContext(Je);return e||g(!1),e}(pt.UseRouteError),r=ft(pt.UseRouteError);if(void 0!==t)return t;return null==(e=i.errors)?void 0:e[r]}(),t=J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return React.createElement(React.Fragment,null,React.createElement("h2",null,"Unexpected Application Error!"),React.createElement("h3",{style:{fontStyle:"italic"}},t),i?React.createElement("pre",{style:r},i):null,null)}const ut=React.createElement(lt,null);class ht extends React.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?React.createElement(Qe.Provider,{value:this.props.routeContext},React.createElement(et.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ct(e){let{routeContext:t,match:i,children:r}=e,n=React.useContext(Ke);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),React.createElement(Qe.Provider,{value:t},r)}var dt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(dt||{}),pt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pt||{});function ft(e){let t=function(){let e=React.useContext(Qe);return e||g(!1),e}(),i=t.matches[t.matches.length-1];return i.route.id||g(!1),i.route.id}function gt(e){let{to:t,replace:i,state:r,relative:n}=e;tt()||g(!1);let{future:a,static:s}=React.useContext(Ze),{matches:o}=React.useContext(Qe),{pathname:l}=it(),u=nt(),h=W(t,$(o,a.v7_relativeSplatPath),l,"path"===n),c=JSON.stringify(h);return React.useEffect((()=>u(JSON.parse(c),{replace:i,state:r,relative:n})),[u,c,n,i,r]),null}function mt(e){let{basename:t="/",children:i=null,location:r,navigationType:n=u.Pop,navigator:a,static:s=!1,future:o}=e;tt()&&g(!1);let l=t.replace(/^\/*/,"/"),h=React.useMemo((()=>({basename:l,navigator:a,static:s,future:Xe({v7_relativeSplatPath:!1},o)})),[l,o,a,s]);"string"==typeof r&&(r=w(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:m="default"}=r,v=React.useMemo((()=>{let e=U(c,l);return null==e?null:{location:{pathname:e,search:d,hash:p,state:f,key:m},navigationType:n}}),[l,c,d,p,f,m,n]);return null==v?null:React.createElement(Ze.Provider,{value:h},React.createElement(Ge.Provider,{children:i,value:v}))}React.startTransition;new Promise((()=>{}));React.Component;function vt(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:React.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:React.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:React.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}
/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},_t.apply(this,arguments)}const yt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Tr){}function wt(e,t){return ue({basename:null==t?void 0:t.basename,future:_t({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:f({window:null==t?void 0:t.window}),hydrationData:(null==t?void 0:t.hydrationData)||bt(),routes:e,mapRouteProperties:vt,unstable_dataStrategy:null==t?void 0:t.unstable_dataStrategy,unstable_patchRoutesOnNavigation:null==t?void 0:t.unstable_patchRoutesOnNavigation,window:null==t?void 0:t.window}).initialize()}function bt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=_t({},t,{errors:Rt(t.errors)})),t}function Rt(e){if(!e)return null;let t=Object.entries(e),i={};for(let[r,n]of t)if(n&&"RouteErrorResponse"===n.__type)i[r]=new K(n.status,n.statusText,n.data,!0===n.internal);else if(n&&"Error"===n.__type){if(n.__subType){let e=window[n.__subType];if("function"==typeof e)try{let t=new e(n.message);t.stack="",i[r]=t}catch(Tr){}}if(null==i[r]){let e=new Error(n.message);e.stack="",i[r]=e}}else i[r]=n;return i}const Et=React.createContext({isTransitioning:!1}),Pt=React.createContext(new Map),xt=React.startTransition,Vt=ReactDOM.flushSync;function St(e){Vt?Vt(e):e()}React.useId;class Tt{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function At(e){let{fallbackElement:t,router:i,future:r}=e,[n,a]=React.useState(i.state),[s,o]=React.useState(),[l,u]=React.useState({isTransitioning:!1}),[h,c]=React.useState(),[d,p]=React.useState(),[f,g]=React.useState(),m=React.useRef(new Map),{v7_startTransition:v}=r||{},_=React.useCallback((e=>{v?function(e){xt?xt(e):e()}(e):e()}),[v]),y=React.useCallback(((e,t)=>{let{deletedFetchers:r,unstable_flushSync:n,unstable_viewTransitionOpts:s}=t;r.forEach((e=>m.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&m.current.set(t,e.data)}));let l=null==i.window||null==i.window.document||"function"!=typeof i.window.document.startViewTransition;if(s&&!l){if(n){St((()=>{d&&(h&&h.resolve(),d.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})}));let t=i.window.document.startViewTransition((()=>{St((()=>a(e)))}));return t.finished.finally((()=>{St((()=>{c(void 0),p(void 0),o(void 0),u({isTransitioning:!1})}))})),void St((()=>p(t)))}d?(h&&h.resolve(),d.skipTransition(),g({state:e,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(o(e),u({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else n?St((()=>a(e))):_((()=>a(e)))}),[i.window,d,h,m,_]);React.useLayoutEffect((()=>i.subscribe(y)),[i,y]),React.useEffect((()=>{l.isTransitioning&&!l.flushSync&&c(new Tt)}),[l]),React.useEffect((()=>{if(h&&s&&i.window){let e=s,t=h.promise,r=i.window.document.startViewTransition((async()=>{_((()=>a(e))),await t}));r.finished.finally((()=>{c(void 0),p(void 0),o(void 0),u({isTransitioning:!1})})),p(r)}}),[_,s,h,i.window]),React.useEffect((()=>{h&&s&&n.location.key===s.location.key&&h.resolve()}),[h,d,n.location,s]),React.useEffect((()=>{!l.isTransitioning&&f&&(o(f.state),u({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),g(void 0))}),[l.isTransitioning,f]),React.useEffect((()=>{}),[]);let w=React.useMemo((()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:e=>i.navigate(e),push:(e,t,r)=>i.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>i.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[i]),b=i.basename||"/",R=React.useMemo((()=>({router:i,navigator:w,static:!1,basename:b})),[i,w,b]),E=React.useMemo((()=>({v7_relativeSplatPath:i.future.v7_relativeSplatPath})),[i.future.v7_relativeSplatPath]);return React.createElement(React.Fragment,null,React.createElement(Ke.Provider,{value:R},React.createElement(Je.Provider,{value:n},React.createElement(Pt.Provider,{value:m.current},React.createElement(Et.Provider,{value:l},React.createElement(mt,{basename:b,location:n.location,navigationType:n.historyAction,navigator:w,future:E},n.initialized||i.future.v7_partialHydration?React.createElement(Ct,{routes:i.routes,future:i.future,state:n}):t))))),null)}const Ct=React.memo(Lt);function Lt(e){let{routes:t,future:i,state:r}=e;return ot(t,0,r,i)}const Mt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,kt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=React.forwardRef((function(e,t){let i,{onClick:r,relative:n,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:h,unstable_viewTransition:c}=e,d=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,yt),{basename:p}=React.useContext(Ze),f=!1;if("string"==typeof u&&kt.test(u)&&(i=u,Mt))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),i=U(t.pathname,p);t.origin===e.origin&&null!=i?u=i+t.search+t.hash:f=!0}catch(Tr){}let m=function(e,t){let{relative:i}=void 0===t?{}:t;tt()||g(!1);let{basename:r,navigator:n}=React.useContext(Ze),{hash:a,pathname:s,search:o}=st(e,{relative:i}),l=s;return"/"!==r&&(l="/"===s?r:q([r,s])),n.createHref({pathname:l,search:o,hash:a})}(u,{relative:n}),v=function(e,t){let{target:i,replace:r,state:n,preventScrollReset:a,relative:s,unstable_viewTransition:o}=void 0===t?{}:t,l=nt(),u=it(),h=st(e,{relative:s});return React.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,i)){t.preventDefault();let i=void 0!==r?r:y(u)===y(h);l(e,{replace:i,state:n,preventScrollReset:a,relative:s,unstable_viewTransition:o})}}),[u,l,h,r,n,i,e,a,s,o])}(u,{replace:s,state:o,target:l,preventScrollReset:h,relative:n,unstable_viewTransition:c});return React.createElement("a",_t({},d,{href:i||m,onClick:f||a?r:function(e){r&&r(e),e.defaultPrevented||v(e)},ref:t,target:l}))}));var It,Nt,Bt,Ft;(Nt=It||(It={})).UseScrollRestoration="useScrollRestoration",Nt.UseSubmit="useSubmit",Nt.UseSubmitFetcher="useSubmitFetcher",Nt.UseFetcher="useFetcher",Nt.useViewTransitionState="useViewTransitionState",(Ft=Bt||(Bt={})).UseFetcher="useFetcher",Ft.UseFetchers="useFetchers",Ft.UseScrollRestoration="useScrollRestoration";const Ot=(e=6,t="u_")=>{const i="abcdefhijkmnprstwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=i.charAt(Math.floor(30*Math.random()));return t+r};var Ut=Object.defineProperty,zt=(e,t,i)=>((e,t,i)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);function jt(e,t){if(e.size!==t.size)return!1;for(let[i,r]of e)if(!t.has(i)||t.get(i)!==r)return!1;return!0}let $t=0;var Wt=Object.defineProperty,qt=(e,t,i)=>((e,t,i)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);class Ht{constructor(e){qt(this,"x"),qt(this,"y"),qt(this,"target"),this.x=e.x,this.y=e.y,this.target=e.target}}class Yt extends Ht{}class Xt extends Ht{}class Kt extends Ht{}class Jt extends Ht{}class Zt{constructor(e){qt(this,"pluginId"),qt(this,"pluginName"),qt(this,"viewName"),qt(this,"dataName"),qt(this,"dataValue"),this.event=e,this.pluginId=e.pluginId,this.pluginName=e.pluginName,this.viewName=e.viewName,this.dataName=e.dataName,this.dataValue=e.dataValue}}function Gt(e){return e.split("").map(((e,t)=>e.toUpperCase()===e?`${0!==t?"-":""}${e.toLowerCase()}`:e)).join("")}class Qt{constructor(e){qt(this,"node"),this.node=e.node}}class ei{constructor(e){qt(this,"node"),this.node=e.node}}class ti{constructor(e){qt(this,"_eventBus"),qt(this,"_observer"),this._eventBus=e,this._observer=new MutationObserver(this._handler.bind(this)),this._observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})}_handler(e){e.forEach((e=>{e.addedNodes.forEach((e=>{if(!(e instanceof HTMLElement)||e.dataset.velViewId||e.parentElement&&typeof e.parentElement.dataset.velAdded<"u")return;let t=e;if(e.dataset.velView||(t=e.querySelector("[data-vel-view][data-vel-plugin]")),!t)return;this._eventBus.emitEvent(Qt,{node:t});const i=t.querySelectorAll("[data-vel-plugin]");i.length&&i.forEach((e=>{this._eventBus.emitEvent(Qt,{node:e})}))})),e.removedNodes.forEach((e=>{if(!(e instanceof HTMLElement)||typeof e.dataset.velProcessing<"u")return;const t=e.querySelectorAll("[data-vel-plugin]");t.length&&t.forEach((e=>{this._eventBus.emitEvent(ei,{node:e})})),this._eventBus.emitEvent(ei,{node:e})}));const t=e.attributeName;if("data-vel-view"===t&&this._eventBus.emitEvent(Qt,{node:e.target}),t&&/data-vel-data-.+/gi.test(t)){const i=e.target,r=i.dataset.velPluginId||"",n=i.dataset.velPlugin||"",a=i.dataset.velView||"",s=i.getAttribute(t);if(s&&s!==e.oldValue){const e=t.replace("data-vel-data-","").replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"").replace(/-+/g,"");this._eventBus.emitEvent(Zt,{pluginId:r,pluginName:n,viewName:a,dataName:e,dataValue:s})}}}))}}class ii{execute(e){this.call(e)}}class ri extends ii{constructor(e){super(),qt(this,"_handler"),this._handler=e}getHandler(){return this._handler}call(e){this._handler(e)}}class ni{constructor(){qt(this,"_listeners",new Map),qt(this,"_keyedListeners",new Map)}subscribeToEvent(e,t,i){if(i)return void this._subscribeToKeyedEvent(e,t,i);let r=this._listeners.get(e);r||(r=[],this._listeners.set(e,r)),r.push(new ri(t))}removeEventListener(e,t,i){if(i)return void this._removeKeyedEventListener(e,t,i);let r=this._listeners.get(e);r&&(r=r.filter((e=>e.getHandler()!==t)),this._listeners.set(e,r))}_subscribeToKeyedEvent(e,t,i){let r=this._keyedListeners.get(e);r||(r=new Map,this._keyedListeners.set(e,r));let n=r.get(i);n||(n=[],r.set(i,n)),n.push(new ri(t))}_removeKeyedEventListener(e,t,i){let r=this._keyedListeners.get(e);if(!r)return;let n=r.get(i);n&&(n=n.filter((e=>e.getHandler()!==t)),r.set(i,n))}emitEvent(e,t,i){if(i)return void this._emitKeyedEvent(e,t,i);const r=this._listeners.get(e);r&&r.forEach((e=>{e.execute(t)}))}_emitKeyedEvent(e,t,i){const r=this._keyedListeners.get(e);if(!r)return;const n=r.get(i);n&&n.forEach((e=>{e.execute(t)}))}_convertListener(e){return t=>e(t)}subscribeToPluginReadyEvent(e,t,i=!1){i?this.subscribeToEvent(hr,this._convertListener(e),t):this.subscribeToEvent(ur,this._convertListener(e),t)}emitPluginReadyEvent(e,t,i=!1){i?this.emitEvent(hr,t,e):this.emitEvent(ur,t,e)}reset(){this._listeners.clear()}}let ai=0;function si(){return ai+++""}class oi{constructor(e,t,i,r,n,a,s){qt(this,"_registry"),qt(this,"_eventBus"),qt(this,"_appEventBus"),qt(this,"_internalEventBus"),qt(this,"_initialized",!1),qt(this,"_config"),qt(this,"_pluginFactory"),qt(this,"_pluginName"),qt(this,"_id"),qt(this,"_pluginKey"),qt(this,"_layoutIdViewMapWaitingToEnter"),qt(this,"_apiData"),qt(this,"_isReady",!1),this._id=si(),this._pluginFactory=e,this._pluginName=t,this._registry=i,this._eventBus=r,this._appEventBus=n,this._internalEventBus=new ni,this._config=a,this._layoutIdViewMapWaitingToEnter=new Map,this._pluginKey=s,this._apiData={},this._appEventBus.subscribeToPluginReadyEvent((()=>{this._isReady=!0}),this._pluginName,!0)}get api(){return this._apiData}_setApi(e){this._apiData=e}get pluginName(){return this._pluginName}get pluginFactory(){return this._pluginFactory}get pluginKey(){return this._pluginKey}get id(){return this._id}get config(){return{...this._config}}getViews(e){return e?this._registry.getViewsByNameForPlugin(this,e):this._registry.getViewsForPlugin(this)}getView(e){return e?this._registry.getViewsByNameForPlugin(this,e)[0]:this._registry.getViewsForPlugin(this)[0]}getViewById(e){return this._registry.getViewById(e)}addView(e){this._registry.assignViewToPlugin(e,this)}setInternalEventBus(e){this._internalEventBus=e}get internalBusEvent(){return this._internalEventBus}emit(e,t){this._internalEventBus.emitEvent(e,t,this.pluginKey)}on(e,t){this._internalEventBus.subscribeToEvent(e,t,this.pluginKey)}removeListener(e,t){this._internalEventBus.removeEventListener(e,t)}useEventPlugin(e,t={}){const i=this._registry.createPlugin(e,this._eventBus,t);return this._registry.associateEventPluginWithPlugin(this.id,i.id),i}notifyAboutDataChanged(e){this.onDataChanged(e)}onDataChanged(e){}removeView(e){e.onRemoveCallback?this._invokeRemoveCallback(e):this._deleteView(e),this.onViewRemoved(e)}_invokeRemoveCallback(e){const t=this._createTemporaryView(e);requestAnimationFrame((()=>{var i;null==(i=t.onRemoveCallback)||i.call(t,t,(()=>{var i,r;if(null!=(i=e.onAddCallbacks)&&i.afterRemoved&&e.layoutId){const t=this._layoutIdViewMapWaitingToEnter.get(e.layoutId);null==(r=null==t?void 0:t.onAddCallbacks)||r.afterEnter(t),this._layoutIdViewMapWaitingToEnter.delete(e.layoutId)}this._deleteView(t,!0)})),setTimeout((()=>{t.element.parentElement&&this._deleteView(t,!0)}),1e4)}))}_deleteView(e,t=!1){(t||!e.layoutId)&&(this._registry.removeViewById(e.id,this.id),e.element.remove())}_createTemporaryView(e){const t=e.previousRect.viewportOffset,i=e.previousRect.size,r=e.rotation.degrees<0?0:Math.sin(e.rotation.radians)*i.height*e.scale.y,n=e.rotation.degrees>0?0:Math.sin(e.rotation.radians)*i.width*e.scale.y,a=e.element.cloneNode(!0);e.element.remove(),a.style.cssText="",a.style.position="absolute",a.style.left=`${t.left+r}px`,a.style.top=t.top-n+"px",a.style.width=`${i.width}px`,a.style.height=`${i.height}px`,a.style.transform=`\n      scale3d(${e.scale.x}, ${e.scale.y}, 1) rotate(${e.rotation.degrees}deg)\n    `,a.style.pointerEvents="none",a.dataset.velRemoved="",document.body.appendChild(a);const s=this._registry.createView(a,e.name);return s.setAsTemporaryView(),s.styles.position="absolute",s.styles.left=`${t.left+r}px`,s.styles.top=t.top-n+"px",s.rotation.setDegrees(e.rotation.degrees,!1),s.scale.set({x:e.scale.x,y:e.scale.y},!1),s.size.set({width:e._localWidth,height:e._localHeight},!1),e._copyAnimatorsToAnotherView(s),e.onRemoveCallback&&s.onRemove(e.onRemoveCallback),s}onViewRemoved(e){}notifyAboutViewAdded(e){this.onViewAdded(e),this._invokeAddCallbacks(e)}_invokeAddCallbacks(e){var t,i,r;(null==(t=e.onAddCallbacks)||!t.onInitialLoad)&&!this._initialized||(null==(i=e.onAddCallbacks)||i.beforeEnter(e),null!=(r=e.onAddCallbacks)&&r.afterRemoved&&this._initialized?e.layoutId&&this._layoutIdViewMapWaitingToEnter.set(e.layoutId,e):requestAnimationFrame((()=>{var t;null==(t=e.onAddCallbacks)||t.afterEnter(e)})))}onViewAdded(e){}init(){!this._initialized&&this._isReady&&(this.setup(),this._initialized=!0)}setup(){}subscribeToEvents(e){}}class li extends oi{isRenderable(){return!0}isInitialized(){return this._initialized}get initialized(){return this._initialized}update(e,t){}render(){}addView(e){e.setPluginId(this.id),super.addView(e)}}class ui extends oi{isRenderable(){return!1}}class hi{constructor(e){qt(this,"_plugin"),this._plugin=e}get initialized(){return this._plugin.isInitialized()}get config(){return this._plugin.config}setup(e){this._plugin.setup=e}api(e){this._plugin._setApi(e)}update(e){this._plugin.update=e}render(e){this._plugin.render=e}getViews(e){return this._plugin.getViews(e)}getView(e){return this._plugin.getView(e)}getViewById(e){return this._plugin.getViewById(e)}useEventPlugin(e,t={}){return this._plugin.useEventPlugin(e,t)}emit(e,t){this._plugin.emit(e,t)}on(e,t){this._plugin.on(e,t)}onDataChanged(e){this._plugin.onDataChanged=e}onViewRemoved(e){this._plugin.onViewRemoved=e}onViewAdded(e){this._plugin.onViewAdded=e}subscribeToEvents(e){this._plugin.subscribeToEvents=e}}function ci(e,t,i,r,n,a){if(function(e){var t;return 0===(null==(t=e.prototype)?void 0:t.constructor.toString().indexOf("class "))}(e))return new e(e,e.pluginName,t,i,r,n,a);const s=new li(e,e.pluginName,t,i,r,n,a);return e(new hi(s)),s}class di{constructor(e,t){qt(this,"x"),qt(this,"y"),this.x=e,this.y=t}get magnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get unitVector(){const e=new di(0,0),t=this.magnitude;return 0!==t&&(e.x=this.x/t,e.y=this.y/t),e}add(e){this.x+=e.x,this.y+=e.y}sub(e){this.x-=e.x,this.y-=e.y}scale(e){this.x*=e,this.y*=e}dot(e){return this.x*e.x+this.y*e.y}equals(e){return this.x===e.x&&this.y===e.y}clone(){return new di(this.x,this.y)}static scale(e,t){return new di(e.x*t,e.y*t)}static sub(e,t){return new di(e.x-t.x,e.y-t.y)}static add(e,t){return new di(e.x+t.x,e.y+t.y)}}class pi{constructor(e){qt(this,"_element"),qt(this,"_callback"),this._element=e,this._observe()}setElement(e){this._element=e,this._observe()}_observe(){var e;function t(e,t){let i,r=!0;return function(){r&&(e(),r=!1),clearTimeout(i),i=setTimeout((()=>{e(),r=!0}),t)}}new MutationObserver((()=>{var e;null==(e=this._callback)||e.call(this,!1)})).observe(this._element,{attributes:!0,childList:!0,attributeOldValue:!0}),new ResizeObserver((()=>{var e;null==(e=this._callback)||e.call(this,!0)})).observe(this._element),null==(e=this._element.parentElement)||e.addEventListener("scroll",t((()=>{var e;null==(e=this._callback)||e.call(this,!0)}),30)),window.addEventListener("scroll",t((()=>{var e;null==(e=this._callback)||e.call(this,!0)}),30)),window.addEventListener("resize",t((()=>{var e;null==(e=this._callback)||e.call(this,!0)}),30))}onChange(e){this._callback=e}}function fi(e,t){const i=e-t;return Math.abs(i)<=.01}function gi(e){let t=e.match(/^([\d.]+)([a-zA-Z%]*)$/);t||(t="0px".match(/^([\d.]+)([a-zA-Z%]*)$/));return{value:parseFloat(t[1]),unit:t[2],valueWithUnit:e}}function mi(e,t){return function(e,t,i=!1){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(i&&!fi(e[r].value,t[r].value)||e[r].value!==t[r].value)return!1;return!0}(e,t,!0)}class vi{constructor(e,t,i,r){qt(this,"_topLeft"),qt(this,"_topRight"),qt(this,"_bottomLeft"),qt(this,"_bottomRight"),this._topLeft=e,this._topRight=t,this._bottomLeft=i,this._bottomRight=r}get value(){return{topLeft:this._topLeft,topRight:this._topRight,bottomRight:this._bottomRight,bottomLeft:this._bottomLeft}}equals(e){return fi(this.value.topLeft.value,e.value.topLeft.value)&&fi(this.value.topRight.value,e.value.topRight.value)&&fi(this.value.bottomRight.value,e.value.bottomRight.value)&&fi(this.value.bottomLeft.value,e.value.bottomLeft.value)}toCssPercentageForNewSize(e){const t=this._convertToPercentage(this._topLeft,e),i=this._convertToPercentage(this._topRight,e),r=this._convertToPercentage(this._bottomLeft,e),n=this._convertToPercentage(this._bottomRight,e);return`${t.h} ${i.h} ${n.h} ${r.h} / ${t.v} ${i.v} ${n.v} ${r.v}`}_convertToPercentage(e,t){if("%"===e.unit)return{h:`${e.value}%`,v:`${e.value}%`};return{h:`${e.value/t.width*100}%`,v:`${e.value/t.height*100}%`}}}function _i(e){const t=e.split(" ").map((e=>gi(e))),i={value:0,unit:"",valueWithUnit:"0"};switch(t.length){case 1:return new vi(t[0],t[0],t[0],t[0]);case 2:return new vi(t[0],t[1],t[0],t[1]);case 3:return new vi(t[0],t[1],t[2],t[1]);case 4:return new vi(t[0],t[1],t[3],t[2]);default:return new vi(i,i,i,i)}}function yi(e,t){return fi(e.topLeft.value,t.topLeft.value)&&fi(e.topRight.value,t.topRight.value)&&fi(e.bottomRight.value,t.bottomRight.value)&&fi(e.bottomLeft.value,t.bottomLeft.value)}class wi{constructor(e){qt(this,"_value"),this._value=e}get value(){return this._value}equals(e){return fi(this.value,e.value)}}class bi{constructor(e,t){qt(this,"_x"),qt(this,"_y"),this._x=e,this._y=t}get value(){return new di(this._x,this._y)}}function Ri(e,t){const i=function(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}(e),r=e.offsetWidth,n=e.offsetHeight;return{viewportOffset:{left:Math.round(i.left),top:Math.round(i.top),right:Math.round(i.right),bottom:Math.round(i.bottom)},pageOffset:t.read({width:r,height:n}),size:{width:r,height:n}}}function Ei(e){let t=e,i=0,r=0;for(;t;)i+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return{top:i,left:r}}class Pi{constructor(e){qt(this,"_currentPageRect"),qt(this,"_view"),qt(this,"_element"),qt(this,"_offsetLeft"),qt(this,"_offsetTop"),qt(this,"_width"),qt(this,"_height"),qt(this,"_parentWidth"),qt(this,"_parentHeight"),qt(this,"_parentEl"),qt(this,"_isSvg"),qt(this,"_invalid"),this._invalid=!0,this._view=e,this._element=e.element,this._isSvg=!!this._element.closest("svg"),this._offsetLeft=0,this._offsetTop=0,this._width=0,this._height=0,this._parentWidth=0,this._parentHeight=0,this._offsetLeft=0,this._parentEl=this._element.parentElement,window.addEventListener("resize",(()=>{this.invalidate()}))}invalidate(){this._invalid=!0}read(e){if(this._isSvg)return this._currentPageRect||(this._currentPageRect=Ei(this._element)),this._currentPageRect;const t=this._element.parentElement,i=this._element.offsetLeft,r=this._element.offsetTop,n=e.width,a=e.height,s=(null==t?void 0:t.offsetWidth)||0,o=(null==t?void 0:t.offsetHeight)||0;return(this._offsetLeft!==i||this._offsetTop!==r||!fi(this._width,n)||!fi(this._height,a))&&this._view._children.forEach((e=>e.elementReader.invalidatePageRect())),!this._invalid&&this._currentPageRect&&this._offsetLeft===i&&this._offsetTop===r&&fi(this._width,n)&&fi(this._height,a)&&fi(this._parentWidth,s)&&fi(this._parentHeight,o)&&this._parentEl===t||(this._offsetLeft=i,this._offsetTop=r,this._width=n,this._height=a,this._parentWidth=s,this._parentHeight=o,this._parentEl=t,this._currentPageRect=Ei(this._element),this._invalid=!1),this._currentPageRect}}class xi{constructor(e){qt(this,"_element"),qt(this,"_rect"),qt(this,"_computedStyle"),qt(this,"_pageRectReader"),qt(this,"_scroll"),this._element=e.element,this._pageRectReader=new Pi(e),this._rect=Ri(this._element,this._pageRectReader),this._computedStyle=getComputedStyle(this._element),this._scroll=this._calculateScroll()}invalidatePageRect(){this._pageRectReader.invalidate()}update(e=!1){this._rect=Ri(this._element,this._pageRectReader),this._computedStyle=getComputedStyle(this._element),e&&(this._scroll=this._calculateScroll())}get rect(){return this._rect}get opacity(){return e=this._computedStyle.opacity,new wi(parseFloat(e));var e}get borderRadius(){return _i(this._computedStyle.borderRadius)}get origin(){return function(e,t){const[i,r]=e.split(" "),n=gi(i),a=gi(r);return new bi(n.value/t.width,a.value/t.height)}(this._computedStyle.transformOrigin,this._rect.size)}_calculateScroll(){let e=this._element,t=0,i=0;for(;e;)t+=e.scrollTop,i+=e.scrollLeft,e=e.offsetParent;return i+=window.scrollX,t+=window.scrollY,{y:t,x:i}}get scroll(){return this._scroll}}function Vi(e){return new xi(e)}function Si(e,t){return new Proxy(e,{set:(e,i,r)=>("object"==typeof e[i]&&null!==e[i]?e[i]=Si(r,t):(t(),e[i]=r),!0),get:(e,i)=>"object"==typeof e[i]&&null!==e[i]?Si(e[i],t):e[i]})}const Ti=.01,Ai={speed:15};class Ci{constructor(e){qt(this,"name","dynamic"),qt(this,"_config"),this._config=e}get config(){return this._config}}class Li extends Ci{update({animatorProp:e,current:t,target:i,dt:r}){const n=di.sub(i,t),a=di.scale(n,this._config.speed);let s=di.add(t,di.scale(a,r));return this._shouldFinish(i,t,a)&&(s=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),e.callUpdateCallback(),s}_shouldFinish(e,t,i){return di.sub(e,t).magnitude<Ti&&i.magnitude<Ti}}class Mi extends Ci{update({animatorProp:e,current:t,target:i,dt:r}){let n=t+(i-t)*this._config.speed*r;return fi(n,i)&&(n=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),e.callUpdateCallback(),n}}class ki extends Ci{update({animatorProp:e,current:t,target:i,dt:r}){return i.map(((i,n)=>{const a=t[n],s=0===i.value?a.unit:i.unit,o=(i.value-a.value)*this._config.speed;let l=gi(`${a.value+o*r}${s}`);return this._shouldFinish(i.value,a.value,o)&&(l=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),e.callUpdateCallback(),l}))}_shouldFinish(e,t,i){return Math.abs(e-t)<Ti&&Math.abs(i)<Ti}}class Di{constructor(){qt(this,"name","instant"),qt(this,"_config",{})}get config(){return this._config}update(e){return requestAnimationFrame((()=>{e.animatorProp.callCompleteCallback()})),e.target}}const Ii={stiffness:.5,damping:.75,speed:10},Ni=.01;class Bi{constructor(e){qt(this,"name","spring"),qt(this,"_config"),this._config=e}get config(){return this._config}}class Fi extends Bi{constructor(){super(...arguments),qt(this,"_velocity",new di(0,0))}update({animatorProp:e,current:t,target:i,dt:r}){const n=di.scale(di.scale(di.sub(t,i),-1),this._config.stiffness);this._velocity=di.add(this._velocity,n),this._velocity=di.scale(this._velocity,this._config.damping);let a=di.add(t,di.scale(this._velocity,r*this._config.speed));return this._shouldFinish(i,t)&&(a=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),a}_shouldFinish(e,t){return di.sub(e,t).magnitude<Ni&&this._velocity.magnitude<Ni}}class Oi extends Bi{constructor(){super(...arguments),qt(this,"_velocity",0)}update({animatorProp:e,current:t,target:i,dt:r}){const n=-(t-i)*this._config.stiffness;this._velocity+=n,this._velocity*=this._config.damping;let a=t+this._velocity*r*this._config.speed;return fi(a,i)&&(a=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),a}}class Ui extends Bi{constructor(){super(...arguments),qt(this,"_velocity",0)}update({animatorProp:e,current:t,target:i,dt:r}){return i.map(((i,n)=>{const a=t[n],s=0===i.value?a.unit:i.unit,o=-(a.value-i.value)*this._config.stiffness;this._velocity+=o,this._velocity*=this._config.damping;let l=gi(`${a.value+this._velocity*r*this._config.speed}${s}`);return this._shouldFinish(i.value,a.value)&&(l=i,requestAnimationFrame((()=>{e.callCompleteCallback()}))),l}))}_shouldFinish(e,t){return Math.abs(e-t)<Ni&&Math.abs(this._velocity)<Ni}}const zi={duration:350,ease:function(e){return e}};class ji{constructor(e){qt(this,"name","tween"),qt(this,"_config"),qt(this,"_startTime"),this._config=e}get config(){return this._config}reset(){this._startTime=void 0}}class $i extends ji{update({animatorProp:e,initial:t,target:i,ts:r}){this._startTime||(this._startTime=r);const n=Math.min(1,(r-this._startTime)/this._config.duration);return fi(n,1)?(requestAnimationFrame((()=>{e.callCompleteCallback()})),i):di.add(t,di.scale(di.sub(i,t),this._config.ease(n)))}}class Wi extends ji{update({animatorProp:e,initial:t,target:i,ts:r}){this._startTime||(this._startTime=r);const n=Math.min(1,(r-this._startTime)/this._config.duration);return fi(n,1)?(requestAnimationFrame((()=>{e.callCompleteCallback()})),i):t.map(((e,t)=>{const r=i[t],a=0===r.value?e.unit:r.unit;return gi(`${e.value+this._config.ease(n)*(i[t].value-e.value)}${a}`)}))}}class qi extends ji{update({animatorProp:e,initial:t,target:i,ts:r}){this._startTime||(this._startTime=r);const n=Math.min(1,(r-this._startTime)/this._config.duration);return fi(n,1)?(requestAnimationFrame((()=>{e.callCompleteCallback()})),i):t+(i-t)*this._config.ease(n)}}class Hi{createAnimatorByName(e,t){switch(e){case"instant":return this.createInstantAnimator();case"dynamic":return this.createDynamicAnimator(t);case"tween":return this.createTweenAnimator(t);case"spring":return this.createSpringAnimator(t)}return this.createInstantAnimator()}}class Yi extends Hi{createInstantAnimator(){return new Di}createTweenAnimator(e){return new $i({...zi,...e})}createDynamicAnimator(e){return new Li({...Ai,...e})}createSpringAnimator(e){return new Fi({...Ii,...e})}}class Xi extends Hi{createInstantAnimator(){return new Di}createTweenAnimator(e){return new Wi({...zi,...e})}createDynamicAnimator(e){return new ki({...Ai,...e})}createSpringAnimator(e){return new Ui({...Ii,...e})}}class Ki extends Hi{createInstantAnimator(){return new Di}createDynamicAnimator(e){return new Mi({...Ai,...e})}createTweenAnimator(e){return new qi({...zi,...e})}createSpringAnimator(e){return new Oi({...Ii,...e})}}function Ji(e){return structuredClone(e)}class Zi{constructor(e){qt(this,"_viewProp"),qt(this,"_completeCallback"),qt(this,"_updateCallback"),qt(this,"_isAnimating"),this._viewProp=e,this._isAnimating=!1}set(e,t){this._viewProp.setAnimator(e,t)}get name(){return this._viewProp.getAnimator().name}onComplete(e){this._completeCallback=e}get isAnimating(){return this._isAnimating}markAsAnimating(){this._isAnimating=!0}callCompleteCallback(){var e;null==(e=this._completeCallback)||e.call(this),this._isAnimating=!1}onUpdate(e){this._updateCallback=e}callUpdateCallback(){var e;null==(e=this._updateCallback)||e.call(this)}}class Gi{constructor(e,t,i){qt(this,"_animatorProp"),qt(this,"_animator"),qt(this,"_initialValue"),qt(this,"_previousValue"),qt(this,"_targetValue"),qt(this,"_currentValue"),qt(this,"_hasChanged"),qt(this,"_view"),qt(this,"_animatorFactory"),qt(this,"_previousRenderValue"),this._animatorProp=new Zi(this),this._animatorFactory=e,this._initialValue=Ji(t),this._previousValue=Ji(t),this._targetValue=Ji(t),this._currentValue=Ji(t),this._hasChanged=!1,this._previousRenderValue=void 0,this._view=i,this._animator=this._animatorFactory.createInstantAnimator()}get shouldRender(){return!0}get isAnimating(){return this.animator.isAnimating}getAnimator(){return this._animator}get animator(){return this._animatorProp}get _rect(){return this._view.rect}get _previousRect(){return this._view.previousRect}setAnimator(e,t){this._animator=this._animatorFactory.createAnimatorByName(e,t)}_setTarget(e,t=!0){var i,r;this._previousValue=Ji(this._currentValue),this._targetValue=e,t?(null==(r=(i=this._animator).reset)||r.call(i),this.animator.markAsAnimating()):this._currentValue=e,this._hasChanged=!0}hasChanged(){return this._hasChanged}destroy(){this._hasChanged=!1}update(e,t){}}class Qi extends Gi{constructor(){super(...arguments),qt(this,"_invertedBorderRadius"),qt(this,"_forceStyleUpdateThisFrame",!1),qt(this,"_updateWithScale",!1)}setFromElementPropValue(e){this._setTarget([e.value.topLeft,e.value.topRight,e.value.bottomRight,e.value.bottomLeft],!0)}enableUpdateWithScale(){this._updateWithScale=!0}disableUpdateWithScale(){this._updateWithScale=!1}get value(){return{topLeft:this._currentValue[0],topRight:this._currentValue[1],bottomRight:this._currentValue[2],bottomLeft:this._currentValue[3]}}get invertedBorderRadius(){return this._invertedBorderRadius}set(e,t=!0){let i;if("string"==typeof e){const t=_i(e.trim());i={topLeft:t.value.topLeft.valueWithUnit,topRight:t.value.topRight.valueWithUnit,bottomRight:t.value.bottomRight.valueWithUnit,bottomLeft:t.value.bottomLeft.valueWithUnit}}else i=e;const r=i.topLeft?gi(i.topLeft):this._currentValue[0],n=i.topRight?gi(i.topRight):this._currentValue[1],a=i.bottomRight?gi(i.bottomRight):this._currentValue[2],s=i.bottomLeft?gi(i.bottomLeft):this._currentValue[3];this._setTarget([r,n,a,s],t)}reset(e=!0){this._setTarget(this._initialValue,e)}update(e,t){if(this._forceStyleUpdateThisFrame)this._hasChanged=!0,this._forceStyleUpdateThisFrame=!1;else if(this._view.scale.isAnimating&&this._updateWithScale)this._hasChanged=!0;else if(mi(this._targetValue,this._currentValue))return void(this._hasChanged=!mi(this._targetValue,this._initialValue));this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t}),this._updateWithScale&&this._applyScaleInverse()}applyScaleInverse(){this._updateWithScale&&(this._forceStyleUpdateThisFrame=!0)}_applyScaleInverse(){if(fi(this._view.scale.x,1)&&fi(this._view.scale.y,1))return;const e=this._rect.size.width*this._view.scale.x,t=this._rect.size.height*this._view.scale.y;this._invertedBorderRadius=function(e,t){const i=s(e.topLeft,t),r=s(e.topRight,t),n=s(e.bottomLeft,t),a=s(e.bottomRight,t);return{v:{topLeft:i.v,topRight:r.v,bottomRight:a.v,bottomLeft:n.v},h:{topLeft:i.h,topRight:r.h,bottomRight:a.h,bottomLeft:n.h}};function s(e,t){if("%"===e.unit)return{h:gi(`${e.value}%`),v:gi(`${e.value}%`)};const i=e.value/t.width*100,r=e.value/t.height*100;return{h:gi(`${i}%`),v:gi(`${r}%`)}}}(_i(`${this._currentValue[0].valueWithUnit} ${this._currentValue[1].valueWithUnit} ${this._currentValue[2].valueWithUnit} ${this._currentValue[3].valueWithUnit}`).value,{width:e,height:t})}get shouldRender(){return!!this._hasChanged&&(!this._previousRenderValue||!(yi(this.renderValue.v,this._previousRenderValue.v)&&yi(this.renderValue.h,this._previousRenderValue.h)))}get renderValue(){return this.invertedBorderRadius?{v:{topLeft:this.invertedBorderRadius.v.topLeft,topRight:this.invertedBorderRadius.v.topRight,bottomLeft:this.invertedBorderRadius.v.bottomLeft,bottomRight:this.invertedBorderRadius.v.bottomRight},h:{topLeft:this.invertedBorderRadius.h.topLeft,topRight:this.invertedBorderRadius.h.topRight,bottomLeft:this.invertedBorderRadius.h.bottomLeft,bottomRight:this.invertedBorderRadius.h.bottomRight}}:{v:{topLeft:this.value.topLeft,topRight:this.value.topRight,bottomLeft:this.value.bottomLeft,bottomRight:this.value.bottomRight},h:{topLeft:this.value.topLeft,topRight:this.value.topRight,bottomLeft:this.value.bottomLeft,bottomRight:this.value.bottomRight}}}projectStyles(){const e=this.renderValue,t=`border-radius: ${e.h.topLeft.valueWithUnit} ${e.h.topRight.valueWithUnit} ${e.h.bottomRight.valueWithUnit} ${e.h.bottomLeft.valueWithUnit} / ${e.v.topLeft.valueWithUnit} ${e.v.topRight.valueWithUnit} ${e.v.bottomRight.valueWithUnit} ${e.v.bottomLeft.valueWithUnit};`;return this._previousRenderValue=e,t}isTransform(){return!1}}class er extends Gi{setFromElementPropValue(e){this._setTarget(e.value,!0)}get value(){return this._currentValue}set(e,t=!0){this._setTarget(e,t)}reset(e=!0){this._setTarget(1,e)}update(e,t){fi(this._targetValue,this._currentValue)?this._hasChanged=!fi(this._targetValue,this._initialValue):this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t})}get shouldRender(){return!!this._hasChanged&&(typeof this._previousRenderValue>"u"||this.renderValue!==this._previousRenderValue)}get renderValue(){return this.value}projectStyles(){const e=this.renderValue,t=`opacity: ${e};`;return this._previousRenderValue=e,t}isTransform(){return!1}}class tr extends Gi{get x(){return this._currentValue.x}get y(){return this._currentValue.y}set(e){const t={x:this.x,y:this.y,...e};t.x<0||t.x>1||t.y<0||t.y>1||this._setTarget(new di(t.x,t.y),!1)}reset(){this._setTarget(this._initialValue,!1)}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(fi(e.x,this._previousRenderValue.x)&&fi(e.y,this._previousRenderValue.y))}get renderValue(){return new di(100*this.x,100*this.y)}projectStyles(){const e=this.renderValue,t=`transform-origin: ${e.x}% ${e.y}%;`;return this._previousRenderValue=e,t}isTransform(){return!1}}class ir extends Gi{constructor(){super(...arguments),qt(this,"_animateLayoutUpdateNextFrame",!1),qt(this,"_parentScaleInverse",new di(1,1))}get _parentDiff(){let e=this._view._parent,t=0,i=0;if(e){const r=e.rect.pageOffset,n=e.getScroll(),a={left:e.previousRect.viewportOffset.left+n.x,top:e.previousRect.viewportOffset.top+n.y};t=a.left-r.left,i=a.top-r.top}return{parentDx:t,parentDy:i}}get x(){return this._currentValue.x+this._rect.pageOffset.left+this._parentDiff.parentDx}get y(){return this._currentValue.y+this._rect.pageOffset.top+this._parentDiff.parentDy}get initialX(){return this._rect.pageOffset.left}get initialY(){return this._rect.pageOffset.top}progressTo(e){const t=typeof e.x>"u"?this.initialX:e.x,i=typeof e.y>"u"?this.initialY:e.y,r=new di(t,i),n=new di(this.initialX,this.initialY),a=new di(this.x,this.y),s=di.sub(a,n),o=di.sub(r,n);return 1-di.sub(o,s).magnitude/o.magnitude}set(e,t=!0){const i={x:this.x,y:this.y,...e};this._setTarget(new di(i.x-this._rect.pageOffset.left,i.y-this._rect.pageOffset.top),t)}reset(e=!0){this._setTarget(new di(0,0),e)}update(e,t){if((this._view.isInverseEffectEnabled||this._view.isLayoutTransitionEnabled)&&!this._view.isTemporaryView&&this._runLayoutTransition(),this._view.isInverseEffectEnabled){const e=this._view._parent,t=e?e.scale.x:1,i=e?e.scale.y:1;this._parentScaleInverse=new di(1/t,1/i),this._parentScaleInverse.equals(new di(1,1))||(this._hasChanged=!0)}if(this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y)return;const i=this._view._parent,r=i?i.scale.x:1,n=i?i.scale.y:1,a=i?i.scale._previousValue.x:1,s=i?i.scale._previousValue.y:1;this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:new di(this._currentValue.x*r,this._currentValue.y*n),target:this._targetValue,initial:new di(this._previousValue.x*a,this._previousValue.y*s),ts:e,dt:t}),this._currentValue=new di(this._currentValue.x/r,this._currentValue.y/n)}_runLayoutTransition(){const e=!(this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y),t=!(this._view.scale._targetValue.x===this._view.scale._currentValue.x&&this._view.scale._targetValue.y===this._view.scale._currentValue.y),i=e||t,r=this._rect.pageOffset.left-this._previousRect.pageOffset.left,n=this._rect.pageOffset.top-this._previousRect.pageOffset.top,a=this._previousRect.size.width/this._rect.size.width,s=this._previousRect.size.height/this._rect.size.height;let o=!1;if(o=0!==r||0!==n||!Number.isNaN(a)&&1!==a||!Number.isNaN(s)&&1!==s||(()=>{const e=this._view._parents;for(let t=0;t<e.length;t++){const i=e[t],r=i.previousRect.size.width/i.rect.size.width,n=i.previousRect.size.height/i.rect.size.height;if(1!==r||1!==n)return!0}return!1})(),o){if(0!==this._currentValue.x||0!==this._currentValue.y||1!==this._view.scale._currentValue.x||1!==this._view.scale._currentValue.y){if(!i){const e=this._rect.pageOffset.left-this._previousRect.pageOffset.left,t=this._rect.pageOffset.top-this._previousRect.pageOffset.top;return void this._setTarget(new di(this._currentValue.x-e,this._currentValue.y-t),!1)}const e=this._view._parent,t=this._rect.pageOffset,r=this._view.getScroll(),n={left:this._previousRect.viewportOffset.left+r.x,top:this._previousRect.viewportOffset.top+r.y},a=n.left-t.left,s=n.top-t.top;let o=0,l=0,u=0,h=0;if(e){const t=e.rect.pageOffset,i=e.getScroll(),r={left:e.previousRect.viewportOffset.left+i.x,top:e.previousRect.viewportOffset.top+i.y};o=r.left-t.left,l=r.top-t.top;const a=n.top-r.top,s=n.left-r.left;u=(a-e.scale.y*a)/e.scale.y;h=(s-e.scale.x*s)/e.scale.x}return this._setTarget(new di(a-o+h,s-l+u),!1),void(i&&(this._animateLayoutUpdateNextFrame=!0))}this._animateLayoutUpdateNextFrame=!0;const e=this._previousRect,t=this._rect,r=this._view._parent;let n=0,a=0;r&&(n=r.previousRect.viewportOffset.left-r.rect.viewportOffset.left),r&&(a=r.previousRect.viewportOffset.top-r.rect.viewportOffset.top);let s=1,o=1;r&&(s=r.previousRect.size.width/r.rect.size.width,o=r.previousRect.size.height/r.rect.size.height);const l=r?r.previousRect.viewportOffset.left:0,u=r?r.previousRect.viewportOffset.top:0,h=e.viewportOffset.left-l,c=e.viewportOffset.top-u,d=h/s-h,p=c/o-c;let f=e.viewportOffset.left-t.viewportOffset.left-n+d,g=e.viewportOffset.top-t.viewportOffset.top-a+p;f=Number.isFinite(f)?f:0,g=Number.isFinite(g)?g:0,this._setTarget(new di(f,g),!1)}else this._animateLayoutUpdateNextFrame&&(this._setTarget(this._initialValue,!0),this._animateLayoutUpdateNextFrame=!1)}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(fi(e.x,this._previousRenderValue.x)&&fi(e.y,this._previousRenderValue.y))}get renderValue(){let e=0,t=0;return(this._view.isInverseEffectEnabled||this._view.isLayoutTransitionEnabled)&&(e=(this._rect.size.width*this._parentScaleInverse.x*this._view.scale.x-this._rect.size.width)*this._view.origin.x,t=(this._rect.size.height*this._parentScaleInverse.y*this._view.scale.y-this._rect.size.height)*this._view.origin.y),new di(this._currentValue.x+e,this._currentValue.y+t)}projectStyles(){const e=this.renderValue,t=`translate3d(${e.x}px, ${e.y}px, 0px)`;return this._previousRenderValue=e,t}isTransform(){return!0}}class rr extends Gi{constructor(){super(...arguments),qt(this,"_unit","deg")}get degrees(){let e=this._currentValue;return"rad"===this._unit&&(e*=180/Math.PI),e}get radians(){let e=this._currentValue;return"deg"===this._unit&&(e*=Math.PI/180),e}setDegrees(e,t=!0){this._unit="deg",this._setTarget(e,t)}setRadians(e,t=!0){this._unit="rad",this._setTarget(e,t)}reset(e=!0){this._setTarget(0,e)}update(e,t){this._targetValue!==this._currentValue&&(this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t}))}get shouldRender(){if(!this._hasChanged)return!1;if(typeof this._previousRenderValue>"u")return!0;return!fi(this.renderValue,this._previousRenderValue)}get renderValue(){return this._currentValue}projectStyles(){const e=this.renderValue,t=`rotate(${e}${this._unit})`;return this._previousRenderValue=e,t}isTransform(){return!0}}class nr extends Gi{constructor(){super(...arguments),qt(this,"_animateLayoutUpdateNextFrame",!1)}get x(){return this._currentValue.x}get y(){return this._currentValue.y}set(e,t=!0){const i={x:this._currentValue.x,y:this._currentValue.y,..."number"==typeof e?{x:e,y:e}:e};this._setTarget(new di(i.x,i.y),t)}setWithSize(e,t=!0){let i=this._currentValue.x,r=this._currentValue.y;e.width&&(i=e.width/this._rect.size.width),e.height&&(r=e.height/this._rect.size.height),!e.width&&e.height&&(i=r),!e.height&&e.width&&(r=i);const n={x:i,y:r};this._setTarget(new di(n.x,n.y),t)}reset(e=!0){this._setTarget(new di(1,1),e)}update(e,t){if("position"!==this._view.layoutOption){if((this._view.isInverseEffectEnabled||this._view.isLayoutTransitionEnabled)&&!this._view.isTemporaryView&&this._runLayoutTransition(),this._view.isInverseEffectEnabled){const e=this._view._parent,t=e?e.scale.x:1,i=e?e.scale.y:1;this._hasChanged=1!==t||1!==i}this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y||(this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:new di(this._previousValue.x,this._previousValue.y),ts:e,dt:t}))}}_runLayoutTransition(){const e=!(this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y),t=this._previousRect.size.width/this._rect.size.width,i=this._previousRect.size.height/this._rect.size.height;let r=!1;if((!Number.isNaN(t)&&1!==t||!Number.isNaN(i)&&1!==i)&&(r=!0),r){if(1!==this._currentValue.x||1!==this._currentValue.y){const t=this._view.previousRect.size.width/this._view.rect.size.width,i=this._view.previousRect.size.height/this._view.rect.size.height;return this._setTarget(new di(this._currentValue.x*t,this._currentValue.y*i),!1),void(e&&(this._animateLayoutUpdateNextFrame=!0))}const t=this._previousRect.size.width/this._rect.size.width,i=this._previousRect.size.height/this._rect.size.height;this._view.viewProps.borderRadius.applyScaleInverse(),this._setTarget(new di(t,i),!1),this._animateLayoutUpdateNextFrame=!0}else this._animateLayoutUpdateNextFrame&&(this._setTarget(this._initialValue,!0),this._animateLayoutUpdateNextFrame=!1)}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(fi(e.x,this._previousRenderValue.x)&&fi(e.y,this._previousRenderValue.y))}get renderValue(){const e=this._view._parent?this._view._parent.scale.x:1,t=this._view._parent?this._view._parent.scale.y:1,i=this._currentValue.x/e,r=this._currentValue.y/t;return new di(i,r)}projectStyles(){const e=this.renderValue,t=`scale3d(${e.x}, ${e.y}, 1)`;return this._previousRenderValue=e,t}isTransform(){return!0}}class ar extends Gi{get width(){return this._view.rect.size.width}get height(){return this._view.rect.size.height}get localWidth(){return this._currentValue.x}get localHeight(){return this._currentValue.y}get widthAfterScale(){const e=this._view.scale.x;return this.localWidth*e}get heightAfterScale(){const e=this._view.scale.y;return this.localHeight*e}get initialWidth(){return this._initialValue.x}get initialHeight(){return this._initialValue.y}set(e,t=!0){const i={width:this._currentValue.x,height:this._currentValue.y,...e};this._setTarget(new di(i.width,i.height),t)}setWidth(e,t=!0){const i={width:this._currentValue.x,height:this._currentValue.y,width:e};this._setTarget(new di(i.width,i.height),t)}setHeight(e,t=!0){const i={width:this._currentValue.x,height:this._currentValue.y,height:e};this._setTarget(new di(i.width,i.height),t)}reset(e=!0){this._setTarget(new di(this.initialWidth,this.initialHeight),e)}update(e,t){this._targetValue.x===this._currentValue.x&&this._targetValue.y===this._currentValue.y||(this._currentValue=this._animator.update({animatorProp:this._animatorProp,current:this._currentValue,target:this._targetValue,initial:this._previousValue,ts:e,dt:t}))}get shouldRender(){if(!this._hasChanged)return!1;if(!this._previousRenderValue)return!0;const e=this.renderValue;return!(fi(e.x,this._previousRenderValue.x)&&fi(e.y,this._previousRenderValue.y))}get renderValue(){return new di(this._currentValue.x,this._currentValue.y)}projectStyles(){const e=this.renderValue,t=`width: ${e.x}px; height: ${e.y}px;`;return this._previousRenderValue=e,t}isTransform(){return!1}}class sr{constructor(e){qt(this,"_props",new Map),this._props.set("position",new ir(new Yi,new di(0,0),e)),this._props.set("scale",new nr(new Yi,new di(1,1),e)),this._props.set("rotation",new rr(new Ki,0,e)),this._props.set("size",new ar(new Yi,new di(e.rect.size.width,e.rect.size.height),e)),this._props.set("opacity",new er(new Ki,e.elementReader.opacity.value,e)),this._props.set("borderRadius",new Qi(new Xi,[e.elementReader.borderRadius.value.topLeft,e.elementReader.borderRadius.value.topRight,e.elementReader.borderRadius.value.bottomRight,e.elementReader.borderRadius.value.bottomLeft],e)),this._props.set("origin",new tr(new Yi,e.elementReader.origin.value,e))}allProps(){return Array.from(this._props.values())}allPropNames(){return Array.from(this._props.keys())}getPropByName(e){return this._props.get(e)}get position(){return this._props.get("position")}get scale(){return this._props.get("scale")}get rotation(){return this._props.get("rotation")}get size(){return this._props.get("size")}get opacity(){return this._props.get("opacity")}get borderRadius(){return this._props.get("borderRadius")}get origin(){return this._props.get("origin")}}class or{constructor(e,t,i,r){qt(this,"id"),qt(this,"name"),qt(this,"element"),qt(this,"styles",{}),qt(this,"_viewProps"),qt(this,"_previousRect"),qt(this,"_onAddCallbacks"),qt(this,"_onRemoveCallback"),qt(this,"_skipFirstRenderFrame"),qt(this,"_layoutTransition"),qt(this,"_registry"),qt(this,"_layoutId"),qt(this,"_elementReader"),qt(this,"_viewParents"),qt(this,"_temporaryView"),qt(this,"_inverseEffect"),qt(this,"_renderNextTick"),qt(this,"_layoutOption"),qt(this,"_elementObserver"),qt(this,"_hasReadElement"),qt(this,"_shouldReadRect"),qt(this,"_readWithScroll"),qt(this,"_externalUserStyles"),this._registry=i,this.id=si(),this.name=t,this.element=e,this.element.dataset.velViewId=this.id,this._elementReader=Vi(this),this._viewParents=this._getParents(),this._previousRect=this._elementReader.rect,this._viewProps=new sr(this),this._skipFirstRenderFrame=!0,this._layoutId=r,this._layoutTransition=!1,this._temporaryView=!1,this.styles=Si(this.styles,(()=>{this._renderNextTick=!0})),this._externalUserStyles=this._getExternalUserStyles(),this._renderNextTick=!1,this._layoutOption=this._getLayoutOption(),this._hasReadElement=!1,this._shouldReadRect=!1,this._readWithScroll=!1,this._elementObserver=new pi(e),this._elementObserver.onChange((e=>{this._hasReadElement?this._shouldReadRect=!1:(this._externalUserStyles=this._getExternalUserStyles(),this._shouldReadRect=!0,this._readWithScroll=e)}))}destroy(){this._viewProps.allProps().forEach((e=>e.destroy())),this.element.removeAttribute("data-vel-view-id"),this.element.removeAttribute("data-vel-plugin-id"),this._renderNextTick=!0}get elementReader(){return this._elementReader}get layoutOption(){return this._layoutOption}_getLayoutOption(){return this.element.closest("[data-vel-layout-position]")?"position":this.element.closest("[data-vel-layout-size]")?"size":"all"}setElement(e){this.element=e,this._elementReader=Vi(this),this.element.dataset.velViewId=this.id,this._elementObserver.setElement(e),this._viewParents=this._getParents()}get layoutId(){return this._layoutId}get position(){return this._viewProps.position}get scale(){return this._viewProps.scale}get _children(){const e=this.element.querySelectorAll("*");return Array.from(e).map((e=>e.dataset.velViewId)).filter((e=>e&&"string"==typeof e)).map((e=>this._registry.getViewById(e))).filter((e=>!!e))}get _parent(){return this._parents[0]}get _parents(){return this._viewParents}_getParents(){var e;const t=[];let i=this.element.parentElement;if(!i)return t;for(i=i.closest("[data-vel-view-id]");i;){const r=i.dataset.velViewId;if(r){const e=this._registry.getViewById(r);e&&t.push(e)}i=null==(e=i.parentElement)?void 0:e.closest("[data-vel-view-id]")}return t}get rotation(){return this._viewProps.rotation}get size(){return this._viewProps.size}get _localWidth(){return this._viewProps.size.localWidth}get _localHeight(){return this._viewProps.size.localHeight}get opacity(){return this._viewProps.opacity}get borderRadius(){return this._viewProps.borderRadius}get origin(){return this._viewProps.origin}get data(){const e=this.element.dataset;return Object.keys(e).filter((e=>e.includes("velData"))).map((e=>e.replace("velData",""))).map((e=>`${e[0].toLowerCase()}${e.slice(1)}`)).reduce(((t,i)=>{const r=e[`velData${i[0].toUpperCase()}${i.slice(1)}`];return!t[i]&&r&&(t[i]=r),t}),{})}get onAddCallbacks(){return this._onAddCallbacks}get onRemoveCallback(){return this._onRemoveCallback}get isLayoutTransitionEnabled(){return this._layoutTransition}get hasLayoutTransitionEnabledForParents(){return this._parents.some((e=>e.isLayoutTransitionEnabled))}get isInverseEffectEnabled(){let e=!1;for(let t=0;t<this._parents.length;t++){const i=this._parents[t];if(typeof i._inverseEffect<"u"){e=i._inverseEffect;break}}return e}layoutTransition(e){this._layoutTransition=e,this.inverseEffect(e)}inverseEffect(e){this._inverseEffect=e,e&&this._children.forEach((e=>{if("instant"===e.position.animator.name){const t=this.viewProps.position.getAnimator();e.position.setAnimator(t.name,t.config)}if("instant"===e.scale.animator.name){const t=this.viewProps.scale.getAnimator();e.scale.setAnimator(t.name,t.config)}}))}setAnimatorsFromParent(){let e=this._parent;for(;e&&!e._inverseEffect;)e=e._parent;if(e){if("instant"===this.position.animator.name){const t=e.viewProps.position.getAnimator();this.position.setAnimator(t.name,t.config)}if("instant"===this.scale.animator.name){const t=e.viewProps.scale.getAnimator();this.scale.setAnimator(t.name,t.config)}}}get _isRemoved(){return!this._registry.getViewById(this.id)}setPluginId(e){this.element.dataset.velPluginId=e}hasElement(e){return this.element.contains(e)}getScroll(){return this._elementReader.scroll}intersects(e,t){const i=this.element.getBoundingClientRect(),r=i.left,n=i.top;return e>=r&&e<=r+i.width&&t>=n&&t<=n+i.height}overlapsWith(e){const t=e._localWidth*e.scale.x,i=e._localHeight*e.scale.y,r=this._localWidth*this.scale.x,n=this._localHeight*this.scale.y;return this.position.x<e.position.x+t&&this.position.x+r>e.position.x&&this.position.y<e.position.y+i&&this.position.y+n>e.position.y}distanceTo(e){const t=new di(this.position.x,this.position.y),i=new di(e.position.x,e.position.y);return di.sub(i,t).magnitude}read(){this._shouldReadRect&&(this._elementReader.update(this._readWithScroll),this._children.forEach((e=>{e.setHasReadElement(!0),e.elementReader.update(this._readWithScroll)})),this._shouldReadRect=!1,this._readWithScroll=!1),this.setHasReadElement(!1)}setHasReadElement(e){this._hasReadElement=e}get rect(){return this._elementReader.rect}get previousRect(){return this._previousRect}update(e,t){this._viewProps.allProps().forEach((i=>i.update(e,t)))}_updatePreviousRect(){this._previousRect=this._elementReader.rect}setAsTemporaryView(){this._temporaryView=!0}get isTemporaryView(){return this._temporaryView}get shouldRender(){return this._renderNextTick||this._viewProps.allProps().some((e=>e.shouldRender))}_cleanCssText(e){const t=new Map,i=/([-\w]+)\s*:\s*([^;]+)\s*;?/g;let r;for(;null!==(r=i.exec(e));){const[e,i,n]=r;if(!n.trim())continue;const a=i.replace(/^-\w+-/,"");(!t.has(a)||!i.startsWith("-"))&&t.set(a,`${a}: ${n.trim()}`)}return Array.from(t.values()).join("; ")}render(){if(!this.shouldRender)return;if(this._isRemoved&&this._skipFirstRenderFrame)return void(this._skipFirstRenderFrame=!1);let e="";const t=this._viewProps.allProps(),i=t.filter((e=>e.isTransform())),r=t.filter((e=>!e.isTransform()));if(i.some((e=>e.hasChanged()))){const t=i.reduce(((e,t,r)=>(e+=t.projectStyles(),r<i.length-1&&(e+=" "),r===i.length-1&&(e+=";"),e)),"transform: ");e+=t}r.forEach((t=>{t.hasChanged()&&(e+=t.projectStyles())})),e+=this._getUserStyles(),this._cleanCssText(this.element.style.cssText)!==this._cleanCssText(e)&&(this.element.style.cssText=e),this._renderNextTick=!1}_getExternalUserStyles(){const e=this.element.style.cssText,t=this.styles;if(0===e.length)return"";const i=["transform","transform-origin","opacity","width","height","border-radius"],r={};for(const n in t)t.hasOwnProperty(n)&&(r[Gt(n)]=t[n]);return e.split(";").map((e=>e.trim())).filter(Boolean).filter((e=>{const t=e.indexOf(":");if(-1===t)return!1;const n=e.slice(0,t).trim();return!r.hasOwnProperty(n)&&!i.includes(n)})).join("; ")}_getUserStyles(){return Object.keys(this.styles).reduce(((e,t)=>{if(!t)return e;return e+`${Gt(t).replace("webkit","-webkit").replace("moz","-moz")}: ${this.styles[t]}; `}),this._externalUserStyles)}markAsAdded(){delete this.element.dataset.velProcessing}onAdd(e){this._onAddCallbacks=e}onRemove(e){this._onRemoveCallback=e}get viewProps(){return this._viewProps}getPropByName(e){return this._viewProps.getPropByName(e)}_copyAnimatorsToAnotherView(e){e.viewProps.allPropNames().forEach((t=>{var i,r;const n=null==(i=this.viewProps.getPropByName(t))?void 0:i.getAnimator();n&&(null==(r=e.viewProps.getPropByName(t))||r.setAnimator(n.name,n.config))}))}getChildren(e){const t=this.element.querySelectorAll("*"),i=Array.from(t).filter((t=>{const i=t;return typeof i.dataset.velViewId<"u"&&i.dataset.velView===e})).map((e=>e.dataset.velViewId));return this._registry.getViewsById(i)}getChild(e){return this.getChildren(e)[0]}getParent(e){const t=this.element.closest(`[data-vel-view="${e}"]`);if(!t)return;const i=t.dataset.velViewId;return i?this._registry.getViewById(i):void 0}}class lr{constructor(e,t){qt(this,"_appEventBus"),qt(this,"_eventBus"),qt(this,"_plugins",[]),qt(this,"_views",[]),qt(this,"_viewsPerPlugin",new Map),qt(this,"_viewsToBeCreated",[]),qt(this,"_viewsToBeRemoved",[]),qt(this,"_viewsCreatedInPreviousFrame",[]),qt(this,"_layoutIdToViewMap",new Map),qt(this,"_eventPluginsPerPlugin",new Map),qt(this,"_pluginNameToPluginFactoryMap",new Map),qt(this,"_pluginNameToPluginConfigMap",new Map),this._appEventBus=e,this._eventBus=t}update(){this._handleRemovedViews(),this._handleAddedViews()}associateEventPluginWithPlugin(e,t){let i=this._eventPluginsPerPlugin.get(e);i||(i=[],this._eventPluginsPerPlugin.set(e,i)),i.push(t)}_handleRemovedViews(){const e=this._viewsToBeRemoved.filter((e=>e.dataset.velViewId));e.length&&(e.forEach((e=>{const t=e.dataset.velViewId;t&&this._handleRemoveView(t)})),this._viewsToBeRemoved=[])}_getPluginNameForElement(e){const t=e.dataset.velPlugin;if(t&&t.length>0)return t;const i=e.closest("[data-vel-plugin]");return i?i.dataset.velPlugin:void 0}_getPluginIdForElement(e){const t=this._getPluginNameForElement(e);if(!t)return;const i=e.closest("[data-vel-plugin-id]");if(i)return i.dataset.velPluginId;const r=this.getPluginByName(t);return r?r.id:void 0}_isScopedElement(e){const t=this._getPluginNameForElement(e);if(!t)return!1;const i=this._pluginNameToPluginFactoryMap.get(t),r=null==i?void 0:i.scope;return e.dataset.velView===r}_removeElementsWithParent(e){const t=new Set(e);return e.filter((e=>{let i=e.parentElement;for(;i;){if(t.has(i))return!1;i=i.parentElement}return!0}))}_handleAddedViews(){this._viewsCreatedInPreviousFrame.forEach((e=>{e.markAsAdded()})),this._viewsCreatedInPreviousFrame=[];const e=this._removeElementsWithParent(this._viewsToBeCreated),t=Array.from(new Set(e.filter((e=>this._isScopedElement(e)&&!this._isElementIgnored(e))))),i=e.filter((e=>!this._isScopedElement(e)&&!this._isElementIgnored(e)));this._viewsToBeCreated=[],t.forEach((e=>{const t=this._getPluginNameForElement(e),i=this._pluginNameToPluginFactoryMap.get(t),r=this._pluginNameToPluginConfigMap.get(t),n=e.dataset.velPluginKey,a=ci(i,this,this._eventBus,this._appEventBus,r,n);this._plugins.push(a);const s=e.dataset.velView,o=this._createNewView(e,s,a);o.isInverseEffectEnabled&&o.setAnimatorsFromParent(),a.notifyAboutViewAdded(o)}));const r=i.filter((e=>!!this._getPluginIdForElement(e)));0!==r.length&&r.forEach((e=>{const t=this._getPluginIdForElement(e),i=e.dataset.velView;if(!i||!t)return;const r=this._getPluginById(t);if(!r)return;const n=this._getLayoutIdForElement(e,r);let a;n&&this._layoutIdToViewMap.has(n)?(a=this._layoutIdToViewMap.get(n),a.setElement(e),a.setPluginId(r.id),this._createChildrenForView(a,r)):a=this._createNewView(e,i,r),a.isInverseEffectEnabled&&a.setAnimatorsFromParent(),r.notifyAboutViewAdded(a)}))}_getLayoutIdForElement(e,t){const i=e.dataset.velLayoutId;if(i)return`${i}-${t.id}`}_createNewView(e,t,i){const r=this._getLayoutIdForElement(e,i),n=this.createView(e,t,r);return i.addView(n),n.layoutId&&this._layoutIdToViewMap.set(n.layoutId,n),this._createChildrenForView(n,i),this._appEventBus.emitPluginReadyEvent(i.pluginName,i.api,!0),requestAnimationFrame((()=>{requestAnimationFrame((()=>{this._appEventBus.emitPluginReadyEvent(i.pluginName,i.api)}))})),n}_createChildrenForView(e,t){const i=e.element.querySelectorAll("*");if(i.length){if(Array.from(i).some((e=>this._getPluginNameForElement(e)!==t.pluginName)))return;Array.from(i).filter((e=>!this._isElementIgnored(e))).forEach((i=>{const r=i,n=r.dataset.velView?r.dataset.velView:`${e.name}-child`,a=this._getLayoutIdForElement(r,t),s=this.createView(r,n,a);a&&!this._layoutIdToViewMap.has(a)&&this._layoutIdToViewMap.set(a,s),t.addView(s),t.notifyAboutViewAdded(s)}))}}_handleRemoveView(e){this._plugins.forEach((t=>{if(!this._viewsPerPlugin.get(t.id))return;const i=this._getPluginViewById(t,e);i&&t.removeView(i)}))}removeViewById(e,t){this._unassignViewFromPlugin(e,t),this._views=this._views.filter((t=>t.id!==e))}_unassignViewFromPlugin(e,t){const i=this._viewsPerPlugin.get(t);if(!i)return;const r=i.indexOf(e);-1!==r&&i.splice(r,1)}getViewById(e){return this._views.find((t=>t.id===e))}getViewsById(e){return this._views.filter((t=>e.includes(t.id)))}_getPluginById(e){return this._plugins.find((t=>t.id===e))}_getPluginViewById(e,t){return this.getViewsForPlugin(e).find((e=>e.id===t))}destroy(e,t){if(!e)return void this._destroyAll(t);let i=[];if(e&&e.length>0){const t=this.getPluginByName(e);if(t){const e=(this._eventPluginsPerPlugin.get(t.id)||[]).map((e=>this._getPluginById(e))).filter((e=>typeof e<"u"));i.push(t),i.push(...e)}}else i=this._plugins;i.forEach((e=>{this._destroyPlugin(e)})),requestAnimationFrame((()=>{null==t||t()}))}_destroyPlugin(e){const t=this.getViewsForPlugin(e);t.forEach((e=>{e.layoutId&&this._layoutIdToViewMap.delete(e.layoutId),e.destroy()})),this._views=this._views.filter((e=>!t.find((t=>t.id===e.id)))),this._viewsPerPlugin.delete(e.id),this._plugins=this._plugins.filter((t=>t.id!==e.id))}_destroyAll(e){this._views.forEach((e=>e.destroy())),requestAnimationFrame((()=>{this._plugins=[],this._views=[],this._viewsPerPlugin.clear(),this._viewsToBeCreated=[],this._viewsToBeRemoved=[],this._viewsCreatedInPreviousFrame=[],this._layoutIdToViewMap.clear(),this._eventPluginsPerPlugin.clear(),null==e||e()}))}reset(e,t){let i=[];if(e&&e.length>0){const t=this.getPluginByName(e);if(t){const e=(this._eventPluginsPerPlugin.get(t.id)||[]).map((e=>this._getPluginById(e))).filter((e=>typeof e<"u"));i.push(t),i.push(...e)}}else i=this._plugins;requestAnimationFrame((()=>{i.forEach((e=>{this._resetPlugin(e)})),requestAnimationFrame((()=>{null==t||t()}))}))}_resetPlugin(e){const t=e.config,i=e.pluginFactory,r=e.internalBusEvent,n=!e.isRenderable(),a=this.getViewsForPlugin(e);a.forEach((e=>{e.layoutId&&this._layoutIdToViewMap.delete(e.layoutId),e.destroy()})),this._views=this._views.filter((e=>!a.find((t=>t.id===e.id)))),this._viewsPerPlugin.delete(e.id),this._plugins=this._plugins.filter((t=>t.id!==e.id)),n||requestAnimationFrame((()=>{this.createPlugin(i,this._eventBus,t).setInternalEventBus(r)}))}queueNodeToBeCreated(e){this._viewsToBeCreated.push(e)}queueNodeToBeRemoved(e){this._viewsToBeRemoved.push(e)}notifyPluginAboutDataChange(e){const t=this._plugins.filter((t=>t.id===e.pluginId));!t||!t.length||t.forEach((t=>{t.notifyAboutDataChanged({dataName:e.dataName,dataValue:e.dataValue,viewName:e.viewName})}))}getPlugins(){return this._plugins}getRenderablePlugins(){return this._plugins.filter((function(e){return e.isRenderable()}))}getPluginByName(e,t){return this._plugins.find((i=>t?i.pluginKey===t&&i.pluginName===e:i.pluginName===e))}getPluginsByName(e,t){return this._plugins.filter((i=>t?i.pluginKey===t&&i.pluginName===e:i.pluginName===e))}hasPlugin(e){return!!e.pluginName&&!!this.getPluginByName(e.pluginName)}createPlugin(e,t,i={},r=!1){if(!e.pluginName)throw Error(`Plugin ${e.name} must contain a pluginName field`);let n=[];if(e.scope){const t=r?`[data-vel-plugin=${e.pluginName}][data-vel-view=${e.scope}]:not([data-vel-plugin-id])`:`[data-vel-plugin=${e.pluginName}][data-vel-view=${e.scope}]`,a=document.querySelectorAll(t);this._pluginNameToPluginFactoryMap.has(e.pluginName)||this._pluginNameToPluginFactoryMap.set(e.pluginName,e),this._pluginNameToPluginConfigMap.has(e.pluginName)||this._pluginNameToPluginConfigMap.set(e.pluginName,i),n=a?Array.from(a):[document.documentElement]}else n=[document.documentElement];const a=n.map((r=>{const n=r.dataset.velPluginKey,a=ci(e,this,t,this._appEventBus,i,n);this._plugins.push(a);let s=[];r!==document.documentElement&&s.push(r);const o=r.querySelectorAll(`[data-vel-plugin=${a.pluginName}]`);s=[...s,...o];const l=s.filter((e=>{if(this._isElementIgnored(e))return!1;if(!e.parentElement)return!0;const t=this._getPluginNameForElement(e.parentElement);return!(t&&t.length>0)}));return l.length&&l.forEach((e=>{const t=e.dataset.velView;if(!t)return;const i=this._createNewView(e,t,a);a.notifyAboutViewAdded(i)})),a}));if(a&&a.length>0)return a[0];const s=ci(e,this,t,this._appEventBus,i);return e.scope,s}updatePlugin(e,t,i={}){return this.createPlugin(e,t,i,!0)}getViews(){return this._views}createView(e,t,i){const r=new or(e,t,this,i);return this._views.push(r),this._viewsCreatedInPreviousFrame.push(r),r}_isElementIgnored(e){return e.closest("[data-vel-ignore]")}assignViewToPlugin(e,t){this._viewsPerPlugin.has(t.id)||this._viewsPerPlugin.set(t.id,[]);const i=this._viewsPerPlugin.get(t.id);i.includes(e.id)||i.push(e.id)}getViewsForPlugin(e){const t=this._viewsPerPlugin.get(e.id);return t?t.map((e=>this._views.find((t=>t.id===e)))).filter((e=>!!e)):[]}getViewsByNameForPlugin(e,t){return this.getViewsForPlugin(e).filter((e=>e.name===t))}}class ur{constructor(e){qt(this,"pluginApi"),this.pluginApi=e.pluginApi}}class hr{constructor(e){qt(this,"pluginApi"),this.pluginApi=e.pluginApi}}class cr{constructor(){qt(this,"previousTime",0),qt(this,"registry"),qt(this,"eventBus"),qt(this,"appEventBus"),this.eventBus=new ni,this.appEventBus=new ni,this.registry=new lr(this.appEventBus,this.eventBus),new ti(this.eventBus)}static create(){return new cr}addPlugin(e,t={}){this.registry.hasPlugin(e)||this.registry.createPlugin(e,this.eventBus,t)}updatePlugin(e,t={}){this.registry.hasPlugin(e)&&this.registry.updatePlugin(e,this.eventBus,t)}reset(e,t){this.registry.reset(e,t)}destroy(e,t){this.registry.destroy(e,t)}getPlugin(e,t){let i="string"==typeof e?e:e.pluginName;const r=this.registry.getPluginByName(i,t);if(!r)throw new Error(`You can't call getPlugin for ${i} with key: ${t} because it does not exist in your app`);return r.api}getPlugins(e,t){let i="string"==typeof e?e:e.pluginName;const r=this.registry.getPluginsByName(i,t);if(0===r.length)throw new Error(`You can't call getPlugins for ${i} with key: ${t} because they don't exist in your app`);return r.map((e=>e.api))}onPluginEvent(e,t,i,r){requestAnimationFrame((()=>{const n=this.registry.getPluginByName(e.pluginName,r);n&&n.on(t,i)}))}removePluginEventListener(e,t,i){const r=this.registry.getPluginByName(e.pluginName);r&&r.removeListener(t,i)}run(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.start.bind(this)):this.start()}start(){this.setup(),requestAnimationFrame(this.tick.bind(this))}setup(){this.listenToNativeEvents(),this.subscribeToEvents()}listenToNativeEvents(){document.addEventListener("click",(e=>{this.eventBus.emitEvent(Yt,{x:e.clientX,y:e.clientY,target:e.target})})),document.addEventListener("pointermove",(e=>{this.eventBus.emitEvent(Xt,{x:e.clientX,y:e.clientY,target:e.target})})),document.addEventListener("pointerdown",(e=>{this.eventBus.emitEvent(Kt,{x:e.clientX,y:e.clientY,target:e.target})})),document.addEventListener("pointerup",(e=>{this.eventBus.emitEvent(Jt,{x:e.clientX,y:e.clientY,target:e.target})}))}tick(e){let t=(e-this.previousTime)/1e3;t>.016&&(t=1/60),this.previousTime=e,this.eventBus.reset(),this.subscribeToEvents(),this.read(),this.update(e,t),this.render(),requestAnimationFrame(this.tick.bind(this))}subscribeToEvents(){this.eventBus.subscribeToEvent(Qt,this.onNodeAdded.bind(this)),this.eventBus.subscribeToEvent(ei,this.onNodeRemoved.bind(this)),this.eventBus.subscribeToEvent(Zt,this.onDataChanged.bind(this)),this.registry.getPlugins().forEach((e=>{e.subscribeToEvents(this.eventBus)}))}onNodeAdded({node:e}){this.registry.queueNodeToBeCreated(e)}onNodeRemoved({node:e}){this.registry.queueNodeToBeRemoved(e)}onDataChanged(e){this.registry.notifyPluginAboutDataChange(e)}read(){this.registry.getViews().forEach((e=>{e.read()}))}update(e,t){this.registry.update(),this.registry.getPlugins().slice().reverse().forEach((e=>{e.init()})),this.registry.getRenderablePlugins().forEach((i=>{i.update(e,t)})),this.registry.getViews().forEach((i=>{i.update(e,t)})),this.registry.getViews().forEach((e=>{e._updatePreviousRect()}))}render(){this.registry.getRenderablePlugins().forEach((e=>{e.render()})),this.registry.getViews().forEach((e=>{e.render()}))}}class dr{constructor(e){qt(this,"view"),qt(this,"previousX"),qt(this,"previousY"),qt(this,"x"),qt(this,"y"),qt(this,"pointerX"),qt(this,"pointerY"),qt(this,"isDragging"),qt(this,"target"),qt(this,"directions",[]),qt(this,"width"),qt(this,"height"),qt(this,"distance"),qt(this,"stopped"),this.props=e,this.previousX=e.previousX,this.previousY=e.previousY,this.x=e.x,this.y=e.y,this.pointerX=e.pointerX,this.pointerY=e.pointerY,this.width=e.width,this.height=e.height,this.distance=e.distance,this.view=e.view,this.isDragging=e.isDragging,this.stopped=e.stopped,this.target=e.target,this.directions=e.directions}}class pr extends ui{constructor(){super(...arguments),qt(this,"_pointerX",0),qt(this,"_pointerY",0),qt(this,"_initialPointer",new di(0,0)),qt(this,"_initialPointerPerView",new Map),qt(this,"_pointerDownPerView",new Map),qt(this,"_viewPointerPositionLog",new Map),qt(this,"_stopTimer",0)}setup(){document.addEventListener("selectstart",this.onSelect.bind(this))}onSelect(e){this._isDragging&&e.preventDefault()}get _isDragging(){return Array.from(this._pointerDownPerView.values()).some((e=>!!e))}subscribeToEvents(e){e.subscribeToEvent(Kt,(({x:e,y:t})=>{this._initialPointer=new di(e,t),this.getViews().forEach((i=>{this._pointerDownPerView.set(i.id,i.intersects(e,t));const r=i.isLayoutTransitionEnabled?i.position.initialX:i.position.x,n=i.isLayoutTransitionEnabled?i.position.initialY:i.position.y,a=new di(e-r,t-n);this._pointerX=e,this._pointerY=t,this._initialPointerPerView.set(i.id,a)}))})),e.subscribeToEvent(Jt,(()=>{this.getViews().forEach((e=>{this._pointerDownPerView.get(e.id)&&this._initialPointerPerView.get(e.id)&&(this._pointerDownPerView.set(e.id,!1),this._emitEvent(e,[]))}))})),e.subscribeToEvent(Xt,(({x:e,y:t})=>{this._pointerX=e,this._pointerY=t,this.getViews().forEach((i=>{if(this._pointerDownPerView.get(i.id)&&this._initialPointerPerView.get(i.id)){this._viewPointerPositionLog.has(i.id)||this._viewPointerPositionLog.set(i.id,[]);const r=new di(e,t),n=this._viewPointerPositionLog.get(i.id);n&&n.push(new di(e,t));const a=n&&n.length>=2?n[n.length-2]:r.clone(),s=this._calculateDirections(a,r);this._emitEvent(i,s),clearTimeout(this._stopTimer),this._stopTimer=setTimeout((()=>{!0===this._pointerDownPerView.get(i.id)&&this._emitEvent(i,s,!0)}),120)}}))}))}_emitEvent(e,t,i=!1){const r=this._viewPointerPositionLog.get(e.id),n=r&&r.length>=2?r[r.length-2]:null,a=this._pointerX-this._initialPointerPerView.get(e.id).x,s=this._pointerY-this._initialPointerPerView.get(e.id).y,o=this._pointerX,l=this._pointerY,u=n?n.x-this._initialPointerPerView.get(e.id).x:a,h=n?n.y-this._initialPointerPerView.get(e.id).y:s,c=this._pointerY-this._initialPointer.y,d=this._pointerX-this._initialPointer.x,p=function(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}(this._initialPointer,{x:this._pointerX,y:this._pointerY}),f=!0===this._pointerDownPerView.get(e.id);f||this._viewPointerPositionLog.clear();const g={view:e,target:e.element,previousX:u,previousY:h,x:a,y:s,pointerX:o,pointerY:l,distance:p,width:d,height:c,isDragging:f,directions:t,stopped:i};this.emit(dr,g)}_calculateDirections(e,t){const i={up:di.sub(new di(e.x,e.y-1),e),down:di.sub(new di(e.x,e.y+1),e),left:di.sub(new di(e.x-1,e.y),e),right:di.sub(new di(e.x+1,e.y),e)},r=di.sub(t,e).unitVector;return[{direction:"up",projection:r.dot(i.up)},{direction:"down",projection:r.dot(i.down)},{direction:"left",projection:r.dot(i.left)},{direction:"right",projection:r.dot(i.right)}].filter((e=>e.projection>0)).map((e=>e.direction))}}qt(pr,"pluginName","DragEventPlugin");class fr{constructor(e){qt(this,"view"),qt(this,"direction"),this.props=e,this.view=e.view,this.direction=e.direction}}qt(class extends ui{constructor(){super(...arguments),qt(this,"_viewIsPointerDownMap",new Map),qt(this,"_viewPointerPositionLog",new Map),qt(this,"_targetPerView",new Map)}subscribeToEvents(e){e.subscribeToEvent(Kt,(({x:e,y:t,target:i})=>{this.getViews().forEach((r=>{this._targetPerView.set(r.id,i),r.intersects(e,t)&&this._viewIsPointerDownMap.set(r.id,!0)}))})),e.subscribeToEvent(Xt,(({x:e,y:t})=>{this.getViews().forEach((i=>{this._viewIsPointerDownMap.get(i.id)&&(this._viewPointerPositionLog.has(i.id)||this._viewPointerPositionLog.set(i.id,[]),this._viewPointerPositionLog.get(i.id).push(new di(e,t)))}))})),e.subscribeToEvent(Jt,(({x:e,y:t})=>{this.getViews().forEach((i=>{if(!this._viewIsPointerDownMap.get(i.id)||!this._viewPointerPositionLog.has(i.id))return;const r=new di(e,t),n=this._viewPointerPositionLog.get(i.id),a=n[n.length-2]||r.clone(),s=this._targetPerView.get(i.id),o=function(e,t){const i={up:di.sub(new di(e.x,e.y-1),e),down:di.sub(new di(e.x,e.y+1),e),left:di.sub(new di(e.x-1,e.y),e),right:di.sub(new di(e.x+1,e.y),e)},r=di.sub(t,e).unitVector,n=["up","down","left","right"],a=[r.dot(i.up),r.dot(i.down),r.dot(i.left),r.dot(i.right)],s=Math.max(...a),o=a.indexOf(s),l=n[o],u=di.sub(t,e).magnitude;return{hasSwiped:r.dot(i[l])*u>30,direction:l}}(a,r);s&&i.hasElement(s)&&o.hasSwiped&&this.emit(fr,{view:i,direction:o.direction}),this._viewPointerPositionLog.set(i.id,[]),this._viewIsPointerDownMap.set(i.id,!1)}))}))}},"pluginName","SwipeEventPlugin");class gr{constructor(e){qt(this,"view"),this.props=e,this.view=e.view}}qt(class extends ui{subscribeToEvents(e){e.subscribeToEvent(Yt,(({x:e,y:t,target:i})=>{this.getViews().forEach((r=>{const n=i,a=r.element===n||r.element.contains(n);r.intersects(e,t)&&a&&this.emit(gr,{view:r})}))}))}},"pluginName","ClickEventPlugin");class mr{constructor(e){zt(this,"data"),this.data=e.data}}class vr{constructor(e){zt(this,"data"),this.data=e.data}}class _r{}class yr{constructor(e){zt(this,"data"),this.data=e.data}}function wr(e){return{map:new Map(e),array:Array.from(e).map((([e,t])=>({slotId:e,itemId:t}))),object:Array.from(e).reduce(((e,[t,i])=>(e[t]=i,e)),{})}}const br=e=>{const t=e.useEventPlugin(pr);t.on(dr,(function(t){if(!_)return;const i=b().swapMode;a="handle"===t.view.name?t.view.getParent("item"):t.view,p||(p=a.getParent("slot")),null===m&&null===v&&(m=t.view.position.x-a.position.x,v=t.view.position.y-a.position.y);const R=r.some((e=>e.intersects(t.pointerX,t.pointerY)));t.isDragging?(y||(y=!0,e.emit(_r,{})),h=t,V(),r.forEach((r=>{var n;if(!r.intersects(t.pointerX,t.pointerY))return void(r!==p&&r.element.removeAttribute("data-swapy-highlighted"));if(typeof r.element.dataset.swapyHighlighted>"u"&&(r.element.dataset.swapyHighlighted=""),!p||("stop"===i||"drop"!==i&&!c)&&!t.stopped)return;const s=r.element.dataset.swapySlot,o=null==(n=r.getChild("item"))?void 0:n.element.dataset.swapyItem,l=p.element.dataset.swapySlot,u=a.element.dataset.swapyItem;if(!s||!l||!u)return;const h=new Map(f);h.set(s,u),o?h.set(l,o):h.set(l,null),jt(h,g)||(w=E(new Map(h)),!d&&"drop"!==i&&w(),p=null,"drop"!==i&&e.emit(mr,{data:wr(h)}))})),n.forEach((e=>{e.styles.zIndex=e===a?"2":""}))):(r.forEach((e=>{e.element.removeAttribute("data-swapy-highlighted")})),a.position.reset(),p=null,s=null,o=null,l=null,u=null,h=null,m=null,v=null,y=!1,"drop"===i&&(R||(w=E(new Map(f))),w(),e.emit(mr,{data:wr(f)})),w=()=>{},e.emit(vr,{data:wr(f)})),requestAnimationFrame((()=>{V()}))}));let i,r,n,a,s,o,l,u,h,c,d,p,f=new Map,g=new Map,m=null,v=null,_=!0,y=!1,w=()=>{};function b(){return{animation:i.data.configAnimation,continuousMode:typeof i.data.configContinuousMode<"u",manualSwap:typeof i.data.configManualSwap<"u",swapMode:i.data.configSwapMode}}function R(){const e=b().animation;return"dynamic"===e?{animator:"dynamic",config:{}}:"spring"===e?{animator:"spring",config:{damping:.7,stiffness:.62}}:{animator:"instant",config:{}}}function E(e){return()=>{f=e,g=new Map(f)}}function P(e){const i=e.getChild("item");i&&function(e){const i=R();e.styles.position="relative",e.styles.userSelect="none",e.styles.webkitUserSelect="none",e.position.setAnimator(i.animator,i.config),e.scale.setAnimator(i.animator,i.config),e.layoutTransition(!0),requestAnimationFrame((()=>{const i=e.getChild("handle");i?(t.addView(i),i.styles.touchAction="none"):(t.addView(e),e.styles.touchAction="none")}))}(i),f.set(e.element.dataset.swapySlot,i?i.element.dataset.swapyItem:null)}function x(){const t=R();e.getViews("root-child").forEach((e=>{e.position.setAnimator(t.animator,t.config),e.scale.setAnimator(t.animator,t.config),e.layoutTransition(!0)}))}function V(){if(!h)return;if(!s||!o){const e=a.getScroll();s=h.pointerX-a.position.x+e.x,o=h.pointerY-a.position.y+e.y}(!l||!u)&&(l=a.size.width,u=a.size.height);const e=a.size.width/l,t=a.size.height/u,i=s*(e-1),r=o*(t-1);a.position.set({x:h.x-i-(m||0),y:h.y-r-(v||0)},1!==a.scale.x||1!==a.scale.y)}e.api({setEnabled(e){_=e},setData(e){const t=function(e){if(e.map)return{map:new Map(e.map),array:Array.from(e.map).map((([e,t])=>({slotId:e,itemId:t}))),object:Array.from(e.map).reduce(((e,[t,i])=>(e[t]=i,e)),{})};if(e.object){const t={...e.object};return{map:new Map(Object.entries(t)),array:Object.entries(t).map((([e,t])=>({slotId:e,itemId:t}))),object:t}}{const t=[...e.array];return{map:new Map(t.map((({slotId:e,itemId:t})=>[e,t]))),array:t,object:t.reduce(((e,{slotId:t,itemId:i})=>(e[t]=i,e)),{})}}}(e);f=new Map(t.map),g=new Map(f)}}),e.setup((()=>{i=e.getView("root"),r=e.getViews("slot"),n=e.getViews("item"),c=b().continuousMode,d=b().manualSwap,r.forEach((e=>{P(e)})),x(),g=new Map(f),requestAnimationFrame((()=>{e.emit(yr,{data:wr(f)})}))})),e.onViewAdded((t=>{if(e.initialized)if("item"===t.name){n=e.getViews("item");P(t.getParent("slot")),x(),g=new Map(f),e.emit(mr,{data:wr(f)})}else"slot"===t.name&&(r=e.getViews("slot"))}))};let Rr;function Er(){return Rr?(Rr.updatePlugin(br),Rr):(Rr=cr.create(),Rr.addPlugin(br),Rr.run(),Rr)}br.pluginName="Swapy",br.scope="root";const Pr={animation:"dynamic",continuousMode:!0,manualSwap:!1,swapMode:"hover"};function xr(e,t={}){const i=$t+++"";return e.dataset.velPluginKey=i,e.dataset.velPlugin="Swapy",e.dataset.velView="root",e.dataset.velDataConfigAnimation=t.animation,e.dataset.velDataConfigSwapMode=t.swapMode,t.continuousMode&&(e.dataset.velDataConfigContinuousMode="true"),t.manualSwap&&(e.dataset.velDataConfigManualSwap="true"),Array.from(e.querySelectorAll("[data-swapy-slot]")).forEach((e=>{e.dataset.velView="slot"})),Array.from(e.querySelectorAll("[data-swapy-item]")).forEach((e=>{e.dataset.velView="item",e.dataset.velLayoutId=e.dataset.swapyItem;const t=e.querySelector("[data-swapy-handle]");t&&(t.dataset.velView="handle")})),Array.from(e.querySelectorAll("[data-swapy-text]")).forEach((e=>{e.dataset.velLayoutPosition=""})),Array.from(e.querySelectorAll("[data-swapy-exclude]")).forEach((e=>{e.dataset.velIgnore=""})),i}function Vr(e,t={}){if(!e)throw new Error("Cannot create a Swapy instance because the element you provided does not exist on the page!");const i={...Pr,...t},r=e;if(!function(e){let t=!0;const i=e.querySelectorAll("[data-swapy-slot]");return 0===i.length&&(t=!1),i.forEach((e=>{const i=e,r=i.dataset.swapySlot;(!r||0===r.length)&&(t=!1);const n=i.children;n.length>1&&(t=!1);const a=n[0];a&&(!a.dataset.swapyItem||0===a.dataset.swapyItem.length)&&(t=!1)})),t}(r))throw new Error("Cannot create a Swapy instance because your HTML structure is invalid. Fix all above errors and then try!");const n=xr(r,i),a=new Sr(r,n,i);return{onSwap(e){a.setSwapCallback(e)},onSwapEnd(e){a.setSwapEndCallback(e)},onSwapStart(e){a.setSwapStartCallback(e)},enable(e){a.setEnabled(e)},destroy(){a.destroy()},setData(e){a.setData(e)}}}class Sr{constructor(e,t,i){zt(this,"_rootEl"),zt(this,"_veloxiApp"),zt(this,"_slotElMap"),zt(this,"_itemElMap"),zt(this,"_swapCallback"),zt(this,"_swapEndCallback"),zt(this,"_swapStartCallback"),zt(this,"_previousMap"),zt(this,"_pluginKey"),this._rootEl=e,this._veloxiApp=Er(),this._slotElMap=this._createSlotElMap(),this._itemElMap=this._createItemElMap(),this._pluginKey=t,this._veloxiApp.onPluginEvent(br,yr,(({data:e})=>{this._previousMap=e.map}),t),this._veloxiApp.onPluginEvent(br,mr,(e=>{var t;this._previousMap&&jt(this._previousMap,e.data.map)||(i.manualSwap||this._applyOrder(e.data.map),this._previousMap=e.data.map,null==(t=this._swapCallback)||t.call(this,e))}),t),this._veloxiApp.onPluginEvent(br,vr,(e=>{var t;null==(t=this._swapEndCallback)||t.call(this,e)}),t),this._veloxiApp.onPluginEvent(br,_r,(()=>{var e;null==(e=this._swapStartCallback)||e.call(this)}),t),this.setupMutationObserver()}setupMutationObserver(){new MutationObserver((e=>{e.some((e=>"childList"===e.type))&&function(e){const t=Array.from(e.querySelectorAll("[data-swapy-slot]:not([data-vel-view])"));t.forEach((e=>{e.dataset.velView="slot"}));const i=Array.from(e.querySelectorAll("[data-swapy-item]:not([data-vel-view]"));return i.forEach((e=>{e.dataset.velView="item",e.dataset.velLayoutId=e.dataset.swapyItem;const t=e.querySelector("[data-swapy-handle]");t&&(t.dataset.velView="handle"),Array.from(e.querySelectorAll("[data-swapy-text]")).forEach((e=>{e.dataset.velLayoutPosition=""})),Array.from(e.querySelectorAll("[data-swapy-exclude]")).forEach((e=>{e.dataset.velIgnore=""}))})),i.length>0||t.length>0}(this._rootEl)&&(this._slotElMap=this._createSlotElMap(),this._itemElMap=this._createItemElMap())})).observe(this._rootEl,{childList:!0,subtree:!0})}setData(e){try{this._veloxiApp.getPlugin("Swapy",this._pluginKey).setData(e)}catch{}}destroy(){this._veloxiApp.destroy("Swapy")}setEnabled(e){try{this._veloxiApp.getPlugin("Swapy",this._pluginKey).setEnabled(e)}catch{}}setSwapCallback(e){this._swapCallback=e}setSwapEndCallback(e){this._swapEndCallback=e}setSwapStartCallback(e){this._swapStartCallback=e}_applyOrder(e){Array.from(e.keys()).forEach((t=>{var i;if(e.get(t)===(null==(i=this._previousMap)?void 0:i.get(t)))return;const r=e.get(t);if(!r)return;const n=this._slotElMap.get(t),a=this._itemElMap.get(r);!n||!a||(n.innerHTML="",n.appendChild(a))}))}_createSlotElMap(){return Array.from(this._rootEl.querySelectorAll("[data-swapy-slot]")).reduce(((e,t)=>(e.set(t.dataset.swapySlot,t),e)),new Map)}_createItemElMap(){return Array.from(this._rootEl.querySelectorAll("[data-swapy-item]")).reduce(((e,t)=>(e.set(t.dataset.swapyItem,t),e)),new Map)}}export{Vr as K,Dt as L,gt as N,At as R,nt as a,at as b,wt as c,c as j,Ot as u};
